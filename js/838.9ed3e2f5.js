"use strict";(self["webpackChunkmvtime"]=self["webpackChunkmvtime"]||[]).push([[838],{8838:function(e,t,s){s.r(t),s.d(t,{default:function(){return M}});var l=s(3396),a=s(7139),n=s(9242);const i=e=>((0,l.dD)("data-v-3ec35e7c"),e=e(),(0,l.Cn)(),e),o={class:"create_task"},d={class:"modal_header"},_={class:"header_style modal_header_title"},c=["value"],k={class:"overlay_contents",ref:"contents"},r={class:"overlay_contents_text"},p={key:0},h={key:1},u={class:"inputs_row"},y=["placeholder","disabled"],w=i((()=>(0,l._)("div",{class:"flex-break"},null,-1))),m=["placeholder"],f=i((()=>(0,l._)("div",{class:"flex-break"},null,-1))),v={class:"styled_input styled_links_box"},x={class:"styled_links_display"},g={key:0,class:"placeholder"},b={key:1,class:"styled_line_links"},D=["onClick"],C=i((()=>(0,l._)("hr",{class:"styled_links_separator"},null,-1))),z={class:"styled_links_add"},U=["disabled"],$={class:"overlay_contents_text"},L={class:"checkboxes"},V=["id","value"],q=["for"],A=["for"],j={class:"bottom_actions"},O=i((()=>(0,l._)("div",{class:"flex_spacer"},null,-1))),R=["disabled"];function K(e,t,s,i,K,T){return(0,l.wg)(),(0,l.iD)("div",o,[(0,l._)("header",d,[(0,l._)("h2",_,[(0,l._)("span",null,"Add a"+(0,a.zw)(T.is_vowel(T.type_full[0])?"n":"")+" ",1),(0,l.wy)((0,l._)("select",{title:"Task type","onUpdate:modelValue":t[0]||(t[0]=e=>K.task.type=e),class:"type_dropdown styled_input styled_select",ref:"type"},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Object.entries(K.types),(e=>((0,l.wg)(),(0,l.iD)("option",{class:"type_dropdown__option styled_select__option",value:e[0],key:e[0]},(0,a.zw)(e[1]),9,c)))),128))],512),[[n.bM,K.task.type]])])]),(0,l._)("div",k,[(0,l._)("div",r,[T.is_note?((0,l.wg)(),(0,l.iD)("span",p,"Add a new "+(0,a.zw)(K.task.type)+" to",1)):((0,l.wg)(),(0,l.iD)("span",h,"Schedule a new "+(0,a.zw)(K.task.type)+" for",1)),(0,l.Uk)(" your class"+(0,a.zw)(T.classes&&1==T.classes.length?"":"es"),1)]),(0,l._)("div",u,[T.is_note?(0,l.kq)("",!0):(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:0,"onUpdate:modelValue":t[1]||(t[1]=e=>K.task.name=e),class:"styled_input",type:"text",placeholder:T.type_full+" Name",disabled:T.is_note},null,8,y)),[[n.nr,K.task.name]]),(0,l.wy)((0,l._)("input",{type:"date",class:"styled_input input_task__date","onUpdate:modelValue":t[2]||(t[2]=e=>K.task.date=e),style:(0,a.j5)({maxWidth:T.is_note?"100%":null})},null,4),[[n.nr,K.task.date]]),w,(0,l.wy)((0,l._)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>K.task.description=e),class:"styled_input styled_textarea task_description",type:"text",placeholder:T.type_full+(T.is_note?" Contents":" Description (Optional)")},"\r\n        ",8,m),[[n.nr,K.task.description]]),f,(0,l._)("div",v,[(0,l._)("div",x,[K.task.links&&K.task.links.length?((0,l.wg)(),(0,l.iD)("div",b,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(K.task.links,(e=>((0,l.wg)(),(0,l.iD)("a",{class:"styled_line_links__link styled_line_links__remove",target:"_blank",key:e.path,onClick:t=>T.remove_link(e)},(0,a.zw)(e.text),9,D)))),128))])):((0,l.wg)(),(0,l.iD)("span",g,(0,a.zw)(T.type_full)+" Links (Optional)",1))]),C,(0,l._)("div",z,[(0,l.wy)((0,l._)("input",{class:"styled_links_add__path",type:"url","onUpdate:modelValue":t[4]||(t[4]=e=>K.newlink.path=e),onBlur:t[5]||(t[5]=(...e)=>T.fix_newlink_path&&T.fix_newlink_path(...e)),placeholder:"Link URL (http://example.com)"},null,544),[[n.nr,K.newlink.path]]),(0,l.wy)((0,l._)("input",{class:"styled_links_add__text",type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>K.newlink.text=e),placeholder:"Link Text (what students see)"},null,512),[[n.nr,K.newlink.text]]),(0,l._)("button",{class:"styled_links_add__action",onClick:t[7]||(t[7]=(...e)=>T.add_newlink&&T.add_newlink(...e)),disabled:T.newlink_not_ready}," Add ",8,U)])])]),(0,l._)("div",$," Choose which classes this "+(0,a.zw)(K.task.type)+" will be added to ",1),(0,l._)("div",L,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(T.classes,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"checkbox",key:e.id},[(0,l.wy)((0,l._)("input",{type:"checkbox",id:e.id,value:e.id,"onUpdate:modelValue":t[8]||(t[8]=e=>K.task_classes=e)},null,8,V),[[n.e8,K.task_classes]]),e.period?((0,l.wg)(),(0,l.iD)("label",{key:0,class:"button_pointer_text class_name",for:e.id,style:(0,a.j5)({"--color-class":e.color,"--color-class-alt":e.color+"2d"})}," P"+(0,a.zw)(e.period)+" - "+(0,a.zw)(e.name),13,q)):((0,l.wg)(),(0,l.iD)("label",{key:1,for:e.id},(0,a.zw)(e.name),9,A))])))),128))])],512),(0,l._)("div",j,[(0,l._)("button",{class:"close_action",onClick:t[9]||(t[9]=t=>e.$emit("close"))},"Close"),O,(0,l._)("button",{class:(0,a.C_)(["continue_action",{loading_bg:K.loading}]),onClick:t[10]||(t[10]=(...e)=>T.create_task&&T.create_task(...e)),disabled:!K.task.name&&!T.is_note||!K.task.date||!K.task_classes.length||T.is_note&&!K.task.description}," Add "+(0,a.zw)(K.task.type),11,R)])])}s(7658);var T=s(8980),H=s(2745),P=s(1708),Y=s(9529),E=s.n(Y),N={name:"CreateTaskView",emits:["close"],mixins:[E()],mounted(){this.$smoothReflow({el:this.$refs.contents})},data(){return{task:{name:"",date:this.$route.query?.date?this.$route.query.date:"",description:"",type:this.$route.params.tasktype?this.$route.params.tasktype:"task"},task_classes:this.$route.query?.class?[this.$route.query.class]:[],newlink:{text:"",path:""},loading:!1,types:{note:"Note",task:"Assignment",test:"Test",project:"Project",quiz:"Quiz",exam:"Exam"}}},computed:{type_full(){return this.get_type(this.task.type)},newlink_not_ready(){if(!this.newlink.path||!this.newlink.text)return!0;try{return new URL(this.newlink.path),!1}catch(e){return!0}},class_name(){if(!this.classes)return null;let e=this.classes.find((e=>e.id===this.class_id));return e?e.name:null},store(){return(0,T.h)()},classes(){return this.store.classes},is_note(){return"note"===this.task.type}},methods:{get_type(e=this.task.type){return this.types[e]||e},is_vowel(e){return["a","e","i","o","u"].includes(e.toLowerCase())},add_newlink(){this.task.links||(this.task.links=[]),this.newlink.path=new URL(this.newlink.path).href,this.task.links.push(this.newlink),this.newlink={text:"",path:""}},create_task(){this.newlink_not_ready?(this.loading=!0,this.store.create_task(this.task,this.task_classes).then((()=>{this.$emit("close")})).catch((e=>{this.loading=!1,(0,H.E)(`📃 Couldn't create ${this.task.type||"task"}:`,e),new P.PK("Couldn't create task",e,2e3)}))):new P.OO("Don't forget to to click the 'Add' button to add your link!",2e3)},remove_link(e){this.task.links=this.task.links.filter((t=>t.path!==e.path)),this.newlink=e},fix_newlink_path(){if(this.newlink.path&&this.newlink.path.includes("."))try{this.newlink.path=new URL(this.newlink.path).href}catch(e){this.newlink.path="https://"+this.newlink.path,this.fix_newlink_path()}}}},B=s(89);const I=(0,B.Z)(N,[["render",K],["__scopeId","data-v-3ec35e7c"]]);var M=I}}]);
//# sourceMappingURL=838.9ed3e2f5.js.map