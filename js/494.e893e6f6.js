"use strict";(self["webpackChunkmvtime"]=self["webpackChunkmvtime"]||[]).push([[494],{4494:function(e,t,s){s.r(t),s.d(t,{default:function(){return Q}});s(7658);var a=s(3396),l=s(7139);const i=e=>((0,a.dD)("data-v-c3bb8354"),e=e(),(0,a.Cn)(),e),n={class:"viewtask"},r={class:"modal_header",ref:"title"},o={class:"header_style modal_header_title"},_={ref:"contents",class:"overlay_contents"},c={key:0,ref:"text_contents"},d={class:"spaced_contents"},k={class:"styled_obj"},p=i((()=>(0,a._)("span",{class:"styled_line__label"},"Class:",-1))),h=i((()=>(0,a._)("span",{class:"styled_line__separator"},null,-1))),u={class:"styled_line__value"},y=["href"],m={key:0,class:"styled_obj"},v=i((()=>(0,a._)("span",{class:"styled_line__label"},"Name:",-1))),f=i((()=>(0,a._)("span",{class:"styled_line__separator"},null,-1))),w={class:"styled_line__value"},g={class:"styled_obj"},b=i((()=>(0,a._)("span",{class:"styled_line__label"},"Date:",-1))),D=i((()=>(0,a._)("span",{class:"styled_line__separator"},null,-1))),O={class:"styled_line__value"},$={key:1,class:"styled_obj"},C={class:"styled_line__label"},x=i((()=>(0,a._)("span",{class:"styled_line__separator"},null,-1))),j=["innerHTML"],T={key:2,class:"styled_obj links_obj"},z=i((()=>(0,a._)("span",{class:"styled_line__label"},"Links:",-1))),N=i((()=>(0,a._)("span",{class:"styled_line__separator"},null,-1))),L={class:"styled_line__value styled_line_links"},I=["href"],q=i((()=>(0,a._)("div",{class:"overlay_contents_text"}," Information is provided by teachers and volunteer students, and may not always be correct ",-1))),E={key:1,ref:"loading_contents",alt:"Loading Icon",class:"loading_icon"},H={class:"bottom_actions"},R=i((()=>(0,a._)("div",{class:"flex_spacer"},null,-1))),S=["disabled"];function M(e,t,s,i,M,V){return(0,a.wg)(),(0,a.iD)("main",n,[(0,a._)("header",r,[(0,a._)("h2",o," View "+(0,l.zw)(M.task&&M.task.type?M.task.type:"task")+" details ",1)],512),(0,a._)("div",_,[M.ready?((0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("div",d,[(0,a._)("div",k,[p,h,(0,a._)("span",u,[(0,a._)("a",{class:"class_name button_pointer_text",href:`/view/${M.task._class.ref}`,onClick:t[0]||(t[0]=t=>{t.preventDefault(),e.$router.push("/portal"+t.target.getAttribute("href"))}),style:(0,l.j5)({"--color-class":M.task._class.color,"--color-class-alt":M.task._class.color+"2d"})},(0,l.zw)(M.task.group||M.task.class_name),13,y)])]),"note"!=M.task.type?((0,a.wg)(),(0,a.iD)("div",m,[v,f,(0,a._)("span",w,(0,l.zw)(M.task.name),1)])):(0,a.kq)("",!0),(0,a._)("div",g,[b,D,(0,a._)("span",O,(0,l.zw)(V.date),1)]),M.task.description||"note"==M.task.type?((0,a.wg)(),(0,a.iD)("div",$,[(0,a._)("span",C,(0,l.zw)("note"==M.task.type?"Contents":"Description")+":",1),x,(0,a._)("span",{class:"styled_line__value md md_contents",innerHTML:M.task.description?V.text:"Not Provided"},null,8,j)])):(0,a.kq)("",!0),M.task.links?((0,a.wg)(),(0,a.iD)("div",T,[z,N,(0,a._)("span",L,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(M.task.links,(e=>((0,a.wg)(),(0,a.iD)("a",{class:"styled_line_links__link",target:"_blank",key:e.path,href:e.path},(0,l.zw)(e.text),9,I)))),128))])])):(0,a.kq)("",!0)]),q],512)):((0,a.wg)(),(0,a.iD)("img",E,null,512))],512),(0,a._)("div",H,[(0,a._)("button",{class:"continue_action",onClick:t[1]||(t[1]=t=>e.$emit("close"))},"Close"),R,V.store.is_teacher&&V.store.user&&M.task&&M.task.ref.split("/")[0]==V.store.active_doc.email.replace(V.store.ORG_DOMAIN,"")?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"edit_action primary_styled",onClick:t[2]||(t[2]=(...e)=>V.edit_task&&V.edit_task(...e))}," Edit ")):(0,a.kq)("",!0),(0,a._)("button",{class:"share_action",onClick:t[3]||(t[3]=(...e)=>V.share_task&&V.share_task(...e)),disabled:!M.ready},"Share",8,S)])])}var V=s(1708),A=s(2745),K=s(8980),P=s(9529),F=s.n(P),G=s(4478),U=s.n(G);let Y=new(U().Converter);var Z={name:"ViewTaskView",emits:["close"],mixins:[F()],data(){return{task:null,ready:!1}},computed:{store(){return(0,K.h)()},date(){let e=new Date(this.task?.date);if(!isNaN(e.getTime()))return e=new Date(e.getTime()+60*e.getTimezoneOffset()*1e3),new Date(e).toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"})},text(){return this.task.description&&Y.makeHtml(this.task.description)||this.task.description}},mounted(){this.$smoothReflow({el:this.$refs.contents,hideOverflow:!0,childTransitions:!0}),this.$smoothReflow({el:this.$refs.title,hideOverflow:!0}),this.get_task()},methods:{async share_task(){let e=new URL("https://view.mvtt.app/"+this.$route.params.ref);navigator.share?navigator.share({title:this.task.name,text:this.task.description,url:e.href}).then((()=>new V.bF("Opened share dialog",1e3))).catch((e=>A.i.log("Error sharing",e))):navigator.clipboard?(navigator.clipboard.writeText(e.href),new V.OO("Sharing not supported, copied link to clipboard",2e3)):new V.OO("Sharing and copying not supported, sorry",2e3)},edit_task(){this.$router.push({name:"edit",params:{ref:this.$route?.params?.ref}})},async get_task(){if(!this.$route.params.ref)return new V.OO("No task specified",1500),void this.$emit("close");const e=this.$route.params.ref.split("~").join("/");return e?3!=e.split("/").length?(new V.OO("Invalid task specified",1500),void this.$emit("close")):void this.store.task_from_ref(e).then((e=>{e?(this.task=e,this.ready=!0):(new V.OO("Couldn't find that task",2e3),this.$emit("close"))})).catch((e=>{new V.PK("Error getting task",e,1500),A.i.error("âš  Error getting task",e),this.$emit("close")})):(new V.OO("No task specified",1500),void this.$emit("close"))}}},B=s(89);const J=(0,B.Z)(Z,[["render",M],["__scopeId","data-v-c3bb8354"]]);var Q=J}}]);
//# sourceMappingURL=494.e893e6f6.js.map