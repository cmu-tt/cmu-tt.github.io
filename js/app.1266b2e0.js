(function(){var e={2745:function(e,t,a){"use strict";function o(e){try{const t=e.match(/^([\P{L}\p{Extended_Pictographic}]|(?:[\uD800-\uDBFF][\uDC00-\uDFFF]))/u);return t?t[0]:null}catch(t){return null}}function r(){if(0==arguments.length)return;let e=Array.from(arguments),t=["%cMVTT","background:#272727;color:#C9B092;padding:7px 12px;font-family:Lato,sans-serif;font-weight:bold;font-size:1.3em"];null!=o(e[0])&&(t[0]+=" %c"+o(e[0]),t[2]="background:#C9B092aa;background:#ffffffaa;color:#272727;padding:3px 5px;margin-left:5px;border-radius:5px;font-family:monospace !important;font-weight:bold;font-size:1.25em",e[0]=e[0].substring(2).trimStart());try{console[this](...t,...e)}catch(a){console.log("⚠ Couldn't override console.log",a),console.log(...t,...e)}}a.d(t,{HU:function(){return s},i2:function(){return n}});let i="info";const n={print:r.bind(i),log:r.bind("log"),info:r.bind("info"),debug:r.bind("debug"),warn:r.bind("warn"),error:r.bind("error"),_getTone:()=>i,_setTone:e=>{i=e},_resetTone:()=>{i="info"}};r.bind("info");try{window._status=n,n.log("🔧 Initialized logger")}catch(d){n.log("⚠ Couldn't set window._status",d)}function s(e){return"string"!=typeof e?e:new Date(e.replace(/-/g,"/"))}},2151:function(e,t,a){"use strict";a(7658);var o=a(9242),r=a(3396),i=a(1020);const n=e=>((0,r.dD)("data-v-9bbeb3da"),e=e(),(0,r.Cn)(),e),s=["_theme"],d={class:"pause_modal router_center_view",ref:"pause_modal"},l=n((()=>(0,r._)("header",{class:"modal_header"},[(0,r._)("h2",{class:"header_style modal_header_title"},"Session paused")],-1))),c={ref:"pause_contents",class:"overlay_contents"},u=n((()=>(0,r._)("div",{class:"overlay_contents_text"}," Your session was inactive for an extended period of time and has been paused to conserve resources. ",-1))),m=n((()=>(0,r._)("br",null,null,-1))),h=n((()=>(0,r._)("div",{class:"overlay_contents_text"}," You can hide this message using the toggle in your account preferences. ",-1))),p=n((()=>(0,r._)("br",null,null,-1))),_=n((()=>(0,r._)("div",{class:"overlay_contents_text"},"Please click anywhere to resume using MVTT.",-1))),f=[u,m,h,p,_];function g(e,t,a,o,i,n){const u=(0,r.up)("router-view"),m=(0,r.up)("OverlayWrapper"),h=(0,r.up)("LogoutModal");return(0,r.wg)(),(0,r.iD)("main",{id:"themed_body",class:"parent",ref:"app",_theme:n.theme,onClick:t[1]||(t[1]=(...e)=>n.refreshTimeout&&n.refreshTimeout(...e)),onKeydown:t[2]||(t[2]=(...e)=>n.refreshTimeout&&n.refreshTimeout(...e)),onFocus:t[3]||(t[3]=(...e)=>n.refreshTimeout&&n.refreshTimeout(...e))},[(0,r.Wm)(u),n.do_timeout&&(n.store.paused||i.animating)?((0,r.wg)(),(0,r.j4)(m,{key:0,ref:"overlay"},{default:(0,r.w5)((()=>[(0,r._)("main",d,[l,(0,r._)("div",c,f,512)],512)])),_:1},512)):(0,r.kq)("",!0),n.store.logout_prompt?((0,r.wg)(),(0,r.j4)(m,{key:1,ref:"logout_modal",onClose:t[0]||(t[0]=e=>n.store.logout_prompt=!1)},{default:(0,r.w5)((e=>[(0,r.Wm)(h,{class:"router_center_view",onClose:e.close},null,8,["onClose"])])),_:1},512)):(0,r.kq)("",!0)],40,s)}var v=a(3917);function w(e,t,a,o,i,n){const s=(0,r.up)("Modal");return(0,r.wg)(),(0,r.j4)(s,{class:"logout_modal",can_continue:!0,title:"Log Out",html:i.html,continue_action:n.logout,skippable:!0,onSkip:t[0]||(t[0]=t=>e.$emit("close")),skip_text:"Cancel",submit_text:"Confirm"},null,8,["html","continue_action"])}var b=a(8980),k=a(6763),y={name:"LogoutModal",emits:["close"],components:{Modal:k.Z},data(){return{html:'<div class="overlay_contents_text">Are you sure you want to log out?<br><br>You may lose access to what you were working on, and unsaved changes may be discarded.</div>'}},methods:{logout(){(0,b.h)().logout(),this.$emit("close")}},mounted(){setTimeout((()=>{this.$emit("close")}),1e4)}},T=a(89);const P=(0,T.Z)(y,[["render",w]]);var C=P,O=a(7387),A=a.n(O),j=a(2745),S={name:"App",components:{OverlayWrapper:v.Z,LogoutModal:C},data(){return{platform:"",isElectron:!1,animating:!1}},computed:{do_timeout(){return!this.store?.account_doc?.prefs?.hide_timeout},pageTitle(){return document.title},store(){return(0,b.h)()},theme(){return this.store.get_theme}},mounted(){this.isElectron=navigator.userAgent.toLowerCase().indexOf(" electron/")>-1,this.isElectron&&(this.platform=this.$route.query.platform,!this.platform&&window.location.search&&(this.platform=window.location.search.split("=")[1]),console.log("Electron Platform: "+this.platform)),this.set_theme(),this.store.paused=!1,this.store.logout_prompt=!1,window.addEventListener("focus",this.refreshTimeout),this.$refs.app.addEventListener("click",(e=>{if(e.target.href){e.target.href.includes("://")&&!e.target.href.startsWith("/")||(e.target.href=new URL(e.target.href,window.location.href).href);let t=new URL(e.target.href);if("mvtt.app"==t?.hostname||t?.hostname==window?.location?.hostname)return;e.preventDefault(),j.i2.log(`🔗 Opening outlink in a new tab | "${t.href}"`),window.open("/to/"+encodeURIComponent(t.href),"_blank")}}))},created(){const e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",t=window.localStorage.getItem("theme");this.isDarkMode="dark"===t||null===t&&"dark"===e},methods:{refreshTimeout(){this.store&&this.store.refresh_timeout()},set_theme(){"light"==this.theme?(A()("meta.theme-color").attr("media",""),A()("meta.theme-color-dark").attr("media","false")):(A()("meta.theme-color-dark").attr("media",""),A()("meta.theme-color").attr("media","false"))}},watch:{"store.paused":function(e,t){this.do_timeout&&(e?this.$nextTick((()=>{this.$refs.pause_modal.focus()})):t&&this.$refs.overlay&&(this.animating=!0,this.$refs.overlay.close(),setTimeout((()=>{this.animating=!1}),250)))},theme(){this.set_theme()}}};const q=(0,T.Z)(S,[["render",g],["__scopeId","data-v-9bbeb3da"]]);var $=q,x=a(262),N=a(1708),D=a(5431);(0,D.z)("/service-worker.js",{ready(){j.i2.log("🛠 App is being served from cache by a service worker. For more details, visit https://goo.gl/AFskqB")},registered(){j.i2.log("🛠 Service worker has been registered.")},cached(){j.i2.log("🛠 Content has been cached for offline use.")},updatefound(){j.i2.log("🛠 New content is downloading.")},updated(){j.i2.log("🛠 New content is available; please refresh."),window.localStorage.clear(),window.location.reload(!0)},offline(){j.i2.log("🛠 No internet connection found. App is running in offline mode.")},error(e){j.i2.error("🛑 Error during service worker registration:",e)}});var M=a(6112);const U=(0,i.WB)(),I=(0,o.ri)($);I.use(x.Z),I.use(U),I.use(M.Z,{preLoad:2,attempt:1}),I.mount("#app"),(0,r.YP)(U.state,(e=>{window.localStorage.setItem("MVTT_app_state",JSON.stringify(e.main))}),{deep:!0}),window.addEventListener("storage",(e=>{"MVTT_teacher_mode"===e.key&&(j.i2.log("🏫 Detected teacher mode change, reloading"),window.location.reload())})),A()(document.body).on("click",".auth-action",(function(){const e=(0,b.h)();!e.user&&A()(this).hasClass("can-login")?e.login():A()(this).hasClass("can-logout")&&(A()(this).hasClass("doprompt")?e.logout_prompt=!0:e.logout())})),A()(document.body).on("click",".gohome",(function(){x.Z.push("/")})),x.Z.afterEach((e=>{e.meta&&e.meta.page_title?document.title="MV Test Tracker | "+e.meta.page_title:document.title="MV Test Tracker";let t=e.meta?.theme_color?.light||"#f5c14b",a=e.meta?.theme_color?.dark||"#f5c14b";A()("meta.theme-color").attr("content",t),A()("meta.theme-color-dark").attr("content",a),(0,N.hC)();const o=document.documentElement.style;o.setProperty("--theme-color",t),o.setProperty("--theme-color-dark",a);let r=e.meta?.theme_color?.text_light||"#000000",i=e.meta?.theme_color?.text_dark||"#ffffff";o.setProperty("--theme-color-text",r),o.setProperty("--theme-color-text-dark",i),o.setProperty("--theme-color-hover",r+"33"),o.setProperty("--theme-color-hover-dark",i+"33")})),window.toast=N.gy,window.$=A(),x.Z.beforeEach((e=>{const t=(0,b.h)();return e.meta&&e.meta.requiresAuth&&t&&!t.user?(new N.FN("Please log in or join to access this page","default",1500,a(1121)),{path:"/",query:{redirect:e.fullPath}}):e.meta&&e.meta.requiresTeacher&&t.user&&!t.is_teacher?(new N.FN("You must be a teacher to access this page","default",1500,a(1121)),{name:"portal"}):void 0}))},262:function(e,t,a){"use strict";a.d(t,{Z:function(){return H}});var o=a(2483),r=a(3396);const i={class:"apphome hidescroll scrolloverflow"},n={class:"base fullheightcontent"};function s(e,t,a,o,s,d){const l=(0,r.up)("BaseNav"),c=(0,r.up)("router-view"),u=(0,r.up)("BaseFooter");return(0,r.wg)(),(0,r.iD)("main",i,[(0,r._)("main",n,[(0,r.Wm)(l),(0,r.Wm)(c,{class:"inner-base"})]),(0,r.Wm)(u)])}var d=a(7139);const l=e=>((0,r.dD)("data-v-254f2d7d"),e=e(),(0,r.Cn)(),e),c=l((()=>(0,r._)("h1",{class:"gohome hideoverflow"},"MV Test Tracker",-1))),u=["_theme"],m=l((()=>(0,r._)("div",{class:"theme_icon"},null,-1))),h=l((()=>(0,r._)("div",{class:"toggle_text"},"Switch Theme",-1))),p=[m,h],_=l((()=>(0,r._)("span",{class:"flex_spacer"},null,-1))),f={class:"base-pages-nav"},g=l((()=>(0,r._)("span",{class:"flex_spacer"},null,-1)));function v(e,t,a,o,i,n){const s=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("header",null,[c,(0,r._)("button",{_theme:n.store.get_theme,class:"theme_button",title:"Switch Theme",onClick:t[0]||(t[0]=(...e)=>n.store.toggle_theme&&n.store.toggle_theme(...e))},p,8,u),_,i.mobile&&!i.mobile_menu_open?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"nav-mobile-btn",onClick:t[1]||(t[1]=e=>i.mobile_menu_open=!i.mobile_menu_open)})):(0,r.kq)("",!0),!i.mobile||i.mobile_menu_open?((0,r.wg)(),(0,r.iD)("div",{key:1,class:(0,d.C_)(["nav-actions",{mobile:i.mobile}])},[i.mobile?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"nav-mobile-btn alt-btn",onClick:t[2]||(t[2]=e=>i.mobile_menu_open=!i.mobile_menu_open)})):(0,r.kq)("",!0),(0,r._)("nav",f,[(0,r.Wm)(s,{class:"click-action-inline",to:"/",onClick:n.closeMenu},{default:(0,r.w5)((()=>[(0,r.Uk)("Home")])),_:1},8,["onClick"]),(0,r.Wm)(s,{class:"click-action-inline",to:"/about",onClick:n.closeMenu},{default:(0,r.w5)((()=>[(0,r.Uk)("About")])),_:1},8,["onClick"]),(0,r.Wm)(s,{class:"click-action-inline",to:"/contact",onClick:n.closeMenu},{default:(0,r.w5)((()=>[(0,r.Uk)("Contact")])),_:1},8,["onClick"])]),g,(0,r._)("button",{id:"nav-auth-btn",class:(0,d.C_)(["small-action-btn auth-action can-logout can-login click-action",{linked:n.store.personal_account&&n.store.user}])}," Log "+(0,d.zw)(n.logged_in?"Out":"In"),3)],2)):(0,r.kq)("",!0)])}var w=a(8980),b={name:"BaseNav",data(){return{mobile_menu_open:!1,mobile:window.innerWidth<=800}},methods:{resize(){this.mobile=window.innerWidth<=800,this.mobile||this.closeMenu()},closeMenu(){this.mobile_menu_open=!1}},mounted(){window.addEventListener("resize",this.resize)},unmounted(){window.removeEventListener("resize",this.resize)},computed:{store(){return(0,w.h)()},logged_in(){return!!this.store.user}}},k=a(89);const y=(0,k.Z)(b,[["render",v],["__scopeId","data-v-254f2d7d"]]);var T=y;const P=e=>((0,r.dD)("data-v-94e483ee"),e=e(),(0,r.Cn)(),e),C=P((()=>(0,r._)("p",null,[(0,r._)("span",null,"© 2022-2023 MVHS Test Tracker. "),(0,r._)("span",null,[(0,r.Uk)("Website by "),(0,r._)("a",{href:"https://svonk.me/"},"Sander Vonk")])],-1))),O=[C];function A(e,t,a,o,i,n){return(0,r.wg)(),(0,r.iD)("footer",null,O)}var j={name:"BaseFooter"};const S=(0,k.Z)(j,[["render",A],["__scopeId","data-v-94e483ee"]]);var q=S,$={name:"AppHome",components:{BaseNav:T,BaseFooter:q}};const x=(0,k.Z)($,[["render",s]]);var N=x;const D=e=>((0,r.dD)("data-v-f34b6ee6"),e=e(),(0,r.Cn)(),e),M={class:"not-found"},U=D((()=>(0,r._)("h1",{class:"title_text err_text"},"404",-1))),I=D((()=>(0,r._)("h2",{class:"header_style err_text hideoverflow"},"Page Not Found",-1))),L=D((()=>(0,r._)("hr",{class:"err-break"},null,-1))),E=D((()=>(0,r._)("span",null," | ",-1))),R={key:1,class:"nostyle"},F=D((()=>(0,r._)("span",null," | ",-1))),J=D((()=>(0,r._)("div",{class:"err-pad-bottom"},null,-1)));function Z(e,t,a,o,i,n){const s=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",M,[U,I,L,(0,r._)("nav",null,[(0,r.Wm)(s,{class:"router-link click-action-inline",to:"/"},{default:(0,r.w5)((()=>[(0,r.Uk)("Home")])),_:1}),E,n.logged_in?((0,r.wg)(),(0,r.j4)(s,{key:0,class:"router-link click-action-inline",to:"/portal"},{default:(0,r.w5)((()=>[(0,r.Uk)("Portal")])),_:1})):((0,r.wg)(),(0,r.iD)("span",R,[(0,r.Wm)(s,{class:"router-link click-action-inline",to:"/about"},{default:(0,r.w5)((()=>[(0,r.Uk)("About")])),_:1}),F,(0,r.Wm)(s,{class:"router-link click-action-inline",to:"/contact"},{default:(0,r.w5)((()=>[(0,r.Uk)("Contact")])),_:1})]))]),J])}var V={name:"NotFound",computed:{store(){return(0,w.h)()},logged_in(){return this.store.user}}};const G=(0,k.Z)(V,[["render",Z],["__scopeId","data-v-f34b6ee6"]]);var W=G;const B=(0,o.p7)({history:(0,o.PO)("/"),routes:[{path:"/",name:"home",component:N,meta:{page_title:"Home",theme_color:{light:"#ffffff",dark:"#16130e"},requiresAuth:!1},children:[{path:"",name:"home",component:()=>a.e(619).then(a.bind(a,9619)),meta:{page_title:"Home",theme_color:{light:"#ffffff",dark:"#16130e"},requiresAuth:!1},children:[{path:"/view/:ref([^~]+~[^~]+~[^~]+)",name:"publicviewtask",component:()=>Promise.all([a.e(993),a.e(694)]).then(a.bind(a,1287)),meta:{page_title:"View Task",theme_color:{light:"#bfbfbf",dark:"#0d0d0d"},requiresAuth:!1}},{path:"/view/:ref([^~]+~[^~]+)",name:"publicviewclass",component:()=>Promise.all([a.e(993),a.e(274)]).then(a.bind(a,4274)),meta:{page_title:"View Class",theme_color:{light:"#bfbfbf",dark:"#0d0d0d"},requiresAuth:!1}},{path:"to/:path?",name:"redirect",component:()=>a.e(166).then(a.bind(a,8166)),meta:{page_title:"Confirm Redirect",theme_color:{light:"#bfbfbf",dark:"#0d0d0d"},requiresAuth:!1}},{path:"join",name:"join",component:()=>a.e(670).then(a.bind(a,670)),meta:{page_title:"Join the MVTT Beta",theme_color:{light:"#bfbfbf",dark:"#0d0d0d"},requiresAuth:!1,close_path:"/",blockStandardRedirect:!0}},{path:"link/:code?",name:"link",component:()=>a.e(620).then(a.bind(a,5620)),props:!0,meta:{page_title:"Link Personal Account",theme_color:{light:"#bfbfbf",dark:"#0d0d0d"},close_path:"/",blockStandardRedirect:!0}}]},{path:"about",name:"about",component:()=>a.e(371).then(a.bind(a,7371)),meta:{page_title:"About",theme_color:{light:"#ffffff",dark:"#16130e"},requiresAuth:!1}},{path:"legal/privacy",name:"privacy",component:()=>a.e(524).then(a.bind(a,9524)),meta:{page_title:"Legal - Privacy Policy",theme_color:{light:"#ffffff",dark:"#16130e"},requiresAuth:!1}},{path:"legal/tos",name:"tos",component:()=>a.e(12).then(a.bind(a,6012)),meta:{page_title:"Legal - Terms of Service",theme_color:{light:"#ffffff",dark:"#16130e"},requiresAuth:!1}},{path:"download",name:"download",component:()=>a.e(564).then(a.bind(a,2564)),meta:{page_title:"Download [BETA]",theme_color:{light:"#ffffff",dark:"#16130e"},requiresAuth:!1}},{path:"roadmap",name:"roadmap",component:()=>a.e(165).then(a.bind(a,5165)),meta:{page_title:"Development Roadmap",theme_color:{light:"#ffffff",dark:"#16130e"},requiresAuth:!1}},{path:"contact",name:"contact",component:()=>a.e(481).then(a.bind(a,3245)),meta:{page_title:"Contact",theme_color:{light:"#ffffff",dark:"#16130e"},requiresAuth:!1}},{path:"/:pathMatch(.*)*",name:"404",component:W,meta:{page_title:"404",theme_color:{light:"#ffffff",dark:"#16130e"}}}]},{path:"/portal",name:"portal",component:()=>a.e(80).then(a.bind(a,8080)),meta:{page_title:"Portal",theme_color:{light:"#f2f2f2",dark:"#121212"},requiresAuth:!0},children:[{path:"/portal/study",name:"study",component:()=>a.e(80).then(a.bind(a,8080)),meta:{page_title:"Study Portal",theme_color:{light:"#f2f2f2",dark:"#121212"},requiresAuth:!0}},{path:"/portal/statistics",name:"stats",component:()=>a.e(2).then(a.bind(a,2002)),meta:{page_title:"View Statistics",theme_color:{light:"#b5b5b5",dark:"#0d0d0d"},requiresAuth:!0}},{path:"/portal/survey/daily",name:"daily",component:()=>a.e(90).then(a.bind(a,90)),meta:{page_title:"Daily Check-In",theme_color:{light:"#b5b5b5",dark:"#0d0d0d"},requiresAuth:!0,block_close:!0,blockStandardRedirect:!0,noSurvey:!0}},{path:"/portal/settings",name:"settings",component:()=>a.e(438).then(a.bind(a,5438)),meta:{page_title:"Settings",theme_color:{light:"#b5b5b5",dark:"#0d0d0d"},requiresAuth:!0,noSurvey:!0}},{path:"/portal/onboarding",name:"onboarding",component:()=>a.e(229).then(a.bind(a,7229)),meta:{page_title:"Onboarding",theme_color:{light:"#b5b5b5",dark:"#0d0d0d"},requiresAuth:!0,block_close:!0,noSurvey:!0}},{path:"/portal/add",name:"addclass",component:()=>a.e(130).then(a.bind(a,4130)),meta:{page_title:"Join a Class",theme_color:{light:"#b5b5b5",dark:"#0d0d0d"},requiresAuth:!0}},{path:"/portal/add/ref/:ref?",name:"refclass",component:()=>a.e(130).then(a.bind(a,4130)),meta:{page_title:"Join from Reference",theme_color:{light:"#b5b5b5",dark:"#0d0d0d"},requiresAuth:!0}},{path:"/portal/add/code/:code",name:"codeclass",component:()=>a.e(130).then(a.bind(a,4130)),meta:{page_title:"Join from Code",theme_color:{light:"#b5b5b5",dark:"#0d0d0d"},requiresAuth:!0}},{path:"/portal/add/code",name:"codeenterclass",component:()=>a.e(310).then(a.bind(a,2310)),meta:{page_title:"Enter Class Code",theme_color:{light:"#b5b5b5",dark:"#0d0d0d"},requiresAuth:!0}},{path:"/portal/create",name:"createclass",component:()=>a.e(478).then(a.bind(a,2478)),meta:{page_title:"Teacher | Create Class",theme_color:{light:"#b5b5b5",dark:"#0d0d0d"},requiresAuth:!0,requiresTeacher:!0}},{path:"/portal/new/:tasktype?",name:"newtask",component:()=>a.e(385).then(a.bind(a,7385)),meta:{page_title:"Teacher | Add Task",theme_color:{light:"#b5b5b5",dark:"#0d0d0d"},requiresAuth:!0,requiresTeacher:!0}},{path:"/portal/notes/:ref?",name:"notes",component:()=>a.e(118).then(a.bind(a,4118)),meta:{page_title:"Your Task Notes",theme_color:{light:"#b5b5b5",dark:"#0d0d0d"},requiresAuth:!0}},{path:"/portal/view/:ref?",name:"viewtask",component:()=>Promise.all([a.e(993),a.e(694)]).then(a.bind(a,1287)),meta:{page_title:"View Task",theme_color:{light:"#b5b5b5",dark:"#0d0d0d"},requiresAuth:!0}},{path:"/portal/view/:ref([^~]+~[^~]+)",name:"viewclass",component:()=>Promise.all([a.e(993),a.e(274)]).then(a.bind(a,4274)),meta:{page_title:"View Class",theme_color:{light:"#b5b5b5",dark:"#0d0d0d"},requiresAuth:!0}},{path:"/portal/edit/t/:ref?",name:"edit",component:()=>a.e(71).then(a.bind(a,7071)),meta:{page_title:"Edit Task",theme_color:{light:"#b5b5b5",dark:"#0d0d0d"},requiresAuth:!0,requiresTeacher:!0}},{path:"/portal/edit/c/:ref?",name:"editclass",component:()=>a.e(467).then(a.bind(a,6467)),meta:{page_title:"Edit Class",theme_color:{light:"#b5b5b5",dark:"#0d0d0d"},requiresAuth:!0,requiresTeacher:!0}},{path:"/portal/archive/:type?/:ref?",name:"archive",component:()=>a.e(947).then(a.bind(a,5080)),meta:{page_title:"Confirm Task Archive",theme_color:{light:"#b5b5b5",dark:"#0d0d0d"},requiresAuth:!0,requiresTeacher:!0}},{path:"/portal/leave/:ref?",name:"leave",component:()=>a.e(32).then(a.bind(a,8032)),meta:{page_title:"Confirm Class Leave",theme_color:{light:"#b5b5b5",dark:"#0d0d0d"},requiresAuth:!0}}]},{path:"/app",redirect:"/portal",meta:{requiresAuth:!0}},{path:"/study",redirect:"/portal/study",meta:{requiresAuth:!0}},{path:"/settings",redirect:"/portal/settings",meta:{requiresAuth:!0}},{path:"/survey/daily",redirect:"/portal/survey/daily",meta:{requiresAuth:!0}}],parseQuery:e=>a(5410).parse(e)});var H=B},8980:function(e,t,a){"use strict";a.d(t,{h:function(){return x}});a(7658);var o=a(1020),r=a(2745),i=a(1708),n=a(4287),s=a(8082),d=a.n(s),l=a(7795),c=a(6665),u=a(6781),m=a(262);const h={apiKey:"AIzaSyDGqqhApln4pxm4EynPCSkfwyK8aopjfCk",authDomain:"auth.mvtt.app",projectId:"mvtrack",storageBucket:"mvtrack.appspot.com",messagingSenderId:"1070634963357",appId:"1:1070634963357:web:2a4abc725fff24a5199f74",measurementId:"G-6LNX1KCR8E"},p=(0,l.ZF)(h),_=(0,c.v0)(p),f=(0,n.ad)(p);(0,u.IH)(p);let g;_.onAuthStateChanged((e=>{b(e)}));let v,w=!1;function b(e){const t=x();if(e){if(t.set_user(e),y(),!t.user)return;k(e.uid),v=P()}else t.clear()}function k(e){if(r.i2.log("⬥ Setting up snapshot"),!e)return void r.i2.warn("⚠ No uid provided to setupSnapshot");const t=x();t.hide_timeout(),g=(0,n.cf)((0,n.JU)(f,"users",e),{includeMetadataChanges:!0},(e=>{if(e.metadata.hasPendingWrites)return void r.i2.log("⬥ Snapshot from local changes");if(r.i2.log("⏷ Snapshot from remote"),!e.exists())return void t.create_doc();let a=e.data();t?.user?.uid==e.id?t.account_doc=a:t.linked_account_doc=a}),(e=>{r.i2.error("⚠ Couldn't get snapshot from remote",e)})),w=!0}function y(e){clearTimeout(v);let t=x();e&&t.show_timeout(),g&&(g(),r.i2.log("⬥ Unsubscribed from remote changes")),w=!1}function T(e){const t=Math.floor(e/1e3/60),a=Math.floor(e/1e3%60);return(t||!a?`${t} minute${1!=t?"s":""}`:"")+(a?`${a} second${1!=a?"s":""}`:"")}function P(e=3e5){return setTimeout((()=>{r.i2.log(`⬥ Page unused for ${T(e)}, removing onSnapshot listener`),y(!0)}),e)}function C(e){const t=x();t.hide_timeout(),w||(k(t.personal_account?t.account_doc?.linked_to:t.user.uid),m.Z.currentRoute.value&&m.Z.currentRoute.value.path.startsWith("/portal")&&(r.i2.log("⬥ Refreshing class data"),t.fetch_classes()),r.i2.log("⬥ Resubscribed to remote changes")),clearTimeout(v),v=P(e)}const O=new c.hJ,A=navigator?.userAgent?.toLowerCase()?.indexOf(" electron/")>-1,j="@mvla.net";function S(e){return e?.split("@")[1]==j.substring(1)}function q(){try{return window.self!==window.top}catch(e){return!0}}O.addScope("email"),O.addScope("profile"),_.useDeviceLanguage(),O.setCustomParameters({login_hint:"username"+j});let $=new Date;$=new Date($.getTime()-60*$.getTimezoneOffset()*1e3),$=$.toISOString().split("T")[0];const x=(0,o.Q_)({id:"main",state:()=>{let e={},t=window.localStorage.getItem("MVTT_app_state");if(t&&"undefined"!=t&&"null"!=t)try{return r.i2.log("↻ State from local storage"),e=JSON.parse(t),e.paused=!1,e.logout_prompt=!1,e}catch(a){r.i2.warn("⟳ Error parsing local storage state",a)}return r.i2.log("🔨 Setting up store from scratch"),{user:null,account_doc:null,linked_account_doc:null,classes:[],tasks:[],loaded_email:null,loaded_classes:null,teacher:{doc_ref:null,collection_ref:null},theme:null,personal_account:!1,paused:!1,logout_prompt:!1}},getters:{ORG_DOMAIN(){return j},linked_accounts(){return this.user&&this.active_doc&&this.active_doc.linked||[]},upcoming(){if(!this.tasks)return[];const e=Date.now(),t=288e5;return this.tasks.filter((a=>"note"!=a.type&&(a?.date?.getTime?a.date.getTime():0)>=e-t)).sort(((e,t)=>e.date<t.date?-1:e.date>t.date?1:0))},non_recent_signin(){if(!this.user)return!1;let e=this.user?.metadata?.lastSignInTime;if(!e)return!1;e=new Date(e);let t=(new Date).getTime()-e.getTime();return t>864e5},recently_joined(){if(!this.user)return!1;let e=this.user?.metadata?.creationTime;if(!e)return!1;e=new Date(e);let t=(new Date).getTime()-e.getTime();return t<432e5},is_teacher(){if(!this.user)return!1;if(1==this.active_doc?.teacher_mode||"true"==window?.localStorage?.MVTT_teacher_mode){if(1==this.active_doc?.teacher_mode||null==this.active_doc?.teacher_mode)return window.localStorage.setItem("MVTT_teacher_mode",!0),this.personal_account?(r.i2.log("🏫 No teacher mode for personal account"),!1):(r.i2.log("🏫 Local teacher mode"),!0);window.localStorage.setItem("MVTT_teacher_mode",!1),r.i2.log("🏫 Teacher mode disabled locally to reflect remote changes")}let e=this.user.email,[t,a]=e.split("@");return"@"+a==this.ORG_DOMAIN&&!/\d/.test(t)&&(r.i2.log("🏫 Teacher mode enabled for non-student district account"),!0)},done_daily_survey(){return!!this.active_doc&&(this.active_doc?.done_surveys&&this.active_doc.done_surveys?.includes($))},done_join_form(){return!!this.user&&!!this.active_doc?.join_form},account_ref(){return this.user?(0,n.JU)(f,"users",this.user.uid):null},linked_account_ref(){return this.user&&this.account_doc&&this.account_doc.linked_to?(0,n.JU)(f,"users",this.account_doc.linked_to):null},active_ref(){return this.personal_account?this.linked_account_ref:this.account_ref},active_doc(){return this.personal_account?this.linked_account_doc:this.account_doc},get_theme(){let e=this.theme||window.localStorage.getItem("theme"),t=this.active_doc?.prefs?.theme,a=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";if(t)return e!=t&&window.localStorage.setItem("theme",t),t||"light";if(e?a=e:window.localStorage.setItem("theme",a),this.active_doc){let e={...this.active_doc};e.prefs={...e.prefs,theme:a},this.set_active(e),this.update_remote()}return e||"light"},get_loaded_classes(){if(!this.loaded_classes||!this.loaded_classes.length)return[];let e=this.loaded_classes;return e.map((e=>(e.is_joined=this.active_doc?.classes?.includes([this.loaded_email,e?.id].join("/")),e)))},finished_tasks(){try{if(!this.active_doc)throw"No active doc";return this.active_doc.finished||[]}catch(e){r.i2.warn("🔗 Couldn't get finished tasks",e)}},notes(){try{if(!this.active_doc)throw"No active doc";return this.active_doc.notes||{}}catch(e){return r.i2.warn("🔗 Couldn't get notes",e),{}}}},actions:{get_surveys(e){const t=!1;if(t)return Promise.resolve(JSON.parse('[{"date":"2023-07-24","data":{"time":1690258809819,"responses":[{"time":{"start":1690258779871,"duration":13585},"data":null,"done":true},{"done":true,"time":{"duration":1928,"start":1690258793456},"data":{"sentiment":"neutral"}},{"time":{"duration":2703,"start":1690258795384},"data":{"sentiment":80},"done":true},{"time":{"start":1690258798087,"duration":9783},"data":{"input":"beep beep"},"done":true},{"time":{"start":1690258807870,"duration":1949},"data":{},"done":true}]}},{"date":"2023-07-25","data":{"time":1690316292802,"responses":[{"time":{"duration":1879,"start":1690316239121},"done":true,"data":null},{"data":{"sentiment":"neutral"},"done":true,"time":{"start":1690316241000,"duration":1435}},{"data":{"sentiment":60},"time":{"duration":27738,"start":1690316249927},"done":true},{"done":true,"time":{"start":1690316277665,"duration":714},"data":{}},{"data":{},"done":true,"time":{"duration":7067,"start":1690316285735}}]}},{"date":"2023-07-26","data":{"time":1690426468650,"responses":[{"done":true,"time":{"duration":2128,"start":1690426462121},"data":null},{"data":{"sentiment":"neutral"},"done":true,"time":{"duration":1136,"start":1690426464250}},{"time":{"duration":1196,"start":1690426465387},"data":{"sentiment":80},"done":true},{"data":{},"time":{"duration":963,"start":1690426466583},"done":true},{"data":{},"time":{"start":1690426467546,"duration":1104},"done":true}]}},{"date":"2023-07-27","data":{"responses":[{"done":true,"data":null,"time":{"start":1690519722532,"duration":1607}},{"done":true,"time":{"duration":1614,"start":1690519724140},"data":{"sentiment":"positive"}},{"done":true,"data":{"sentiment":80},"time":{"duration":1200,"start":1690519725754}},{"data":{},"time":{"start":1690519726954,"duration":608},"done":true},{"time":{"duration":567,"start":1690519727562},"data":{},"done":true}],"time":1690519728130}},{"date":"2023-07-28","data":{"responses":[{"time":{"start":1690575263111,"duration":2352},"done":true,"data":null},{"data":{"sentiment":"positive"},"done":true,"time":{"start":1690575265464,"duration":3722}},{"time":{"start":1690575276124,"duration":1500},"data":{"sentiment":40},"done":true},{"time":{"start":1690575277624,"duration":528},"data":{},"done":true},{"time":{"duration":841,"start":1690575278152},"data":{},"done":true}],"time":1690575278993}},{"date":"2023-07-31","data":{"responses":[{"data":null,"time":{"start":1690827076669,"duration":1813},"done":true},{"done":true,"data":{"sentiment":"neutral"},"time":{"duration":2657,"start":1690827078482}},{"time":{"duration":1386,"start":1690827081139},"data":{"sentiment":60},"done":true},{"time":{"duration":9086,"start":1690827082525},"data":{"input":"hopefully i dont have a million reads"},"done":true},{"time":{"start":1690827091611,"duration":1362},"done":true,"data":{}}],"time":1690827092973}},{"date":"2023-08-01","data":{"responses":[{"data":null,"done":true,"time":{"duration":1836,"start":1690922601888}},{"done":true,"time":{"start":1690922603724,"duration":1421},"data":{"sentiment":"neutral"}},{"done":true,"time":{"duration":1317,"start":1690922605145},"data":{"sentiment":80}},{"time":{"start":1690922606462,"duration":567},"done":true,"data":{}},{"done":true,"data":{},"time":{"duration":577,"start":1690922607029}}],"time":1690922607606}},{"date":"2023-08-02","data":{"responses":[{"time":{"start":1691037084023,"duration":1565},"done":true,"data":null},{"done":true,"time":{"start":1691037085588,"duration":3933},"data":{"sentiment":"positive"}},{"time":{"start":1691037089521,"duration":900},"data":{"sentiment":100},"done":true},{"time":{"start":1691037090422,"duration":826},"done":true,"data":{}},{"time":{"duration":624,"start":1691037091248},"done":true,"data":{}}],"time":1691037091872}},{"date":"2023-08-03","data":{"responses":[{"time":{"duration":2934,"start":1691113344775},"data":null,"done":true},{"done":true,"time":{"duration":1449,"start":1691113347709},"data":{"sentiment":"positive"}},{"done":true,"data":{"sentiment":80},"time":{"start":1691113349158,"duration":1061}},{"done":true,"data":{},"time":{"duration":547,"start":1691113350219}},{"time":{"duration":576,"start":1691113350766},"data":{},"done":true}],"time":1691113351342}},{"date":"2023-08-04","data":{"responses":[{"done":true,"data":null,"time":{"duration":1632,"start":1691189008546}},{"data":{"sentiment":"positive"},"done":true,"time":{"start":1691189010178,"duration":2062}},{"data":{"sentiment":80},"done":true,"time":{"start":1691189012240,"duration":1159}},{"done":true,"time":{"duration":869,"start":1691189013400},"data":{}},{"data":{},"done":true,"time":{"duration":896,"start":1691189014269}}],"time":1691189015166}},{"date":"2023-08-08","data":{"responses":[{"time":{"duration":1588,"start":1691525974812},"done":true,"data":null},{"done":true,"time":{"start":1691525976400,"duration":1574},"data":{"sentiment":"positive"}},{"done":true,"time":{"duration":1066,"start":1691525977974},"data":{"sentiment":80}},{"done":true,"time":{"duration":578,"start":1691525979040},"data":{}},{"time":{"duration":798,"start":1691525979618},"data":{},"done":true}],"time":1691525980416}},{"date":"2023-08-09","data":{"responses":[{"time":{"start":1691636237679,"duration":2573},"data":null,"done":true},{"time":{"start":1691636240252,"duration":1486},"data":{"sentiment":"positive"},"done":true},{"done":true,"data":{"sentiment":100},"time":{"duration":1399,"start":1691636241738}},{"time":{"start":1691636243137,"duration":644},"data":{},"done":true},{"done":true,"data":{},"time":{"duration":576,"start":1691636243781}}],"time":1691636244357}},{"date":"2023-08-09","data":{"responses":[{"time":{"start":1691636237679,"duration":2573},"data":null,"done":true},{"time":{"start":1691636240252,"duration":1486},"data":{"sentiment":"positive"},"done":true},{"done":true,"data":{"sentiment":100},"time":{"duration":1399,"start":1691636241738}},{"time":{"start":1691636243137,"duration":644},"data":{},"done":true},{"done":true,"data":{},"time":{"duration":576,"start":1691636243781}}],"time":1691636244357}},{"date":"2023-08-09","data":{"responses":[{"time":{"start":1691636237679,"duration":2573},"data":null,"done":true},{"time":{"start":1691636240252,"duration":1486},"data":{"sentiment":"positive"},"done":true},{"done":true,"data":{"sentiment":100},"time":{"duration":1399,"start":1691636241738}},{"time":{"start":1691636243137,"duration":644},"data":{},"done":true},{"done":true,"data":{},"time":{"duration":576,"start":1691636243781}}],"time":1691636244357}},{"date":"2023-08-10","data":{"time":1691704968399,"responses":[{"data":null,"done":true,"time":{"start":1691704959997,"duration":1921}},{"done":true,"data":{"sentiment":"positive"},"time":{"duration":1352,"start":1691704961918}},{"data":{"sentiment":40},"done":true,"time":{"duration":2995,"start":1691704963270}},{"data":{},"time":{"duration":771,"start":1691704966266},"done":true},{"time":{"duration":1360,"start":1691704967038},"done":true,"data":{}}]}},{"date":"2023-08-11","data":{"responses":[{"time":{"start":1691772298189,"duration":1182},"data":null,"done":true},{"data":{"sentiment":"positive"},"time":{"duration":1639,"start":1691772299372},"done":true},{"data":{"sentiment":40},"done":true,"time":{"duration":3075,"start":1691772301011}},{"data":{},"time":{"duration":661,"start":1691772304086},"done":true},{"time":{"duration":851,"start":1691772304747},"data":{},"done":true}],"time":1691772305599}},{"date":"2023-08-12","data":{"responses":[{"time":{"start":1691891937385,"duration":1971},"done":true,"data":null},{"data":{"sentiment":"positive"},"time":{"start":1691891939356,"duration":1102},"done":true},{"done":true,"time":{"duration":1396,"start":1691891940459},"data":{"sentiment":80}},{"data":{},"done":true,"time":{"duration":1011,"start":1691891941855}},{"done":true,"time":{"start":1691891942866,"duration":5009},"data":{}}],"time":1691891947876}},{"date":"2023-08-13","data":{"time":1691988421409,"responses":[{"done":true,"time":{"duration":4829,"start":1691988410494},"data":null},{"data":{"sentiment":"positive"},"done":true,"time":{"duration":2150,"start":1691988415323}},{"time":{"duration":1806,"start":1691988417473},"data":{"sentiment":40},"done":true},{"time":{"start":1691988419279,"duration":839},"data":{},"done":true},{"data":{},"time":{"start":1691988420118,"duration":1291},"done":true}]}},{"date":"2023-08-14","data":{"responses":[{"time":{"duration":2578,"start":1692039433423},"done":true,"data":null},{"time":{"start":1692039436001,"duration":2019},"done":true,"data":{"sentiment":"positive"}},{"data":{"sentiment":80},"time":{"start":1692039438020,"duration":1690},"done":true},{"data":{},"done":true,"time":{"duration":711,"start":1692039439710}},{"time":{"start":1692039440421,"duration":1124},"data":{},"done":true}],"time":1692039441545}},{"date":"2023-08-19","data":{"responses":[{"time":{"start":1692507498388,"duration":2741},"data":null,"done":true},{"time":{"start":1692507501129,"duration":2990},"done":true,"data":{"sentiment":"neutral"}},{"time":{"start":1692507504120,"duration":1968},"done":true,"data":{"sentiment":60}},{"time":{"start":1692507506088,"duration":761},"data":{},"done":true},{"time":{"duration":955,"start":1692507506849},"data":{},"done":true}],"time":1692507507805}},{"date":"2023-08-20","data":{"time":1692564930535,"responses":[{"done":true,"time":{"start":1692564917647,"duration":2897},"data":null},{"data":{"sentiment":"positive"},"time":{"start":1692564920546,"duration":2091},"done":true},{"done":true,"time":{"start":1692564922638,"duration":3451},"data":{"sentiment":40}},{"done":true,"data":{},"time":{"start":1692564926089,"duration":3768}},{"done":true,"time":{"start":1692564929857,"duration":677},"data":{}}]}},{"date":"2023-08-23","data":{"responses":[{"done":true,"data":null,"time":{"duration":2800,"start":1692805838008}},{"done":true,"data":{"sentiment":"positive"},"time":{"duration":2042,"start":1692805840808}},{"done":true,"data":{"sentiment":60},"time":{"duration":1527,"start":1692805842850}},{"time":{"start":1692805844377,"duration":1008},"data":{},"done":true},{"time":{"duration":1201,"start":1692805845385},"data":{},"done":true}],"time":1692805846586}},{"date":"2023-08-26","data":{"responses":[{"time":{"start":1693118936976,"duration":6783},"done":true,"data":null},{"time":{"start":1693118943760,"duration":3179},"done":true,"data":{"sentiment":"neutral"}},{"time":{"start":1693118946939,"duration":1800},"data":{"sentiment":60},"done":true},{"data":{"input":"college essays aaaa"},"time":{"start":1693118948739,"duration":8120},"done":true},{"data":{},"time":{"duration":7253,"start":1693118956859},"done":true}],"time":1693118964114}},{"date":"2023-08-28","data":{"responses":[{"data":null,"done":true,"time":{"start":1693283026513,"duration":10613}},{"data":{"sentiment":"positive"},"done":true,"time":{"start":1693283037127,"duration":3462}},{"data":{"sentiment":40},"time":{"start":1693283040589,"duration":1767},"done":true},{"done":true,"data":{"input":"college essays are getting along!"},"time":{"start":1693283042357,"duration":9412}},{"time":{"duration":6495,"start":1693283051770},"data":{},"done":true}],"time":1693283058265}},{"date":"2023-08-29","data":{"time":1693372068610,"responses":[{"time":{"start":1693371987913,"duration":1392},"data":null,"done":true},{"done":true,"data":{"sentiment":"neutral"},"time":{"start":1693371989306,"duration":1722}},{"time":{"start":1693371991028,"duration":1430},"done":true,"data":{"sentiment":60}},{"time":{"start":1693371992459,"duration":1587},"done":true,"data":{}},{"done":true,"time":{"duration":6929,"start":1693372055408},"data":{}},{"data":{},"done":true,"time":{"duration":3145,"start":1693372065464}}]}},{"date":"2023-08-30","data":{"time":1693412437889,"responses":[{"done":true,"time":{"duration":1882,"start":1693412412796},"data":null},{"done":true,"data":{"sentiment":"neutral"},"time":{"duration":7819,"start":1693412414678}},{"data":{"sentiment":40},"time":{"duration":6938,"start":1693412422497},"done":true},{"data":{},"time":{"duration":1081,"start":1693412429435},"done":true},{"done":true,"data":{},"time":{"start":1693412430517,"duration":5139}},{"data":{},"done":true,"time":{"duration":2233,"start":1693412435656}}]}},{"date":"2023-08-31","data":{"responses":[{"done":true,"data":null,"time":{"start":1693497795875,"duration":4215}},{"data":{"sentiment":"positive"},"time":{"start":1693497800091,"duration":10209},"done":true},{"done":true,"time":{"start":1693497810300,"duration":3310},"data":{"sentiment":40}},{"done":true,"time":{"start":1693497813610,"duration":1824},"data":{}},{"data":{},"time":{"duration":3662,"start":1693497815435},"done":true},{"data":{},"time":{"start":1693497819098,"duration":1560},"done":true}],"time":1693497820658}},{"date":"2023-09-01","data":{"responses":[{"done":true,"time":{"start":1693587261759,"duration":2564},"data":null},{"done":true,"data":{"sentiment":"neutral"},"time":{"duration":3009,"start":1693587264323}},{"data":{"sentiment":40},"done":true,"time":{"start":1693587267333,"duration":1736}},{"time":{"start":1693587269069,"duration":798},"done":true,"data":{}},{"data":{},"time":{"duration":2578,"start":1693587269867},"done":true},{"data":{},"time":{"duration":1290,"start":1693587272445},"done":true}],"time":1693587273736}},{"date":"2023-11-27","data":{"responses":[{"done":true,"time":{"start":1701150188665,"duration":3141},"data":null},{"data":{"sentiment":"positive"},"time":{"start":1701150191806,"duration":2169},"done":true},{"done":true,"data":{"sentiment":40},"time":{"start":1701150193976,"duration":2278}},{"data":{},"time":{"start":1701150196254,"duration":516},"done":true},{"done":true,"time":{"duration":886,"start":1701150196770},"data":{}},{"data":{},"done":true,"time":{"start":1701150197656,"duration":1031}}],"time":1701150198688}},{"date":"2023-11-28","data":{"responses":[{"done":true,"data":null,"time":{"start":1701211394790,"duration":1391}},{"done":true,"data":{"sentiment":"positive"},"time":{"duration":1862,"start":1701211396182}},{"data":{"sentiment":40},"done":true,"time":{"start":1701211398044,"duration":3509}},{"done":true,"data":{"input":"Physics test and UCs AAAAA"},"time":{"start":1701211401553,"duration":5750}},{"data":{},"done":true,"time":{"duration":1150,"start":1701211407304}},{"time":{"start":1701211408454,"duration":746},"data":{},"done":true}],"time":1701211409200}},{"date":"2023-11-29","error":"No survey data for this date"},{"date":"2023-11-30","data":{"time":1701332908151,"responses":[{"data":null,"time":{"start":1701332892333,"duration":2420},"done":true},{"time":{"start":1701332894753,"duration":4815},"done":true,"data":{"sentiment":"positive"}},{"done":true,"data":{"sentiment":20},"time":{"duration":1779,"start":1701332899569}},{"data":{"input":"UCs done!"},"done":true,"time":{"duration":3468,"start":1701332901348}},{"time":{"start":1701332904816,"duration":2136},"data":{},"done":true},{"done":true,"time":{"start":1701332906952,"duration":1198},"data":{}}]}},{"date":"2023-12-01","data":{"time":1701445100351,"responses":[{"data":null,"time":{"duration":2666,"start":1701445083338},"done":true},{"data":{"sentiment":"neutral"},"time":{"start":1701445086004,"duration":3050},"done":true},{"done":true,"time":{"duration":1546,"start":1701445089054},"data":{"sentiment":40}},{"data":{"input":"socratic"},"time":{"start":1701445090600,"duration":8413},"done":true},{"time":{"duration":629,"start":1701445099013},"data":{},"done":true},{"time":{"duration":709,"start":1701445099642},"data":{},"done":true}]}},{"date":"2023-12-02","data":{"time":1701536842218,"responses":[{"time":{"duration":95483,"start":1701536638546},"done":true,"data":null},{"data":{"sentiment":"positive"},"time":{"start":1701536734029,"duration":53439},"done":true},{"time":{"start":1701536787468,"duration":52326},"done":true,"data":{"sentiment":40}},{"time":{"duration":895,"start":1701536839794},"done":true,"data":{}},{"data":{},"done":true,"time":{"duration":786,"start":1701536840689}},{"data":{},"done":true,"time":{"start":1701536841475,"duration":743}}]}}]'));try{let t=e.map((e=>(0,n.JU)(f,"survey","daily",e,this.user.uid))),a=t.map((e=>(0,n.QT)(e)));return Promise.all(a).then((t=>{let a=t.map(((t,a)=>t.exists()?{date:e[a],data:t.data()}:{date:e[a],error:"No survey data for this date"}));return Promise.resolve(a)}))}catch(a){return Promise.reject(a)}},note_for(e){return this.notes&&this.notes[this.ref_to_path(e)]||null},async set_note(e,t){try{if(!this.active_doc)throw"No active doc";if(!t)throw"No ref provided";let a=this.ref_to_path(t),o=this.active_doc;return o.notes||(o.notes={}),o.notes[a]=e||null,this.set_active(o),await this.update_remote(),Promise.resolve()}catch(a){return Promise.reject(a)}},async set_finished(e,t){try{if(!this.active_doc)throw"No active doc";if(!t)throw"No ref provided";let a=t,o=this.active_doc;return o.finished||(o.finished=[]),e?o.finished.push(a):o.finished=o.finished.filter((e=>e!=a)),this.set_active(o),await this.update_remote(),Promise.resolve()}catch(a){return Promise.reject(a)}},path_to_ref(){let e=[...arguments].join("/");if(!e.length)return null;let[t,a,o]=e.split("/");return t&&a?(t=t.split("@")[0],o?`${t}~${a}~${o}`:`${t}~${a}`):null},ref_to_path(){let e=[...arguments].join("~");if(!e.length)return null;let[t,a,o]=e.split("~");return t&&a?(t+=this.ORG_DOMAIN,o?`${t}/${a}/${o}`:`${t}/${a}`):null},hash(e){let t=d().SHA256(e).toString();return t.substring(0,5)},async code_from_ref(e){try{if(!e)return Promise.reject("No ref provided");e=e.split("~").join("/");let[t,a]=e.split("/");if(!t||!a)return Promise.reject("Invalid ref");t=t.split("@")[0]+this.ORG_DOMAIN,e=t+"/"+a;const o=this.hash(e);let r=this.classes.find((t=>t.id==e));if(r?.code!==o){const r=(0,n.JU)(f,"codes",o);await(0,n.pl)(r,{ref:e});const i=(0,n.JU)(f,"classes",t,"classes",a);await(0,n.r7)(i,{code:o},{merge:!0})}return Promise.resolve(o)}catch(t){return Promise.reject(t)}},async ref_from_code(e){try{if(!e)throw"No code provided";const t=(0,n.JU)(f,"codes",e),a=await(0,n.QT)(t);if(r.i2.log("🔗 Got code doc",a.data()),!a.exists())throw"Code doesn't exist";let o=this.path_to_ref(a.data()?.ref);if(!o)throw"Code doesn't have ref";return Promise.resolve(o)}catch(t){return Promise.reject(t)}},async toggle_teacher(){if(!this.user)return;let e=this.active_doc?.teacher_mode||"true"==window.localStorage.getItem("MVTT_teacher_mode");window.localStorage.setItem("MVTT_teacher_mode",!e);let t=e?"off":"on";this.active_doc&&(this.active_doc.teacher_mode=!e,await this.update_remote(),r.i2.log(`🏫 Remote teacher mode toggled ${t}`)),r.i2.log(`🏫 Local teacher mode toggled ${t}`),new i.bF(`Teacher mode toggled ${t}`,2e3)},async get_tasks(){try{if(!this.classes?.length)return Promise.resolve([]);let e=[],t=this.classes;for(let a=0;a<t.length;a++){let o=t[a].tasks;o=o||[];for(let i=0;i<(o?.length||0);i++){if(t[a].name=t[a].name?t[a].name:"Unnamed Class","string"==typeof o[i].date){o[i].date=o[i].date.split("T")[0];let[e,t,a]=o[i].date.split("-");o[i].date=`${t}-${a}-${e}`,o[i].date=(0,r.HU)(o[i].date),o[i].date=isNaN(o[i].date)?null:o[i].date}o[i].color=t[a].color,e.push({...o[i],class_name:`P${t[a].period} - ${t[a].name}`})}}return e.sort(((e,t)=>(e.name=e.name?e.name:"",t.name=t.name?t.name:"",e.date&&t.date?e.date.getTime()==t.date.getTime()?e.period==t.period?e.name.localeCompare(t.name):e.period-t.period:e.date.getTime()-t.date.getTime():e.name.localeCompare(t.name)))),this.tasks=e,Promise.resolve(e)}catch(e){return Promise.reject(e)}},clear(){this.user=null,this.account_doc=null,this.linked_account_doc=null,this.classes=[],this.tasks=[],this.loaded_email=null,this.loaded_classes=null,this.personal_account=!1,this.teacher={doc_ref:null,collection_ref:null},window.localStorage.removeItem("MVTT_app_state"),m.Z.currentRoute?.value?.meta?.requiresAuth&&m.Z.push("/")},set_active(e){try{if(!e)throw"No data provided";return this.personal_account?this.linked_account_doc=e:this.account_doc=e,Promise.resolve()}catch(t){return Promise.reject(t)}},async doc_from_uid(e){try{if(!e)throw"No account uid provided";let t=await(0,n.QT)((0,n.JU)(f,"users",e));if(r.i2.log("🔗 Got linking account's document"),!t.exists())throw"Account doesn't exist or you haven't been added yet";let a=t.data();return Promise.resolve(a)}catch(t){return r.i2.warn("🔗 Couldn't get linking account's document",t),Promise.reject(t)}},async link_account_uid(e){if(e)if(this.personal_account){this.account_doc||(await this.create_doc(),r.i2.log("📄 Dreated doc",this.account_doc));try{let t=await this.doc_from_uid(e);if(!t)throw"Account doesn't exist or you haven't been invited";this.account_doc.linked_to=e,await this.update_wrapper_acc_doc(),new i.bF(`Successfully linked to ${t.name}'s account!`,4e3)}catch(t){return new i.PK("Couldn't link account",t,2e3),Promise.reject(t)}}else new i.OO("This account is a primary account and cannot be linked",3e3)},async invite_linked(e){if(!this.user||!this.active_doc)return;if(this.personal_account&&new i.OO("This account is already linked!",2e3),!e||S(e)||!e.includes("@"))return void new i.OO("Please enter a valid non-mvla email",2e3);if(this.linked_accounts.includes(e))return void new i.OO("That account is already linked",2e3);this.active_doc.linked||(this.personal_account?this.linked_account_doc.linked=[]:this.account_doc.linked=[]);let t=(0,n.hJ)(f,"mail");try{let a=await(0,n.ET)(t,{to:e,cc:this.user.email,from:`${this.active_doc.name} via MV Test Tracker <mail@mvtt.app>`,fromname:this.active_doc.name+" via MV Test Tracker",template:{name:"link_invite",data:{sender_name:this.active_doc.name.split(" ")[0],sender_uid:this.user.uid}}}),o=(0,n.JU)(t,a.id),s=await(0,n.QT)(o),d=1;while(!s.exists()||0==!!s.data()?.delivery?.attempts&&d<=3)await new Promise((e=>setTimeout(e,2e3*(2^d)))),s=await(0,n.QT)(o),r.i2.log("📧 Checked email doc"),d++;if(!s.data()?.delivery?.info?.accepted?.includes(e)||0==s.data()?.delivery?.attempts)throw r.i2.log("📧 Email failed to send",s.data()),"Email failed to send";return this.personal_account?this.linked_account_doc.linked.push(e):this.account_doc.linked.push(e),await this.update_remote(),new i.bF(`We notified ${e}, you'll receive a copy of the email too!`,4e3),Promise.resolve()}catch(a){return new i.PK(`Couldn't invite "${e}"`,a,2e3),Promise.reject(a)}},async uninvite_linked(e){try{if(!this.user)return;if(this.active_doc.linked.includes(e)){let t=this.active_doc.linked.filter((t=>t!=e));this.personal_account?this.linked_account_doc.linked=t:this.account_doc.linked=t,await this.update_remote(),new i.bF(`Removed ${e} from your linked accounts`,2e3)}else new i.OO(`${e} is not linked to this account`,2e3);Promise.resolve()}catch(t){return new i.PK(`Couldn't unlink "${e}"`,t,2e3),Promise.reject(t)}},refresh_timeout(e){this.paused=!1,this.user&&C(e)},async login_promise(){return new Promise((e=>{let t=setInterval((()=>{this.user&&(clearInterval(t),e(this.user))}),100)}))},async save_join_form(e){try{if(!this.user||!this.active_doc)throw"No doc to save join form to";return this.personal_account?(this.linked_account_doc=this.linked_account_doc||{},this.linked_account_doc.join_form=e):(this.account_doc=this.account_doc||{},this.account_doc.join_form=e),await this.update_remote(),Promise.resolve()}catch(t){return Promise.reject(t)}},async save_daily_survey(e){try{this.user||await this.login_promise();let t=(0,n.JU)(f,"survey","daily",$,this.user.uid),a={time:(new Date).getTime(),responses:e};await(0,n.pl)(t,a);let o=this.active_doc?.done_surveys?this.active_doc.done_surveys:[];return o.push($),this.personal_account?this.linked_account_doc.done_surveys=o:this.account_doc.done_surveys=o,await this.update_remote(),new i.bF("Saved daily survey",2e3),Promise.resolve()}catch(t){return new i.PK("Couldn't save daily survey",t,2e3),Promise.reject(t)}},async toggle_theme(){if(this.theme="light"==this.get_theme?"dark":"light",window.localStorage.setItem("theme",this.theme),this.active_doc){let e={...this.active_doc};e.prefs={...e.prefs,theme:this.theme},delete e.theme,this.set_active(e),await this.update_remote()}new i.bF(`Switched to ${this.theme} theme`,2e3),this.theme=this.get_theme},async remove_class_id_helper(e){let t=this.active_doc.classes.filter((t=>t!=e));this.personal_account?this.linked_account_doc.classes=t:this.account_doc.classes=t,this.classes=this.classes.filter((t=>t.id!=e)),this.get_tasks(),await this.update_remote()},async remove_invalid(e){return await this.remove_class_id_helper(e),new i.OO(`Removed non-existent class "${e}"`,2e3),Promise.resolve()},async remove_class(e){try{return await this.remove_class_id_helper(e),r.i2.log("🗑️ Removed class from user's doc: "+e),new i.bF("Left class",2e3),Promise.resolve()}catch(t){return r.i2.log("🔥 Error removing class from user's doc: "+t),new i.PK("Couldn't leave class",t,2e3),Promise.reject(t)}},set_user(e){r.i2.log("🔑 Setting user"),(0,n.QT)((0,n.JU)(f,"users",e.uid)).then((t=>{if(t.exists()?(this.account_doc=t.data(),this.personal_account=this.account_doc?.personal_account):(this.account_doc=null,this.linked_account_doc=null),!e.email||!S(e.email)&&(!this.personal_account||!("link"==m.Z?.currentRoute?.value?.name||this.account_doc?.personal_account&&this.account_doc?.linked_to)))return _.signOut(),new i.OO("Please use your MVLA email to log in, or use an account that has been linked",4e3),void this.clear();this.user=e,this.personal_account&&this.get_remote(),this.is_teacher&&(r.i2.log("🏫 In teacher mode"),this.teacher.doc_ref=(0,n.JU)(f,"classes",this.user.email),this.teacher.collection_ref=(0,n.hJ)(this.teacher.doc_ref,"classes")),m.Z.currentRoute?.value?.query?.redirect&&!m.Z.currentRoute?.value?.meta?.blockStandardRedirect&&m.Z.replace(m.Z.currentRoute?.value?.query?.redirect)})).catch((e=>{_.signOut(),new i.OO("Something went wrong loading your user data",2e3),r.i2.log("🔥 Error loading user data: "+e)}))},async login(){new i.FN("Opening login popup...","default",1e3,a(1121)),await(A||q()?(0,c.F6)(_,O):(0,c.rh)(_,O)).then((()=>{if(this.user&&this.user.email&&S(this.user.email))return new i.FN("Logged in as "+this.user.displayName+"!","default",2e3,a(8311)),r.i2.log("🔑 Logged in as "+this.user.displayName),b(this.user),m.Z.currentRoute?.value?.query?.redirect||m.Z.currentRoute?.value?.meta?.blockStandardRedirect||m.Z.push("/portal"),Promise.resolve()})).catch((e=>{let t=(0,i.YY)(e);return"auth/cancelled-popup-request"==e.code||"auth/popup-closed-by-user"==e.code||"auth/user-cancelled"==e.code?new i.OO(t,2e3):new i.PK("Couldn't log in",t,2e3),Promise.reject(t)}))},async login_personal(){new i.FN("Opening login popup...","default",1e3,a(1121));const e=new c.hJ;e.addScope("email"),e.addScope("profile"),await(A||q()?(0,c.F6)(_,e):(0,c.rh)(_,e)).then((e=>(e.user&&e.user.email&&!S(e.user.email)||this.logout(),new i.FN("Logged in as "+e.user.displayName+"!","default",2e3,a(8311)),r.i2.log("🔑 Logged in as "+e.user.displayName),b(e.user),Promise.resolve()))).catch((e=>(new i.PK("Couldn't log in",e,2e3),Promise.reject(e))))},async logout(){m.Z.currentRoute?.value?.meta?.requiresAuth&&await m.Z.push({path:"/"}),_.signOut(),this.clear(),new i.FN("Logged Out","default",1500,a(1121))},async get_remote(){let e=await(0,n.QT)(this.active_ref);r.i2.log("📄 Got user doc remote"),e.exists()?this.set_active(e.data()):this.personal_account?(r.i2.log("🔗 Linked account doesn't exist, removing it and going home"),new i.OO("Linked account doesn't exist, removing it and going home",2e3),this.account_doc.linked_to=null,await this.update_wrapper_acc_doc(),this.linked_account_doc=null,m.Z.push("/")):(await this.create_doc(),await this.get_remote())},async update_remote(){await(0,n.pl)(this.active_ref,this.active_doc,{merge:!0}),r.i2.log("⏶ Pushed changes to remote")},async update_wrapper_acc_doc(){await(0,n.pl)(this.account_ref,this.account_doc,{merge:!0})},async update_wrapper_with_merge(e){try{return await(0,n.pl)(this.account_ref,e,{merge:!0}),Promise.resolve()}catch(t){return Promise.reject(t)}},async create_doc(){r.i2.log("📄 User document doesn't exist, creating new one..."),new i.OO("User document doesn't exist, creating new one...",2e3),this.account_doc={name:this.user.displayName,email:this.user.email,classes:[],prefs:{theme:this.get_theme,hide_timeout:!1}},this.personal_account&&(this.account_doc={linked_to:null,personal_account:!0,name:this.user.displayName,email:this.user.email,prefs:{theme:this.get_theme,hide_timeout:!1}}),await this.update_wrapper_acc_doc(),new i.bF("Created user document; Let's get started",2e3),this.personal_account||m.Z.push({name:"onboarding",query:{redirect:"/settings?redirect=/portal"}}),this.is_teacher&&(await this.create_teacher_doc(),new i.bF("Created user & teacher documents; Let's get started",2e3))},async create_teacher_doc(){let e=(0,n.JU)(f,"classes",this.active_doc.email||this.user.email);await(0,n.pl)(e,{name:this.active_doc.name||this.user.displayName,email:this.active_doc.email||this.user.email}),this.teacher={doc_ref:e,collection_ref:(0,n.hJ)(e,"classes")},m.Z.push("/portal/create")},async fetch_classes(){let e=Math.random().toString(36).substring(7);if(r.i2.log(`📚 Started fetch   | <${e}>`),!this.active_doc?.classes)return Promise.reject("Waiting for user document to load");let t=[...new Set(this.active_doc.classes)];t.length!=this.active_doc.classes.length&&(this.personal_account?this.linked_account_doc.classes=t:this.account_doc.classes=t,await this.update_remote(),new i.OO("Removed duplicate classes",2e3),r.i2.log("📚 Removed duplicate classes"));let a=[];for(let o of this.active_doc.classes){let[e,t]=o.split("/");if(!e||!t){await this.remove_invalid(o);continue}let r=(0,n.hJ)(f,"classes",e,"classes");if(!r){await this.remove_invalid(o);continue}let i=(0,n.JU)(r,t),s=await(0,n.QT)(i);if(!s.exists()){await this.remove_invalid(o);continue}let d=s.data();d.id=o,d.ref=[e,t].join("/"),a.push(d)}r.i2.log(`📚 Got class docs  | <${e}>`),a=a.map((e=>{let[t,a]=e.ref.split("/");return e.tasks=e.tasks||[],e.tasks=e.tasks.map((e=>(e.ref=[t,a,e.id].join("/"),delete e.id,e))),e})),r.i2.log(`📚 Processed tasks | <${e}>`),a.sort(((e,t)=>e.period==t.period?e.name.localeCompare(t.name):e.period-t.period)),this.classes=a,this.get_tasks(),Promise.resolve()},async fetch_classes_by_email(e){if(this.loaded_email=null,!e||!S(e))return this.loaded_classes=null,void(this.loaded_email=e);r.i2.log("📄 Getting classes from email");let t=[],a=(0,n.hJ)((0,n.JU)(f,"classes",e),"classes"),o=await(0,n.PL)(a);r.i2.log("📄 Got classes subcollection from email"),o.forEach((a=>{let o=a.data();o.id=a.id,o.is_joined=this.active_doc?.classes.includes([e,a.id].join("/")),t.push(o)})),t.sort(((e,t)=>e.period==t.period?e.name.localeCompare(t.name):e.period-t.period)),this.loaded_classes=t,this.loaded_email=e},async add_class(e,t,a,o){if(!this.active_doc?.classes)return;if(!t)return;let r=[e,t].join("/");return this.active_doc.classes.includes(r)?void 0:(this.personal_account?this.linked_account_doc.classes.push(r):this.account_doc.classes.push(r),await this.update_remote(),await this.fetch_classes(),new i.bF(`Added "P${o} - ${a}" to your classes`,2e3),Promise.resolve())},async create_class(e){if(r.i2.log("🔨 Creating class",e),this.is_teacher){if(e.name&&e.period)try{if(!this.teacher.doc_ref||!this.teacher.collection_ref)return await this.create_teacher_doc(),void await this.create_class(e);let t=await(0,n.ET)(this.teacher.collection_ref,e);return new i.bF(`Created class "${e.name}"`,2e3),r.i2.log("🏫 class_doc_ref",t),await this.add_class(this.active_doc.email||this.user.email,t.id,e.name,e.period),Promise.resolve()}catch(t){return new i.PK("Couldn't create class",(0,i.YY)(t),2e3),Promise.reject(t)}}else new i.OO("You need to be a teacher to create a class",2e3)},async create_task(e,t){try{if(!e.name&&"note"!=e?.type)return Promise.reject("No task name specified");if(!t||0==t.length)return Promise.reject("No classes selected");let a=(0,n.qs)(f),o=Array.from(this.classes);t.forEach((t=>{let r=t,[i,s]=t.split("/"),d=(0,n.hJ)(f,"classes",i,"classes",s,"tasks");e.class_id=r;let l=(0,n.JU)(d);a.set(l,e),o.forEach((t=>{t.id==r&&t.tasks.push({...e,ref:[i,s,l.id].join("/"),class_id:r,_proxy:!0})}))})),await a.commit(),this.classes=o,this.get_tasks();let r="note"==e.type?"":`"${e.name}"`;return new i.bF(`Added ${e.type||"task"} ${r} to ${t.length} class${1==t.length?"":"es"}`,2e3),Promise.resolve()}catch(a){return Promise.reject(a)}},async update_class(e,t){try{let[a,o]=e.split("/");a+=this.ORG_DOMAIN,await(0,n.r7)((0,n.JU)(f,"classes",a,"classes",o),t),r.i2.log("📝 Updated remote class");let i=this.classes;const s=i.findIndex((e=>e.id===[a,o].join("/")));return-1!==s&&(i[s]={...i[s],...t,_proxy:!0},r.i2.log("📝 Updated local class")),this.classes=[...i],this.get_tasks(),Promise.resolve()}catch(a){return Promise.reject(a)}},async update_task(e,t){try{delete t.class_id,delete t.ref,delete t._class;let[a,o,i]=e.split("/");a.includes(this.ORG_DOMAIN)||(a+=this.ORG_DOMAIN),await(0,n.r7)((0,n.JU)(f,"classes",a,"classes",o,"tasks",i),t),r.i2.log("📝 Updated remote task");let s=this.classes,d=[a,o].join("/");const l=s.findIndex((e=>e.id===d)),c=[a,o,i].join("/");if(-1!==l){const e=s[l].tasks.findIndex((e=>e.ref===c));-1!==e&&(s[l].tasks[e]={...t,ref:c,class_id:d,_proxy:!0},r.i2.log("📝 Updated local task"))}return this.classes=[...s],this.get_tasks(),Promise.resolve()}catch(a){return Promise.reject(a)}},async archive_task(e){let[t,a,o]=e.split("/");t+=this.ORG_DOMAIN;try{await(0,n.oe)((0,n.JU)(f,"classes",t,"classes",a,"tasks",o)),r.i2.log("📄 Archived task");try{let e=this.classes;e.forEach((e=>{e.id==[t,a].join("/")&&(e.tasks=e.tasks.filter((e=>e.ref!=[t,a,o].join("/"))))})),this.classes=e,this.get_tasks()}catch(i){throw r.i2.error("🔥 Error removing task from local",i),i}}catch(i){return Promise.reject(i)}return Promise.resolve()},async task_from_ref(e){try{let[t,a,o]=e.split("/");t+=this.ORG_DOMAIN;let i=await(0,n.QT)((0,n.JU)(f,"classes",t,"classes",a)),s=i.data();delete s.tasks,r.i2.log("📚 Got class from ref");let d=await(0,n.QT)((0,n.JU)(f,"classes",t,"classes",a,"tasks",o));if(!d.exists())return Promise.resolve(null);r.i2.log("📄 Got task from ref");let l=d.data();return l={...l,ref:e,class_id:[t,a].join("/"),class_name:`P${s.period} - ${s.name}`,_class:{...s,ref:[t.split(this.ORG_DOMAIN)[0],a].join("~")}},Promise.resolve(l)}catch(t){return Promise.reject(t)}},async class_from_ref(e,t=!1){try{let[a,o]=e.split("/");a+=this.ORG_DOMAIN;let i=await(0,n.QT)((0,n.JU)(f,"classes",a,"classes",o));if(r.i2.log("📄 Got class doc"),!i.exists())return Promise.reject("Class doesn't exist");let s=i.data();return t||delete s.tasks,r.i2.log("📚 Got class data"),Promise.resolve(s)}catch(a){return Promise.reject(a)}},async upcoming_from_ref(e,t){try{if(!e)throw"No class ref provided";t||(t=await this.class_from_ref(e));let[a,o]=e.split("/");a+=this.ORG_DOMAIN;let i=await(0,n.QT)((0,n.JU)(f,"classes",a,"classes",o));if(!i.exists())throw"Class doesn't exist";let s=i.data()?.tasks||[];s=s.filter((e=>"note"!=e.type&&(0,r.HU)(e.date).getTime()>=(new Date).getTime())),s.sort(((e,t)=>(0,r.HU)(e.date).getTime()-(0,r.HU)(t.date).getTime())),s=s.slice(0,6);let d=[];return s.forEach((i=>{let n=i.id;delete i.id,d.push({...i,ref:[...e.split("/"),n].join("~"),date:(0,r.HU)(i.date),color:t.color,class_id:[a,o].join("/"),class_name:`P${t.period} - ${t.name}`})})),r.i2.log("📚 Got upcoming tasks"),Promise.resolve(d)}catch(a){return Promise.reject(a)}},show_timeout(){r.i2.log("🕒 Showing timeout"+(this.account_doc?.prefs?.hide_timeout?" | Hidden locally due to prefs":"")),this.paused=!0},hide_timeout(){this.paused&&(this.account_doc?.prefs?.hide_timeout||r.i2.log("🕒 Hiding timeout"),this.paused=!1)}}})},6763:function(e,t,a){"use strict";a.d(t,{Z:function(){return T}});var o=a(3396),r=a(7139);const i=e=>((0,o.dD)("data-v-293e21ec"),e=e(),(0,o.Cn)(),e),n={class:"modal",ref:"modal"},s={key:0,class:"modal_header",ref:"title"},d={class:"header_style modal_header_title"},l={key:1,ref:"contents",class:"overlay_contents"},c=["innerHTML"],u={class:"bottom_actions"},m={key:1,class:"progress_display"},h=["onClick"],p=i((()=>(0,o._)("div",{class:"flex_spacer"},null,-1))),_=["disabled"];function f(e,t,a,i,f,g){return(0,o.wg)(),(0,o.iD)("main",n,[a.title?((0,o.wg)(),(0,o.iD)("header",s,[(0,o._)("h2",d,(0,r.zw)(a.title),1)],512)):(0,o.kq)("",!0),a.content||a.html?((0,o.wg)(),(0,o.iD)("div",l,[((0,o.wg)(),(0,o.j4)((0,o.LL)(a.content),{ref:"container",onUpdate:t[0]||(t[0]=t=>e.$emit("update",t)),onStatus:t[1]||(t[1]=t=>e.$emit("status",t)),onSkip:t[2]||(t[2]=t=>e.$emit("skip")),load:a.load},null,40,["load"])),a.html?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"overlay_contents__html",innerHTML:a.html},null,8,c)):(0,o.kq)("",!0)],512)):(0,o.kq)("",!0),(0,o._)("div",u,[a.skippable?((0,o.wg)(),(0,o.iD)("button",{key:0,class:"close_action",onClick:t[3]||(t[3]=t=>e.$emit("skip"))},(0,r.zw)(a.skip_text||(a.progress&&a.progress.current>1?"Abandon":"Close")),1)):(0,o.kq)("",!0),a.progress&&a.progress.total>1?((0,o.wg)(),(0,o.iD)("div",m,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.progress.total,(t=>((0,o.wg)(),(0,o.iD)("span",{class:"progress_display__dot_container",key:t,onClick:a=>e.$emit("open",t-1)},[(0,o._)("span",{class:(0,r.C_)(["progress_display__dot",{dot_active:t==a.progress.current,dot_finished:t<a.progress.current}])},null,2)],8,h)))),128))])):(0,o.kq)("",!0),p,(0,o._)("button",{class:"continue_action",onClick:t[4]||(t[4]=(...e)=>a.continue_action&&a.continue_action(...e)),disabled:!a.can_continue},(0,r.zw)(g.button_text),9,_)])],512)}a(7658);var g=a(2745),v=a(9529),w=a.n(v),b={name:"ModalVue",mixins:[w()],mounted(){this.$smoothReflow({el:this.$refs.contents,hideOverflow:!0,childTransitions:!0}),this.$smoothReflow({el:this.$refs.title,hideOverflow:!0})},emits:["open","update","status","skip"],data(){return{}},props:{load:{type:Object,default:()=>({})},skippable:{type:Boolean,default:!1,required:!1},title:{type:String,default:"",required:!1},content:{type:Object,default:null,required:!1},html:{type:String,default:null,required:!1},can_continue:{type:Boolean,required:!0},continue_action:{type:Function,default:()=>{g.i2.log("⏵ ModalVue: continue_action not provided"),window.onbeforeunload=null,(void 0).$router.push((void 0).$route.query.redirect||"/portal")},required:!1},progress:{type:Object,default:null,required:!1},is_notification:{type:Boolean,default:!1,required:!1},submit_text:{type:String,required:!1},skip_text:{type:String,required:!1}},computed:{button_text(){return this.submit_text?this.submit_text:this.is_notification?"Ok":this.progress&&this.progress.current==this.progress.total?"Finish":"Continue"}}},k=a(89);const y=(0,k.Z)(b,[["render",f],["__scopeId","data-v-293e21ec"]]);var T=y},3917:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var o=a(3396),r=a(7139);const i=["closable"];function n(e,t,a,n,s,d){return(0,o.wg)(),(0,o.iD)("div",{class:(0,r.C_)(["overlay overlay_center_view overlay_slot__wrapper",{animate_out:s.animating_out}])},[(0,o._)("div",{class:"overlay_close",onClick:t[0]||(t[0]=e=>d.closable?d.close():null),closable:d.closable},null,8,i),a.component?((0,o.wg)(),(0,o.j4)((0,o.LL)(a.component),{key:0,class:"overlay_slot",onClose:d.close},null,40,["onClose"])):(0,o.WI)(e.$slots,"default",{key:1,class:"overlay_slot",close:d.close})],2)}var s={name:"OverlayWrapper",emits:["close"],props:{component:{type:Object,default:null}},data(){return{animating_out:!1}},computed:{closable(){return!0!==this.$route?.meta?.block_close}},methods:{close(){this.animating_out=!0,setTimeout((()=>{window.onbeforeunload=null,this.$emit("close"),this.animating_out=!1}),250)}}},d=a(89);const l=(0,d.Z)(s,[["render",n]]);var c=l},2480:function(){},4654:function(){}},t={};function a(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,o,r,i){if(!o){var n=1/0;for(c=0;c<e.length;c++){o=e[c][0],r=e[c][1],i=e[c][2];for(var s=!0,d=0;d<o.length;d++)(!1&i||n>=i)&&Object.keys(a.O).every((function(e){return a.O[e](o[d])}))?o.splice(d--,1):(s=!1,i<n&&(n=i));if(s){e.splice(c--,1);var l=r();void 0!==l&&(t=l)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,r,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,o){return a.f[o](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+"."+{2:"2ea48494",12:"be66e917",32:"df714c9f",71:"a9723caf",80:"d5d5f613",90:"91c92537",118:"8fa26513",130:"6bc4c584",165:"73d87832",166:"781c8975",229:"f1f2e7e4",274:"10ef3f7d",310:"1e819a9e",371:"8be3aeb8",385:"e142a73f",438:"2ff21d39",467:"27654369",478:"865fb711",481:"463e24b5",524:"b43d9ba6",564:"1585b253",619:"3b22a830",620:"ccb9f089",670:"27175b86",694:"d8ea7722",947:"e6a21a3c",993:"500aecbb"}[e]+".js"}}(),function(){a.miniCssF=function(e){return"css/"+e+"."+{2:"b466c93b",32:"8f0dd6a7",71:"ee5b18f9",80:"6109f183",90:"27e9eee2",118:"2b3c5ff8",130:"a500d483",165:"a9dce591",274:"4aca0385",310:"c83ee4bd",371:"6b00815e",385:"886f8858",438:"7ff574a8",467:"126caf0c",478:"878f223e",481:"b901e163",564:"b7adad33",619:"1701e17f",620:"e95ce5b1",670:"c23f198f",694:"3ee1ed7e",947:"14931a2c"}[e]+".css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="mvtime:";a.l=function(o,r,i,n){if(e[o])e[o].push(r);else{var s,d;if(void 0!==i)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var u=l[c];if(u.getAttribute("src")==o||u.getAttribute("data-webpack")==t+i){s=u;break}}s||(d=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",t+i),s.src=o),e[o]=[r];var m=function(t,a){s.onerror=s.onload=null,clearTimeout(h);var r=e[o];if(delete e[o],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((function(e){return e(a)})),t)return t(a)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=m.bind(null,s.onerror),s.onload=m.bind(null,s.onload),d&&document.head.appendChild(s)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,a,o,r){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css";var n=function(a){if(i.onerror=i.onload=null,"load"===a.type)o();else{var n=a&&("load"===a.type?"missing":a.type),s=a&&a.target&&a.target.href||t,d=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");d.code="CSS_CHUNK_LOAD_FAILED",d.type=n,d.request=s,i.parentNode&&i.parentNode.removeChild(i),r(d)}};return i.onerror=i.onload=n,i.href=t,a?a.parentNode.insertBefore(i,a.nextSibling):document.head.appendChild(i),i},t=function(e,t){for(var a=document.getElementsByTagName("link"),o=0;o<a.length;o++){var r=a[o],i=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(i===e||i===t))return r}var n=document.getElementsByTagName("style");for(o=0;o<n.length;o++){r=n[o],i=r.getAttribute("data-href");if(i===e||i===t)return r}},o=function(o){return new Promise((function(r,i){var n=a.miniCssF(o),s=a.p+n;if(t(n,s))return r();e(o,s,null,r,i)}))},r={143:0};a.f.miniCss=function(e,t){var a={2:1,32:1,71:1,80:1,90:1,118:1,130:1,165:1,274:1,310:1,371:1,385:1,438:1,467:1,478:1,481:1,564:1,619:1,620:1,670:1,694:1,947:1};r[e]?t.push(r[e]):0!==r[e]&&a[e]&&t.push(r[e]=o(e).then((function(){r[e]=0}),(function(t){throw delete r[e],t})))}}}(),function(){var e={143:0};a.f.j=function(t,o){var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)o.push(r[2]);else{var i=new Promise((function(a,o){r=e[t]=[a,o]}));o.push(r[2]=i);var n=a.p+a.u(t),s=new Error,d=function(o){if(a.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var i=o&&("load"===o.type?"missing":o.type),n=o&&o.target&&o.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+n+")",s.name="ChunkLoadError",s.type=i,s.request=n,r[1](s)}};a.l(n,d,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,i,n=o[0],s=o[1],d=o[2],l=0;if(n.some((function(t){return 0!==e[t]}))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(d)var c=d(a)}for(t&&t(o);l<n.length;l++)i=n[l],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(c)},o=self["webpackChunkmvtime"]=self["webpackChunkmvtime"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(2151)}));o=a.O(o)})();
//# sourceMappingURL=app.1266b2e0.js.map