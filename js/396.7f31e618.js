"use strict";(self["webpackChunkmvtime"]=self["webpackChunkmvtime"]||[]).push([[396],{621:function(e,s,t){t.r(s),t.d(s,{default:function(){return Z}});var a=t(3396),l=t(7139);const n=e=>((0,a.dD)("data-v-15a92678"),e=e(),(0,a.Cn)(),e),i={class:"viewtask"},o={class:"modal_header",ref:"title"},r={class:"header_style modal_header_title"},_={ref:"contents",class:"overlay_contents"},c={key:0},d={class:"spaced_contents"},k={class:"styled_obj"},h=n((()=>(0,a._)("span",{class:"styled_line__label"},"Class:",-1))),p=n((()=>(0,a._)("span",{class:"styled_line__separator"},null,-1))),y={class:"styled_line__value"},u={class:"styled_obj"},m=n((()=>(0,a._)("span",{class:"styled_line__label"},"Name:",-1))),v=n((()=>(0,a._)("span",{class:"styled_line__separator"},null,-1))),w={class:"styled_line__value"},g={class:"styled_obj"},f=n((()=>(0,a._)("span",{class:"styled_line__label"},"Date:",-1))),b=n((()=>(0,a._)("span",{class:"styled_line__separator"},null,-1))),$={class:"styled_line__value"},D={class:"styled_obj"},E=n((()=>(0,a._)("span",{class:"styled_line__label"},"Description:",-1))),O=n((()=>(0,a._)("span",{class:"styled_line__separator"},null,-1))),C=["innerHTML"],j={key:0,class:"styled_obj links_obj"},x=n((()=>(0,a._)("span",{class:"styled_line__label"},"Links:",-1))),T=n((()=>(0,a._)("span",{class:"styled_line__separator"},null,-1))),z={class:"styled_line__value styled_line_links"},L=["href"],K=n((()=>(0,a._)("div",{class:"overlay_contents_text"}," Information is provided by teachers and volunteer students, and may not always be correct ",-1))),P={key:1,alt:"Loading Icon",class:"loading_icon"},S={class:"bottom_actions"},H=n((()=>(0,a._)("div",{class:"flex_spacer"},null,-1)));function I(e,s,t,n,I,N){return(0,a.wg)(),(0,a.iD)("main",i,[(0,a._)("header",o,[(0,a._)("h2",r," View "+(0,l.zw)(I.task&&I.task.type?I.task.type:"task")+" details ",1)],512),(0,a._)("div",_,[I.ready?((0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("div",d,[(0,a._)("div",k,[h,p,(0,a._)("span",y,(0,l.zw)(I.task.group||I.task.class_name),1)]),(0,a._)("div",u,[m,v,(0,a._)("span",w,(0,l.zw)(I.task.name),1)]),(0,a._)("div",g,[f,b,(0,a._)("span",$,(0,l.zw)(new Date(I.task.date).toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"})),1)]),(0,a._)("div",D,[E,O,(0,a._)("span",{class:"styled_line__value",innerHTML:I.task.description?I.task.description:"Not Provided"},null,8,C)]),I.task.links?((0,a.wg)(),(0,a.iD)("div",j,[x,T,(0,a._)("span",z,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(I.task.links,(e=>((0,a.wg)(),(0,a.iD)("a",{class:"styled_line_links__link",target:"_blank",key:e.path,href:e.path},(0,l.zw)(e.text),9,L)))),128))])])):(0,a.kq)("",!0)]),K])):((0,a.wg)(),(0,a.iD)("img",P))],512),(0,a._)("div",S,[(0,a._)("button",{class:"share_action",onClick:s[0]||(s[0]=(...e)=>N.share_task&&N.share_task(...e))},"Share"),H,N.store.is_teacher&&N.store.user&&I.task&&I.task.ref.split("/")[0]==N.store.user.email?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"delete_action primary_styled",onClick:s[1]||(s[1]=(...e)=>N.delete_task&&N.delete_task(...e))}," Delete ")):(0,a.kq)("",!0),(0,a._)("button",{class:"continue_action",onClick:s[2]||(s[2]=s=>e.$emit("close"))},"Close")])])}var N=t(1708),R=t(2745),V=t(8980),q=t(9529),F=t.n(q),M={name:"ViewTaskView",emits:["close"],mixins:[F()],data(){return{task:null,ready:!1}},computed:{store(){return(0,V.h)()}},mounted(){this.$smoothReflow({el:this.$refs.contents,hideOverflow:!0,childTransitions:!0}),this.$smoothReflow({el:this.$refs.title,hideOverflow:!0}),this.get_task()},methods:{async share_task(){navigator.share?navigator.share({title:this.task.name,text:this.task.description,url:window.location.href}).then((()=>new N.bF("Opened share dialog",1e3))).catch((e=>(0,R.E)("Error sharing",e))):navigator.clipboard?(navigator.clipboard.writeText(window.location.href),new N.OO("Sharing not supported, copied link to clipboard",2e3)):new N.PK("Sharing not supported",2e3)},async delete_task(){this.store.delete_task(this.task.ref).then((()=>{new N.bF(`Removed ${this.task.type} "${this.task.name}"`,3e3),this.$emit("close")})).catch((e=>{new N.PK(`Error removing ${this.task.type} "${this.task.name}"`,3e3),(0,R.E)("âš  Error removing task",e)}))},async get_task(){const e=this.$route.params.ref.split("~").join("/");e||(new N.OO("No task specified",1500),this.$emit("close")),this.store.task_from_ref(e).then((e=>{e?((0,R.E)("ðŸ“ƒ Got task data from ref"),this.task=e,this.ready=!0):(new N.OO("Task not found",1500),this.$emit("close"))})).catch((e=>{new N.PK("Error getting task",1500),(0,R.E)("âš  Error getting task",e),this.$emit("close")}))}}},G=t(89);const Y=(0,G.Z)(M,[["render",I],["__scopeId","data-v-15a92678"]]);var Z=Y}}]);
//# sourceMappingURL=396.7f31e618.js.map