(self["webpackChunkmvtime"]=self["webpackChunkmvtime"]||[]).push([[426],{8911:function(t,e,i){const n=i(8792);function s(t){return/^-?(0?\.)?\d+m?s$/.test(t)}function o(t){const[e,i,o,r]=t.split(/\s+/);return s(o)?{delay:n(o),duration:n(i),name:e}:{delay:n(r),duration:n(i),name:e,timingFunction:o}}function r(t){return t.split(",").map((t=>t.trim())).filter((t=>t.length>0)).map(o)}t.exports=r},8792:function(t){function e(t){if(!t)return;const e=t.endsWith("ms");return parseFloat(t)*(e?1:1e3)}t.exports=e},9426:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return P}});var n=i(3396);function s(t,e,i,s,o,r){const a=(0,n.up)("ModalFromPages");return(0,n.wg)(),(0,n.j4)(a,{pages:t.pages,onFinish:r.saveResponses},null,8,["pages","onFinish"])}i(7658);function o(t,e,i,s,o,r){const a=(0,n.up)("Modal");return(0,n.wg)(),(0,n.j4)(a,{onOpen:r.switch_to,title:r.page.title,content:r.page.content,html:r.page.content?null:r.page.html,is_notification:r.page.is_notification,submit_text:r.page.submit_text,progress:{current:o.page_index+1,total:i.pages.length},can_continue:r.can_continue,continue_action:r.next_page,show_progress:!0},null,8,["onOpen","title","content","html","is_notification","submit_text","progress","can_continue","continue_action"])}var r=i(7139);const a=t=>((0,n.dD)("data-v-1b820caa"),t=t(),(0,n.Cn)(),t),l={class:"modal",ref:"modal"},h={key:0,class:"modal_header"},u={class:"modal_header_title"},d={key:1,class:"overlay_contents"},c=["innerHTML"],g={class:"bottom_actions"},p={key:0,class:"progress_display"},m=["onClick"],f=a((()=>(0,n._)("div",{class:"flex_spacer"},null,-1))),_=["disabled"];function v(t,e,i,s,o,a){return(0,n.wg)(),(0,n.iD)("main",l,[i.title?((0,n.wg)(),(0,n.iD)("header",h,[(0,n._)("h2",u,(0,r.zw)(i.title),1)])):(0,n.kq)("",!0),i.content||i.html?((0,n.wg)(),(0,n.iD)("div",d,[((0,n.wg)(),(0,n.j4)((0,n.LL)(i.content))),i.html?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"overlay_contents__html",innerHTML:i.html},null,8,c)):(0,n.kq)("",!0)])):(0,n.kq)("",!0),(0,n._)("div",g,[i.progress&&i.progress.total>1?((0,n.wg)(),(0,n.iD)("div",p,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.progress.total,(e=>((0,n.wg)(),(0,n.iD)("span",{class:"progress_display__dot_container",key:e,onClick:i=>t.$emit("open",e-1)},[(0,n._)("span",{class:(0,r.C_)(["progress_display__dot",{dot_active:e==i.progress.current,dot_finished:e<i.progress.current}])},null,2)],8,m)))),128))])):(0,n.kq)("",!0),f,(0,n._)("button",{class:"continue_action",onClick:e[0]||(e[0]=(...t)=>i.continue_action&&i.continue_action(...t)),disabled:!i.can_continue},(0,r.zw)(a.button_text),9,_)])],512)}var y=i(2745),w=i(8911),b=i.n(w);const E={methods:{$smoothElement(t){let e=x.bind(this);Array.isArray(t)?t.forEach(e):e(t)},$unsmoothElement(t){let e=$.bind(this);Array.isArray(t)?t.forEach(e):e(t)}},created(){this._smoothElements=[]},beforeUpdate(){this._smoothElements&&this._smoothElements.length&&this._smoothElements.forEach((t=>{let e=H(this.$el,t.options.el);t.setBeforeHeight(e)}))},updated(){this._smoothElements&&this._smoothElements.length&&this.$nextTick((()=>{this._smoothElements.forEach((t=>{let e=H(this.$el,t.options.el);t.doSmoothReflow(e)}))}))}};function x(t={}){t.hasOwnProperty("el")||(t.el=this.$el),this._smoothElements.push(new C(t))}function $(t){let e=this.$el,i=this._smoothElements.findIndex((i=>H(e,i.el)===H(e,t.el)));if(-1==i)return void console.error("VSM_ERROR: $unsmoothElement failed due to invalid el option");let n=this._smoothElements[i];n.remove(),this._smoothElements.splice(i,1)}function H(t,e){return"string"===typeof e?t.matches(e)?t:t.querySelector(e):e}let T=0;const k=Object.freeze({INACTIVE:T++,ACTIVE:T++});class C{constructor(t){t={el:null,transition:"height .5s",childTransitions:null,hideOverflow:!1,debug:!1,...t},Object.assign(this,{$el:null,hasExistingHeightTransition:!1,beforeHeight:null,afterHeight:null,state:k.INACTIVE,options:t}),this.endListener=this.endListener.bind(this)}transition(t){this.state=t}get heightDiff(){let{beforeHeight:t,afterHeight:e}=this;return null==t||null==e?0:e-t}setBeforeHeight(t){let e;this.afterHeight=null,t&&(e=t.offsetHeight),this.beforeHeight=e,this.state===k.ACTIVE&&(this.stopTransition(),this.log("Transition was interrupted."))}doSmoothReflow(t,e="data update"){if(!t)return void this.log("Could not find registered el.");this.$el=t,this.transition(k.ACTIVE),t.addEventListener("transitionend",this.endListener,{passive:!0}),this.log(`Height transition triggered by: ${e}`);let{beforeHeight:i,options:n}=this,s=t.offsetHeight;if(null!=this.afterHeight&&this.afterHeight===s)return this.log(`Element height did not change after nested transition. Height = ${s}`),void this.transition(k.INACTIVE);if(i===s)return this.log(`Element height did not change. Height = ${s}`),void this.transition(k.INACTIVE);this.afterHeight=s,this.log(`Previous height: ${i} Current height: ${s}`);let o=window.getComputedStyle(t),r=b()(o.transition);if(this.hasHeightTransition(r)?this.hasExistingHeightTransition=!0:(this.hasExistingHeightTransition=!1,this.addHeightTransition(r,n.transition)),n.hideOverflow){let e=o.overflowY,i=o.overflowX;this.overflowX=i,this.overflowY=e,t.style.overflowX="hidden",t.style.overflowY="hidden"}t.style["height"]=i+"px",t.offsetHeight,t.style["height"]=s+"px"}hasHeightTransition(t){return t.find((t=>["all","height"].includes(t.name)&&t.duration>0))}addHeightTransition(t,e){let i=t.map((t=>`${t.name} ${t.duration}ms ${t.timingFunction} ${t.delay}ms`));this.$el.style.transition=[...i,e].join(",")}endListener(t){t.currentTarget===t.target?"height"===t.propertyName&&(this.stopTransition(),this.setBeforeHeight(this.$el)):this.heightDiff<=0&&this.isRegisteredChildTransition(t)&&this.doSmoothReflow(this.$el,"child transition")}isRegisteredChildTransition(t){let{childTransitions:e}=this.options;return t.target.matches(e)}stopTransition(){let{$el:t,options:e,overflowX:i,overflowY:n,hasExistingHeightTransition:s}=this;t.style["height"]=null,e.hideOverflow&&(t.style.overflowX=i,t.style.overflowY=n),s||(t.style.transition=null),this.transition(k.INACTIVE)}remove(){this.$el.removeEventListener("transitionend",this.endListener)}log(t){this.options.debug&&console.log(`VSM_DEBUG: ${t}`,this.$el)}}var q=E,D=i(5494),I={name:"ModalVue",mixins:[q],mounted(){this.$smoothElement({el:this.$refs.modal})},emits:["open"],props:{title:{type:String,default:"",required:!1},content:{type:Object,default:null,required:!1},html:{type:String,default:null,required:!1},can_continue:{type:Boolean,required:!0},continue_action:{type:Function,default:()=>{(0,y.E)("ModalVue: continue_action not provided"),window.onbeforeunload=null,D.Z.push("/portal")},required:!1},progress:{type:Object,default:null,required:!1},is_notification:{type:Boolean,default:!1,required:!1},submit_text:{type:String,required:!1}},computed:{button_text(){return this.submit_text?this.submit_text:this.is_notification?"Ok":this.progress&&this.progress.current==this.progress.total?"Finish":"Continue"}}},M=i(89);const O=(0,M.Z)(I,[["render",v],["__scopeId","data-v-1b820caa"]]);var A=O;function F(){return"You haven't finished the task yet, and might lose progress. Are you sure you want to close the tab?"}window.onbeforeunload=F;var S={name:"ModalFromPages",emits:["finish"],components:{Modal:A},props:{pages:{type:Array,required:!0}},data(){return{page_index:0,responses:[]}},computed:{page(){return 0==this.pages.length?{title:"No pages provided",content:null,html:null,is_notification:!0}:this.pages[this.page_index]},can_continue(){return!this.page.content||!this.page.content.can_continue||this.page.content.can_continue()}},methods:{switch_to(t){(0,y.E)(`ModalFromPages: switching to page ${t}`),t<=this.page_index||Object.prototype.hasOwnProperty.call(this.responses,Math.max(t-1,0))?this.page_index=t:(0,y.E)(`ModalFromPages: page index ${t} invalid, must be before current page index ${this.page_index} or the first incomplete page`)},next_page(){this.can_continue&&this.page&&(this.page.content&&this.page.content.getData?this.responses[this.page_index]=this.page.content.getData():(this.responses[this.page_index]=null,(0,y.E)(`ModalFromPages: page "${this.page.title}" content does not have getData() method`))),this.can_continue&&this.page_index<this.pages.length-1?this.page_index++:this.can_continue&&this.$emit("finish",this.responses)}}};const V=(0,M.Z)(S,[["render",o]]);var L=V,R={name:"DailySurvey",components:{ModalFromPages:L},data:()=>({pages:[{title:"Daily Survey",html:"<p>Thank you for taking the time to complete these questions. Your input helps us make this tool more widely avaliable to students and staff!</p>\n                 <br />\n                 <p>For each question, please select the answer that best describes your situation.</p>",submit_text:"Okay"},{title:"Uh oh!",html:"<p>This feature is still being implemented, thanks for checking it out!</p>",submit_text:"Will do!"}]}),methods:{saveResponses(t){(0,y.E)("Survey responses:",t),window.onbeforeunload=null,this.$router.push("/portal")}}};const j=(0,M.Z)(R,[["render",s]]);var P=j}}]);
//# sourceMappingURL=426.903c8f8f.js.map