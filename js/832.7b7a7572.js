"use strict";(self["webpackChunkmvtime"]=self["webpackChunkmvtime"]||[]).push([[832],{1832:function(s,e,a){a.r(e),a.d(e,{default:function(){return E}});var t=a(3396),l=a(7139),i=a(9242);const o=s=>((0,t.dD)("data-v-4b47726b"),s=s(),(0,t.Cn)(),s),n={class:"createclass"},r=o((()=>(0,t._)("header",{class:"modal_header"},[(0,t._)("h2",{class:"header_style modal_header_title"},"Edit class details")],-1))),c={class:"overlay_contents",ref:"contents"},d={key:0},_={class:"overlay_contents_text"},h={class:"inputs_row"},p={class:"class_period_container styled_obj"},u={class:"color_input_container styled_input",title:"Class Theme Color"},m={key:1,alt:"Loading Icon",class:"loading_icon"},g={class:"bottom_actions"},b=o((()=>(0,t._)("div",{class:"flex_spacer"},null,-1))),f=["disabled"],v=["disabled"];function y(s,e,a,o,y,w){return(0,t.wg)(),(0,t.iD)("main",n,[r,(0,t._)("div",c,[y.ready?((0,t.wg)(),(0,t.iD)("div",d,[(0,t._)("div",_,[(0,t.Uk)(" You're editing "),(0,t._)("span",{class:"class_name button_pointer_text",style:(0,l.j5)({"--color-class":y.original.color,"--color-class-alt":y.original.color+"2d"})},(0,l.zw)(`P${y.original.period} - ${y.original.name}`),5)]),(0,t._)("div",h,[(0,t._)("div",p,[(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>y.class_obj.period=s),class:"styled_input class_period",type:"number",min:"1",max:"8",step:"1",placeholder:"#"},null,512),[[i.nr,y.class_obj.period]])]),(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>y.class_obj.name=s),class:"styled_input class_name",type:"text",placeholder:"Name"},null,512),[[i.nr,y.class_obj.name]]),(0,t._)("div",u,[(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>y.class_obj.color=s),class:"color_input",type:"color",placeholder:"Class Color"},null,512),[[i.nr,y.class_obj.color]])])])])):((0,t.wg)(),(0,t.iD)("img",m))],512),(0,t._)("div",g,[(0,t._)("button",{class:"alt_action",onClick:e[3]||(e[3]=e=>{y.ready?w.share_class():s.$emit("close")})},(0,l.zw)(y.ready?"Share":"Close"),1),b,(0,t._)("button",{class:"leave_action primary_styled",onClick:e[4]||(e[4]=(...s)=>w.leave_class&&w.leave_class(...s)),disabled:!y.ready}," Leave ",8,f),(0,t._)("button",{class:(0,l.C_)(["continue_action",{loading_bg:y.loading}]),onClick:e[5]||(e[5]=(...s)=>w.update_class&&w.update_class(...s)),disabled:!y.ready||!w.changed||!y.class_obj.name||!y.class_obj.period}," Save class ",10,v)])])}a(7658);var w=a(8980),j=a(9529),C=a.n(j),$=a(1708),k=a(2745),O={name:"EditClassView",emits:["close"],mixins:[C()],data(){return{class_obj:{},original:{},loading:!1,ready:!1,ref:this.$route?.params?.ref}},computed:{store(){return(0,w.h)()},changed(){return JSON.stringify(this.class_obj)!=JSON.stringify(this.original)}},mounted(){this.$smoothReflow({el:this.$refs.contents,childTransitions:!0}),this.ref&&2==this.ref.split("~").length?(this.ref=this.ref.split("~").join("/"),this.get_class()):(new $.OO("Invalid class provided"),this.$emit("close"))},methods:{update_class(){this.loading=!0,this.store.update_class(this.ref,this.class_obj).then((()=>{this.$emit("close")})).catch((s=>{new $.OO("Something went wrong updating the class",2500),(0,k.E)("ðŸ”¥Couldn't update class",this.ref,s),this.loading=!1}))},get_class(){this.ready=!1,this.store.class_from_ref(this.ref).then((s=>{this.class_obj=s,this.original={...s},this.ready=!0})).catch((s=>{new $.OO("Couldn't find that class",2e3),(0,k.E)("ðŸ”¥Couldn't find class for edit",this.ref,s),this.$emit("close")}))},leave_class(){this.$router.push({name:"leave",params:{ref:this.$route?.params?.ref}})},async share_class(){if(navigator.share){let s=new URL("https://mvtt.app/portal/add/code/"+this.$route.params?.ref);navigator.share({title:`P${this.class_obj.period} - ${this.class_obj.name}`,text:"Join my class on MVTT!",url:s.href}).then((()=>new $.bF("Opened share dialog",1e3))).catch((s=>(0,k.E)("Error sharing",s)))}else navigator.clipboard?(navigator.clipboard.writeText(window.location.href),new $.OO("Sharing not supported, copied link to clipboard",2e3)):new $.PK("Sharing not supported",2e3)}}},x=a(89);const S=(0,x.Z)(O,[["render",y],["__scopeId","data-v-4b47726b"]]);var E=S}}]);
//# sourceMappingURL=832.7b7a7572.js.map