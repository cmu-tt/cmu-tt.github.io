"use strict";(self["webpackChunkmvtime"]=self["webpackChunkmvtime"]||[]).push([[2],{2002:function(t,e,s){s.r(e),s.d(e,{default:function(){return U}});var a=s(3396),r=s(7139);const i=t=>((0,a.dD)("data-v-33d27dc6"),t=t(),(0,a.Cn)(),t),n={class:"entercode"},o=i((()=>(0,a._)("header",{class:"modal_header"},[(0,a._)("h2",{class:"header_style modal_header_title"},"View Statistics")],-1))),l={class:"overlay_contents",ref:"contents"},c=i((()=>(0,a._)("div",{class:"overlay_contents_text"}," The daily surveys you have completed are displayed below. To view your individual responses, click on the data point. ",-1))),d=i((()=>(0,a._)("br",null,null,-1))),_={class:"stats_view_controls_wrapper"},u={class:"stats_view_controls"},h=["onClick"],v=i((()=>(0,a._)("span",{class:"flex_spacer"},null,-1))),p={class:"stats_view"},f=["onClick"],m=i((()=>(0,a._)("br",null,null,-1))),y={class:"overlay_contents_text"},w={class:"bottom_actions"},g=i((()=>(0,a._)("div",{class:"flex_spacer"},null,-1)));function k(t,e,s,i,k,b){const x=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("main",n,[o,(0,a._)("div",l,[c,d,(0,a._)("nav",_,[(0,a._)("div",u,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(k.filters,(t=>((0,a.wg)(),(0,a.iD)("button",{onClick:e=>k.filter=t.filter,class:(0,r.C_)(["stats_view_control__option",{active:k.filter==t.filter}]),key:t.filter},(0,r.zw)(t.name),11,h)))),128))]),v,(0,a._)("button",{class:"stats_view_control__refresh",onClick:e[0]||(e[0]=(...t)=>b.update&&b.update(...t))},"Update")]),(0,a._)("div",{class:(0,r.C_)(["stats_view_container alt_bg",{loading_bg:!k.is_ready}])},[k.surveys.length?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"stats_view_wrapper",style:(0,r.j5)({"--w-scale-stat":b.width_entry,"--h-scale-stat":b.height_mark})},[(0,a._)("div",p,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(k.surveys,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"stats_view__entry",key:e.id,style:(0,r.j5)({"--y-stat":k.filters[k.filter].data.scale(e.data.responses[k.filters[k.filter].data.index].data)-k.filters[k.filter].data.range.from,"--x-stat":e.data.index}),onClick:s=>t.open_survey(e)},null,12,f)))),128))])],4)):(0,a.kq)("",!0)],2),m,(0,a._)("div",y,[(0,a.Uk)(" We appreciate your contributions towards our research. If you have any questions, please "),(0,a.Wm)(x,{to:"/contact"},{default:(0,a.w5)((()=>[(0,a.Uk)("contact us")])),_:1}),(0,a.Uk)("! ")])],512),(0,a._)("div",w,[g,(0,a._)("button",{class:"continue_action",onClick:e[1]||(e[1]=e=>t.$emit("close"))},"Close")])])}var b=s(8980),x=s(1708),C={name:"StatsModal",emits:["close"],data(){return{is_ready:!1,surveys:[],filter:"stress",filters:{stress:{name:"Stress Level",filter:"stress",data:{index:1,range:{from:1,to:3},scale(t){return{positive:3,neutral:2,negative:1}[t.sentiment]}}},sentiment:{name:"Mood",filter:"sentiment",data:{index:2,range:{from:1,to:5},scale(t){return 5*t.sentiment/100}}},upcoming:{name:"Workload",filter:"upcoming",data:{index:4,range:{from:0,to:6},scale(t){return console.log("workload",t),Math.min(t.num||t.tasks?.length||0,6)}}}}}},computed:{store(){return(0,b.h)()},completed(){return this.store?.active_doc?.done_surveys||[]},width_entry(){const t=4;return Math.max(0,Math.round(Math.pow(10,t)/this.surveys.length)/Math.pow(10,t))},height_mark(){const t=4,e=this.filters[this.filter].data;return Math.round(Math.pow(10,t)/(e.range.to-e.range.from))/Math.pow(10,t)}},methods:{process(t){this.surveys=t.filter((t=>!t.error)),this.surveys.forEach(((t,e)=>{t.data.index=e})),this.is_ready=!0},update(){this.is_ready=!1,this.surveys=[],this.store.get_surveys(this.completed).then((t=>{this.process(t)})).catch((t=>{new x.PK("Failed to get statistics",t,5e3),this.is_ready=!0}))}},mounted(){this.update()}},M=s(89);const D=(0,M.Z)(C,[["render",k],["__scopeId","data-v-33d27dc6"]]);var U=D}}]);
//# sourceMappingURL=2.2ea48494.js.map