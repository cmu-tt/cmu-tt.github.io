"use strict";(self["webpackChunkmvtime"]=self["webpackChunkmvtime"]||[]).push([[277],{2277:function(e,n,s){s.r(n),s.d(n,{default:function(){return q}});var t=s(3396),l=s(7139),i=s(9242);const a=e=>((0,t.dD)("data-v-7c0035e9"),e=e(),(0,t.Cn)(),e),o={class:"settings"},c=a((()=>(0,t._)("header",{class:"modal_header"},[(0,t._)("h2",{class:"header_style modal_header_title"},"Account Preferences")],-1))),_={class:"overlay_contents"},d=a((()=>(0,t._)("div",{class:"overlay_contents_text"}," You can link a personal (non-mvla.net) account to access MVTT when not signed into your school account below! ",-1))),r={class:"inputs_row"},u={class:"styled_input styled_links_box"},h={class:"styled_links_display"},k={key:0,class:"placeholder"},m={key:1,class:"styled_line_links"},p=["onClick"],g=a((()=>(0,t._)("div",{class:"remove_icon"},null,-1))),v=[g],w={class:"styled_line_links__email"},y=a((()=>(0,t._)("hr",{class:"styled_links_separator"},null,-1))),b={class:"styled_links_add"},f=["disabled"],C=["disabled"],x=a((()=>(0,t._)("div",{class:"overlay_contents_text"},[(0,t.Uk)(" To change your theme, use the "),(0,t._)("span",{class:"button_pointer_text button_pointer_icon"},[(0,t._)("div",{class:"theme_icon icon"}),(0,t.Uk)(" Switch Theme ")]),(0,t.Uk)(" button on the left sidebar ")],-1))),D={class:"bottom_actions"},A=a((()=>(0,t._)("div",{class:"flex_spacer"},null,-1))),U=["disabled"];function $(e,n,s,a,g,$){return(0,t.wg)(),(0,t.iD)("div",o,[c,(0,t._)("div",_,[d,(0,t._)("div",r,[(0,t._)("div",u,[(0,t._)("div",h,[$.store.linked_accounts&&$.store.linked_accounts.length?((0,t.wg)(),(0,t.iD)("div",m,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)($.store.linked_accounts,(e=>((0,t.wg)(),(0,t.iD)("div",{class:(0,l.C_)(["styled_line_links__account",{active:$.store.personal_account&&$.store.user.email==e}]),key:e},[$.store.personal_account?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",{key:0,class:"styled_line_links__remove",onClick:n=>$.unlink_account(e),title:"Remove Account"},v,8,p)),(0,t._)("div",w,(0,l.zw)(e),1)],2)))),128))])):((0,t.wg)(),(0,t.iD)("span",k,"No linked accounts, add one below"))]),y,(0,t._)("div",b,[(0,t.wy)((0,t._)("input",{class:"styled_links_add__text",type:"email",onInput:n[0]||(n[0]=(...e)=>$.fix_email&&$.fix_email(...e)),onUpdate:n[1]||(n[1]=(...e)=>$.fix_email&&$.fix_email(...e)),"onUpdate:modelValue":n[2]||(n[2]=e=>g.new_email=e),placeholder:"Personal Email",disabled:$.store.personal_account||g.loading},null,40,f),[[i.nr,g.new_email]]),(0,t._)("button",{class:"styled_links_add__action",onClick:n[3]||(n[3]=(...e)=>$.link_account&&$.link_account(...e)),disabled:!$.ready_to_link},(0,l.zw)($.store.personal_account?"UNAVALIABLE":"Add"),9,C)])])]),x]),(0,t._)("div",D,[$.store.personal_account?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("button",{key:0,class:"back_action",onClick:n[4]||(n[4]=n=>e.$emit("close"))},(0,l.zw)(g.changed||g.loading?"Cancel":"Close"),1)),A,(0,t._)("button",{class:(0,l.C_)(["continue_action",{loading_bg:g.loading}]),disabled:!$.store.personal_account&&!g.changed,onClick:n[5]||(n[5]=n=>{$.store.personal_account?e.$emit("close"):$.save})},(0,l.zw)($.store.personal_account?"Close":"Finish"),11,U)])])}var z=s(8980),T={name:"SettingsModal",emits:["close"],data(){return{changed:!1,loading:!1,new_email:""}},computed:{store(){return(0,z.h)()},ready_to_link(){return!this.loading&&this.new_email&&this.new_email.includes("@")&&this.new_email.split("@")[1].includes(".")}},methods:{save(){this.loading||this.$emit("close")},link_account(){this.store.personal_account||(this.changed=!0,this.loading=!0,this.store.link_account(this.new_email).then((()=>{this.loading=!1,this.new_email=""})).catch((()=>{this.loading=!1,this.changed=!1})))},unlink_account(e){this.changed=!0,this.loading=!0,this.store.unlink_account(e).then((()=>{this.loading=!1})).catch((()=>{this.loading=!1,this.changed=!1}))},fix_email(){if(this.new_email.includes("@")){let[e,n]=this.new_email.split("@");e.includes("+")&&(e=e.split("+")[0],this.new_email=`${e}@${n}`)}}}},I=s(89);const V=(0,I.Z)(T,[["render",$],["__scopeId","data-v-7c0035e9"]]);var q=V}}]);
//# sourceMappingURL=277.043c6535.js.map