"use strict";(self["webpackChunkmvtime"]=self["webpackChunkmvtime"]||[]).push([[642],{1311:function(t,e,s){s.d(e,{l:function(){return n}});var a=s(1020);const i=[[/https:\/\/[a-zA-Z0-9]+.instructure.com\/courses\/[0-9]+\/modules*./,"Canvas Course Modules"],[/https:\/\/[a-zA-Z0-9]+.instructure.com\/courses\/[0-9]+\/assignments\/[0-9]+/,"Canvas Assignment"],[/https:\/\/[a-zA-Z0-9]+.instructure.com\/courses\/[0-9]+/,"Canvas Course"],[/https:\/\/[a-zA-Z0-9]+.instructure.com\/courses/,"Canvas Home"],[/https:\/\/[a-zA-Z0-9]+.instructure.com/,"Canvas"],[/https:\/\/classroom.google.com\/c\/[a-zA-Z0-9]+\/a\/.+/,"Google Classroom Assignment"],[/https:\/\/classroom.google.com\/c\/[a-zA-Z0-9]+\/p\/.+/,"Google Classroom Post"],[/https:\/\/classroom.google.com\/c\/[a-zA-Z0-9]+/,"Google Classroom Class"],[/https:\/\/classroom.google.com\/h/,"Google Classroom Home"],[/https:\/\/classroom.google.com\/u\/[0-9]+/,"Google Classroom Home"],[/https:\/\/drive.google.com\/file\/d\/.+/,"Google Drive File"],[/https:\/\/drive.google.com\/drawings\/d\/.+/,"Google Drawing"],[/https:\/\/docs.google.com\/document\/d\/.+/,"Google Docs File"],[/https:\/\/docs.google.com\/spreadsheets\/d\/.+/,"Google Sheet"],[/https:\/\/[a-zA-Z0-9]+.lon-capa.net.*/,"LON-CAPA Portal"],[/https:\/\/lon-capa.net.*/,"LON-CAPA Portal"],[/https:\/\/[a-zA-Z0-9]+.loncapa.net.*/,"LON-CAPA Portal"],[/https:\/\/loncapa.net.*/,"LON-CAPA Portal"]];function l(t){if(t){t=t.toLowerCase();for(let e=0;e<i.length;e++)if(t.match(i[e][0]))return i[e][1]}}const n=(0,a.Q_)({id:"magic",state:()=>({types:{note:"Note",task:"Assignment",test:"Test",project:"Project",quiz:"Quiz",exam:"Exam"}}),getters:{},actions:{text(t){return l(t)||null},type(t){const e="note"==t.type,s=((e?t.description:t.name)||"").toLowerCase();return s.includes("summative")&&!s.includes("assignment")||s.includes("formative")||s.includes("unit")&&s.includes("test")?"test":s.includes("project")?"project":s.includes("quiz")?"quiz":s.includes("exam")||s.includes("midterm")||s.includes("final")?"exam":s.length>=100||!s&&t.description&&t.description.length>=60?"note":s.length>=10&&s.length<50&&e||s.includes("assignment")?"task":void 0}}})},1642:function(t,e,s){s.r(e),s.d(e,{default:function(){return E}});var a=s(3396),i=s(7139),l=s(9242);const n=t=>((0,a.dD)("data-v-27fd84c9"),t=t(),(0,a.Cn)(),t),o={class:"create_task"},c={class:"modal_header"},r={class:"header_style modal_header_title"},d=["value"],p=["title"],_={class:"overlay_contents",ref:"contents"},h={class:"overlay_contents_text"},k={key:0},u={key:1},m={class:"inputs_row"},y=["placeholder","disabled"],w=n((()=>(0,a._)("div",{class:"flex-break"},null,-1))),g=["placeholder"],f=n((()=>(0,a._)("div",{class:"flex-break"},null,-1))),v={class:"styled_input styled_links_box"},x={class:"styled_links_display"},C={key:0,class:"placeholder"},b={key:1,class:"styled_line_links"},z=["onClick"],A=n((()=>(0,a._)("hr",{class:"styled_links_separator"},null,-1))),D={class:"styled_links_add"},$={class:"magic_wrapper styled_links_add__sized"},P=["disabled"],L={class:"overlay_contents_text"},U={class:"classes_checkboxes checkboxes"},O=["href"],Z=["id","value"],q=["for"],G=["for"],V={class:"bottom_actions"},j=n((()=>(0,a._)("div",{class:"flex_spacer"},null,-1))),H=["disabled"];function N(t,e,s,n,N,R){return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("header",c,[(0,a._)("h2",r,[(0,a._)("span",null,"Add a"+(0,i.zw)(R.is_vowel(R.type_full[0])?"n":"")+" ",1),(0,a._)("div",{class:(0,i.C_)(["header_magic_wrapper magic_wrapper contents_inherit",{magic_ready:R.magic_type}])},[(0,a.wy)((0,a._)("select",{title:"Task type","onUpdate:modelValue":e[0]||(e[0]=t=>N.task.type=t),class:"type_dropdown styled_input styled_select",ref:"type"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Object.entries(R.magic.types),(t=>((0,a.wg)(),(0,a.iD)("option",{class:"type_dropdown__option styled_select__option",value:t[0],key:t[0]},(0,i.zw)(t[1]),9,d)))),128))],512),[[l.bM,N.task.type]]),(0,a._)("div",{class:(0,i.C_)(["magic magic_in styled_magic click-action",{magic_out:!R.magic_type}]),onClick:e[1]||(e[1]=t=>N.task.type=R.magic_type),title:"Use automatic type"+(R.magic_type?" ("+R.magic_type+")":"")},null,10,p)],2)])]),(0,a._)("div",_,[(0,a._)("div",h,[R.is_note?((0,a.wg)(),(0,a.iD)("span",k,"Add a new "+(0,i.zw)(N.task.type)+" to",1)):((0,a.wg)(),(0,a.iD)("span",u,"Schedule a new "+(0,i.zw)(N.task.type)+" for",1)),(0,a.Uk)(" your class"+(0,i.zw)(R.classes&&1==R.classes.length?"":"es"),1)]),(0,a._)("div",m,[R.is_note?(0,a.kq)("",!0):(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:0,"onUpdate:modelValue":e[2]||(e[2]=t=>N.task.name=t),class:"styled_input",type:"text",placeholder:R.type_full+" Name",disabled:R.is_note},null,8,y)),[[l.nr,N.task.name]]),(0,a.wy)((0,a._)("input",{type:"date",ref:"date",class:"styled_input input_task__date","onUpdate:modelValue":e[3]||(e[3]=t=>N.task.date=t),style:(0,i.j5)({maxWidth:R.is_note?"100%":null})},null,4),[[l.nr,N.task.date]]),w,(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":e[4]||(e[4]=t=>N.task.description=t),class:"styled_input styled_textarea task_description",type:"text",placeholder:R.type_full+(R.is_note?" Contents":" Description (Optional)")},"\r\n        ",8,g),[[l.nr,N.task.description]]),f,(0,a._)("div",v,[(0,a._)("div",x,[N.task.links&&N.task.links.length?((0,a.wg)(),(0,a.iD)("div",b,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(N.task.links,(t=>((0,a.wg)(),(0,a.iD)("a",{class:"styled_line_links__link styled_line_links__remove",target:"_blank",key:t.path,onClick:e=>R.remove_link(t)},(0,i.zw)(t.text),9,z)))),128))])):((0,a.wg)(),(0,a.iD)("span",C,(0,i.zw)(R.type_full)+" Links (Optional)",1))]),A,(0,a._)("div",D,[(0,a.wy)((0,a._)("input",{class:"styled_links_add__path",type:"url","onUpdate:modelValue":e[5]||(e[5]=t=>N.newlink.path=t),onBlur:e[6]||(e[6]=(...t)=>R.fix_newlink_path&&R.fix_newlink_path(...t)),placeholder:"Link URL (https://example.com)"},null,544),[[l.nr,N.newlink.path]]),(0,a._)("div",$,[(0,a.wy)((0,a._)("input",{class:"styled_links_add__text",type:"text","onUpdate:modelValue":e[7]||(e[7]=t=>N.newlink.text=t),placeholder:"Link Text (what students see)"},null,512),[[l.nr,N.newlink.text]]),N.newlink.path&&R.magic.text(N.newlink.path)&&R.magic.text(N.newlink.path)!=N.newlink.text?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"magic styled_magic click-action",onClick:e[8]||(e[8]=t=>N.newlink.text=R.magic.text(N.newlink.path)),title:"Auto-generate link text"})):(0,a.kq)("",!0)]),(0,a._)("button",{class:"styled_links_add__action",onClick:e[9]||(e[9]=(...t)=>R.add_newlink&&R.add_newlink(...t)),disabled:R.newlink_not_ready}," Add ",8,P)])])]),(0,a._)("div",L," Choose which classes this "+(0,i.zw)(N.task.type)+" will be added to ",1),(0,a._)("div",U,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(R.classes,(s=>((0,a.wg)(),(0,a.iD)("a",{class:"checkbox",key:s.id,href:"/view/"+R.store.path_to_ref(s.ref)},[(0,a.wy)((0,a._)("input",{type:"checkbox",id:s.id,value:s.id,"onUpdate:modelValue":e[10]||(e[10]=t=>N.task_classes=t)},null,8,Z),[[l.e8,N.task_classes]]),s.period?((0,a.wg)(),(0,a.iD)("label",{key:0,class:"button_pointer_text class_name",for:s.id,style:(0,i.j5)({"--color-class":s.color,"--color-class-alt":s.color+"2d"})}," P"+(0,i.zw)(s.period)+" - "+(0,i.zw)(s.name),13,q)):((0,a.wg)(),(0,a.iD)("label",{key:1,for:s.id,onClick:e[11]||(e[11]=(...e)=>t.$event.stopPropagation&&t.$event.stopPropagation(...e))},(0,i.zw)(s.name),9,G))],8,O)))),128))])],512),(0,a._)("div",V,[(0,a._)("button",{class:"close_action click_escape",onClick:e[12]||(e[12]=e=>t.$emit("close"))},"Close"),j,(0,a._)("button",{class:(0,i.C_)(["continue_action click_ctrlenter",{loading_bg:N.loading}]),onClick:e[13]||(e[13]=(...t)=>R.try_submit&&R.try_submit(...t)),disabled:!R.ready}," Add "+(0,i.zw)(N.task.type),11,H)])])}s(7658);var R=s(8980),K=s(1311),T=s(2745),Y=s(1708),F=s(9529),M=s.n(F),Q={name:"CreateTaskView",emits:["close"],mixins:[M()],mounted(){this.$smoothReflow({el:this.$refs.contents}),this.$route?.params?.tasktype?this.$refs.date.focus():this.$refs.type.focus()},data(){return{task:{name:"",date:this.$route.query?.date?this.$route.query.date:"",description:"",type:this.$route.params.tasktype?this.$route.params.tasktype:"task"},task_classes:this.$route.query?.class?[this.$route.query.class]:[],newlink:{text:"",path:""},loading:!1}},computed:{ready(){return(this.task.name||this.is_note)&&this.task.date&&this.task_classes.length&&(!this.is_note||this.task.description)},type_full(){return this.get_type(this.task.type)},newlink_not_ready(){if(!this.newlink.path||!this.newlink.text)return!0;try{return new URL(this.newlink.path),!1}catch(t){return!0}},class_name(){if(!this.classes)return null;let t=this.classes.find((t=>t.id===this.class_id));return t?t.name:null},store(){return(0,R.h)()},magic(){return(0,K.l)()},classes(){return this.store.classes},is_note(){return"note"===this.task.type},magic_type(){return this.magic.type(this.task)!=this.task.type&&this.magic.type(this.task)}},methods:{try_submit(){this.ready?this.create_task():new Y.OO("Please fill out all required fields",1e3)},get_type(t=this.task.type){return this.magic.types[t]||t},is_vowel(t){return["a","e","i","o","u"].includes(t.toLowerCase())},add_newlink(){this.task.links||(this.task.links=[]),this.newlink.path=new URL(this.newlink.path).href,this.task.links.push(this.newlink),this.newlink={text:"",path:""}},create_task(){this.newlink_not_ready?(this.loading=!0,this.store.create_task(this.task,this.task_classes).then((()=>{
//! router to new task view?
this.$emit("close")})).catch((t=>{this.loading=!1,T.i2.error(`📃 Couldn't create ${this.task.type||"task"}:`,t),new Y.PK("Couldn't create task",t,2e3)}))):new Y.OO("Don't forget to to click the 'Add' button to add your link!",2e3)},remove_link(t){this.task.links=this.task.links.filter((e=>e.path!==t.path)),this.newlink=t},fix_newlink_path(){if(this.newlink.path&&this.newlink.path.includes("."))try{this.newlink.path=new URL(this.newlink.path).href}catch(t){this.newlink.path="https://"+this.newlink.path,this.fix_newlink_path()}}},watch:{"task.type"(t,e){"note"==t?(this.task.description=this.task.description||this.task.name,this.task.name=""):"note"==e&&this.task.description?.length<=35&&(this.task.name=this.task.description,this.task.description="")}}},S=s(89);const B=(0,S.Z)(Q,[["render",N],["__scopeId","data-v-27fd84c9"]]);var E=B}}]);
//# sourceMappingURL=642.987f2243.js.map