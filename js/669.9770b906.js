"use strict";(self["webpackChunkmvtime"]=self["webpackChunkmvtime"]||[]).push([[669],{1311:function(s,e,t){t.d(e,{l:function(){return i}});var a=t(1020);const o=[[/https:\/\/[a-zA-Z0-9]+.instructure.com\/courses\/[0-9]+\/modules*./,"Canvas Course Modules"],[/https:\/\/[a-zA-Z0-9]+.instructure.com\/courses\/[0-9]+\/assignments\/[0-9]+/,"Canvas Assignment"],[/https:\/\/[a-zA-Z0-9]+.instructure.com\/courses\/[0-9]+/,"Canvas Course"],[/https:\/\/[a-zA-Z0-9]+.instructure.com\/courses/,"Canvas Home"],[/https:\/\/[a-zA-Z0-9]+.instructure.com/,"Canvas"],[/https:\/\/classroom.google.com\/c\/[a-zA-Z0-9]+\/a\/.+/,"Google Classroom Assignment"],[/https:\/\/classroom.google.com\/c\/[a-zA-Z0-9]+\/p\/.+/,"Google Classroom Post"],[/https:\/\/classroom.google.com\/c\/[a-zA-Z0-9]+/,"Google Classroom Class"],[/https:\/\/classroom.google.com\/h/,"Google Classroom Home"],[/https:\/\/classroom.google.com\/u\/[0-9]+/,"Google Classroom Home"],[/https:\/\/drive.google.com\/file\/d\/.+/,"Google Drive File"],[/https:\/\/drive.google.com\/drawings\/d\/.+/,"Google Drawing"],[/https:\/\/docs.google.com\/document\/d\/.+/,"Google Docs File"],[/https:\/\/docs.google.com\/spreadsheets\/d\/.+/,"Google Sheet"],[/https:\/\/[a-zA-Z0-9]+.lon-capa.net.*/,"LON-CAPA Portal"],[/https:\/\/lon-capa.net.*/,"LON-CAPA Portal"],[/https:\/\/[a-zA-Z0-9]+.loncapa.net.*/,"LON-CAPA Portal"],[/https:\/\/loncapa.net.*/,"LON-CAPA Portal"]];function l(s){if(s){s=s.toLowerCase();for(let e=0;e<o.length;e++)if(s.match(o[e][0]))return o[e][1]}}const i=(0,a.Q_)({id:"magic",state:()=>({types:{note:"Note",task:"Assignment",test:"Test",project:"Project",quiz:"Quiz",exam:"Exam"}}),getters:{},actions:{text(s){return l(s)||null},type(s){const e="note"==s.type,t=((e?s.description:s.name)||"").toLowerCase();return t.includes("summative")&&!t.includes("assignment")||t.includes("formative")||t.includes("unit")&&t.includes("test")?"test":t.includes("project")?"project":t.includes("quiz")?"quiz":t.includes("exam")||t.includes("midterm")||t.includes("final")?"exam":t.length>=100||!t&&s.description&&s.description.length>=60?"note":t.length>=10&&t.length<50&&e||t.includes("assignment")?"task":void 0}}})},9798:function(s,e,t){t.d(e,{Z:function(){return y}});var a=t(3396),o=t(7139);const l=["title"],i=(0,a._)("div",{class:"task_card_icon_container"},[(0,a._)("div",{class:"task_card_icon_container__img"})],-1),n=[i],c={class:"task_card_details"},r={class:"task_card_details__title"},_={class:"task_card_details__extended"},d={class:"task_card_details__extended__date"},u={class:"task_card_details__extended__type"};function p(s,e,t,i,p,m){return(0,a.wg)(),(0,a.iD)("a",{class:"task_card",style:(0,o.j5)({"--color-calendar-task":t.task.color})},[(0,a._)("div",{class:"task_card_icon",title:t.task.class_name},n,8,l),(0,a._)("div",c,[(0,a._)("div",r,(0,o.zw)(t.task.name),1),(0,a._)("div",_,[(0,a._)("span",d,(0,o.zw)(t.task.date.toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"})),1),(0,a.Uk)(" Â |Â  "),(0,a._)("span",u,(0,o.zw)(m.type_full),1)])])],4)}var m=t(1311),h={name:"ExamCard",props:{task:{type:Object,required:!0}},computed:{type_full(){return(0,m.l)().types[this.task.type]}}},g=t(89);const v=(0,g.Z)(h,[["render",p]]);var y=v},9669:function(s,e,t){t.r(e),t.d(e,{default:function(){return is}});var a=t(3396),o=t(7139);const l=s=>((0,a.dD)("data-v-35c20131"),s=s(),(0,a.Cn)(),s),i={class:"viewclass"},n={class:"modal_header",ref:"title"},c=l((()=>(0,a._)("h2",{class:"header_style modal_header_title"},"View class details",-1))),r=[c],_={ref:"contents",class:"overlay_contents"},d={key:0,ref:"text_contents"},u={class:"spaced_contents"},p={class:"styled_obj"},m=l((()=>(0,a._)("span",{class:"styled_line__label"},"Class:",-1))),h=l((()=>(0,a._)("span",{class:"styled_line__separator"},null,-1))),g={class:"styled_line__value"},v=["href"],y={class:"styled_obj"},f=l((()=>(0,a._)("span",{class:"styled_line__label"},"Period:",-1))),k=l((()=>(0,a._)("span",{class:"styled_line__separator"},null,-1))),b={class:"styled_line__value"},w={class:"styled_obj"},C=l((()=>(0,a._)("span",{class:"styled_line__label"},"Name:",-1))),j=l((()=>(0,a._)("span",{class:"styled_line__separator"},null,-1))),$={class:"styled_line__value"},A={class:"styled_obj"},O=l((()=>(0,a._)("span",{class:"styled_line__label"},"Description:",-1))),z=l((()=>(0,a._)("span",{class:"styled_line__separator"},null,-1))),D=["innerHTML"],x={class:"styled_obj upcoming_section",ref:"upcoming"},q=l((()=>(0,a._)("span",{class:"styled_line__label"},"Upcoming:",-1))),L=l((()=>(0,a._)("span",{class:"styled_line__separator"},null,-1))),P={key:0,class:"load_text"},Z={key:1,class:"upcoming_tasks_container"},G={key:0,class:"upcoming_tasks_loading"},N=l((()=>(0,a._)("img",{alt:"Loading Icon",class:"loading_icon",src:"/assets/loading.svg"},null,-1))),E=[N],H={key:1,class:"upcoming_tasks"},T={key:2},I=l((()=>(0,a._)("div",{class:"overlay_contents_text"}," Information is provided by teachers and volunteer students, and may not always be correct ",-1))),S={key:1,ref:"loading_contents",alt:"Loading Icon",class:"loading_icon"},M={class:"bottom_actions"},R=l((()=>(0,a._)("div",{class:"flex_spacer"},null,-1))),U=["disabled"],V=["disabled"],F=["disabled"];function K(s,e,t,l,c,N){const K=(0,a.up)("ExamCard");return(0,a.wg)(),(0,a.iD)("main",i,[(0,a._)("header",n,r,512),(0,a._)("div",_,[c.ready?((0,a.wg)(),(0,a.iD)("div",d,[(0,a._)("div",u,[(0,a._)("div",p,[m,h,(0,a._)("span",g,[(0,a._)("a",{class:"class_name button_pointer_text",href:`/view/${this.$route.params.ref}`,onClick:e[0]||(e[0]=s=>s.preventDefault()),style:(0,o.j5)({"--color-class":c.class_obj.color,"--color-class-alt":c.class_obj.color+"2d"})},"P"+(0,o.zw)(c.class_obj.period)+" - "+(0,o.zw)(c.class_obj.name),13,v)])]),(0,a._)("div",y,[f,k,(0,a._)("span",b,(0,o.zw)(c.class_obj.period)+" (Schedules "+(0,o.zw)(c.schedules[c.class_obj.period%2].join(", "))+")",1)]),(0,a._)("div",w,[C,j,(0,a._)("span",$,(0,o.zw)(c.class_obj.name),1)]),(0,a._)("div",A,[O,z,(0,a._)("span",{class:"styled_line__value",innerHTML:N.text||"Not Provided"},null,8,D)]),(0,a._)("div",x,[q,L,(0,a._)("span",{onClick:e[1]||(e[1]=(...s)=>N.get_upcoming&&N.get_upcoming(...s)),class:(0,o.C_)(["styled_line__value alt_bg",{loading_clickable:!c.upcoming&&!c.loading_upcoming,loading_bg:c.loading_upcoming}])},[c.upcoming||c.loading_upcoming?c.loading_upcoming?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",Z,[c.loading_upcoming?((0,a.wg)(),(0,a.iD)("div",G,E)):c.upcoming&&c.upcoming.length?((0,a.wg)(),(0,a.iD)("div",H,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.upcoming,(s=>((0,a.wg)(),(0,a.j4)(K,{class:"upcoming_tasks__task",task:s,key:s.name,href:`/view/${s.ref}`,onClick:e=>{e.preventDefault(),N.show_task(s.ref)}},null,8,["task","href","onClick"])))),128))])):((0,a.wg)(),(0,a.iD)("span",T,"No Upcoming Tasks"))])):((0,a.wg)(),(0,a.iD)("span",P,"Click to Load"))],2)],512)]),I],512)):((0,a.wg)(),(0,a.iD)("img",S,null,512))],512),(0,a._)("div",M,[(0,a._)("button",{class:"close_action click_escape",onClick:e[2]||(e[2]=e=>s.$emit("close"))},"Close"),R,(0,a._)("button",{class:"share_action primary_styled",onClick:e[3]||(e[3]=(...s)=>N.share_class&&N.share_class(...s)),disabled:!c.ready}," Share ",8,U),N.editable?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"edit_action primary_styled",disabled:!c.ready,onClick:e[4]||(e[4]=(...s)=>N.edit_class&&N.edit_class(...s))}," Edit ",8,V)):N.store.user&&c.class_obj?((0,a.wg)(),(0,a.iD)("button",{key:1,class:(0,o.C_)(["join_leave_action primary_styled",{click_escape:N.joinable}]),disabled:!c.ready,onClick:e[5]||(e[5]=s=>{N.joinable?N.join_class():N.leave_class()})},(0,o.zw)(N.joinable?"Join":"Leave"),11,F)):(0,a.kq)("",!0)])])}t(7658);var Q=t(1708),B=t(2745),J=t(8980),Y=t(9529),W=t.n(Y),X=t(4478),ss=t.n(X),es=t(9798);let ts=new(ss().Converter);var as={name:"ViewClassView",emits:["close"],mixins:[W()],components:{ExamCard:es.Z},data(){return{class_obj:null,ready:!1,loading_upcoming:!1,upcoming:null,schedules:[["A","G","C","D","and H"],["A","G","B","E","and I"]]}},computed:{store(){return(0,J.h)()},text(){return this.class_obj?.description&&ts.makeHtml(this.class_obj?.description)},joinable(){return this.store.user&&this.class_obj&&!this.store?.active_doc?.classes?.includes(this.store.ref_to_path(this.$route.params.ref))},editable(){return this.store.is_teacher&&this.store.user&&this.class_obj&&this.$route.params.ref&&this.$route.params.ref.split("~")[0]==this.store.active_doc.email.replace(this.store.ORG_DOMAIN,"")}},mounted(){this.$smoothReflow({el:this.$refs.contents,hideOverflow:!1,childTransitions:!1}),this.$smoothReflow({el:this.$refs.title,hideOverflow:!0}),this.get_class()},methods:{async share_class(){let s=new URL("https://view.mvtt.app/"+this.$route.params.ref);navigator.share?navigator.share({title:this.class_obj.name,text:`Check out ${this.class_obj.name||"this class"} on MVTT!`,url:s.href}).then((()=>new Q.bF("Opened share dialog",1e3))).catch((s=>B.i2.error("ðŸ”¥ Error sharing",s))):navigator.clipboard?(navigator.clipboard.writeText(s.href),new Q.OO("Sharing not supported, copied link to clipboard",2e3)):new Q.OO("Sharing and copying not supported, sorry",2e3)},edit_class(){this.$router.push({name:"editclass",params:{ref:this.$route?.params?.ref},query:this.$route.query})},join_class(){this.$router.push({name:"refclass",params:{ref:this.$route?.params?.ref},query:this.$route.query})},leave_class(){this.$router.push({name:"leave",params:{ref:this.$route?.params?.ref},query:this.$route.query})},async get_upcoming(){null==this.upcoming&&(this.loading_upcoming=!0,this.store.upcoming_from_ref(this.$route.params.ref.split("~").join("/"),this.class_obj).then((s=>{this.upcoming=s,this.loading_upcoming=!1})).catch((s=>{new Q.OO("Couldn't get upcoming tasks",2e3),B.i2.error("âš  Couldn't get upcoming tasks",s),this.loading_upcoming=!1})))},async get_class(){if(!this.$route.params.ref)return new Q.OO("No class specified",1500),void this.$emit("close");const s=this.$route.params.ref.split("~").join("/");return s?2!=s.split("/").length?(new Q.OO("Invalid class specified",1500),void this.$emit("close")):void this.store.class_from_ref(s).then((s=>{s?(this.class_obj=s,this.ready=!0):(new Q.OO("Couldn't find that class",2e3),this.$emit("close"))})).catch((s=>{new Q.PK("Error getting class",s,1500),B.i2.error("âš  Error getting class",s),this.$emit("close")})):(new Q.OO("No class specified",1500),void this.$emit("close"))},show_task(s){this.$router.push({name:"viewtask",params:{ref:s},query:this.$route.query})}}},os=t(89);const ls=(0,os.Z)(as,[["render",K],["__scopeId","data-v-35c20131"]]);var is=ls}}]);
//# sourceMappingURL=669.9770b906.js.map