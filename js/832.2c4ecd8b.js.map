{"version":3,"file":"js/832.2c4ecd8b.js","mappings":"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","sources":["webpack://mvtime/./src/views/Portal/AddClass.vue","webpack://mvtime/./src/views/Portal/AddClass.vue?f820"],"sourcesContent":["<template>\r\n  <main class=\"addclass\">\r\n    <header class=\"modal_header\">\r\n      <h2 class=\"header_style modal_header_title\">Add a Class</h2>\r\n    </header>\r\n    <div class=\"overlay_contents\">\r\n      <div class=\"overlay_contents_text\">\r\n        <span v-if=\"is_join\">Joining from your teacher's class code</span>\r\n        <span v-else>Join a new class</span>\r\n      </div>\r\n      <div class=\"inputs_row\">\r\n        <input\r\n          v-model=\"teacher_email\"\r\n          ref=\"teacher_email\"\r\n          class=\"styled_input\"\r\n          type=\"text\"\r\n          placeholder=\"Teacher's Email\"\r\n        />\r\n        <select\r\n          v-model=\"class_id\"\r\n          class=\"styled_input\"\r\n          :disabled=\"!classes || !classes.length\"\r\n          :class=\"{ loading_bg: loading && teacher_email }\"\r\n        >\r\n          <option\r\n            v-for=\"class_obj in classes\"\r\n            :value=\"class_obj.id\"\r\n            :key=\"class_obj.id\"\r\n            :disabled=\"class_obj.is_joined\"\r\n          >\r\n            <span v-if=\"class_obj.is_joined\">[JOINED]</span>\r\n            P{{ class_obj.period }} - {{ class_obj.name }}\r\n          </option>\r\n          <option v-if=\"teacher_email && !classes\" value=\"\" disabled hidden selected>\r\n            {{ loading ? \"Loading...\" : \"No classes found\" }}\r\n          </option>\r\n          <option v-else value=\"\" disabled hidden selected>\r\n            {{ teacher_email && classes ? \"Select a Class\" : \"\" }}\r\n          </option>\r\n        </select>\r\n      </div>\r\n      <div class=\"overlay_contents_text\">\r\n        <span v-if=\"is_join\"\r\n          >If you're having trouble, ask your teacher to share their class code again using the\r\n          <span class=\"button_pointer_text\">Share</span> button on the class edit page\r\n        </span>\r\n        <span v-else>Enter your teacher's email above to see their classes</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"bottom_actions\">\r\n      <button class=\"close_action\" @click=\"$emit('close')\">Close</button>\r\n      <div class=\"flex_spacer\"></div>\r\n      <button\r\n        class=\"continue_action\"\r\n        @click=\"add_class\"\r\n        :disabled=\"!teacher_email || !class_id\"\r\n        :class=\"{ loading_bg: adding }\"\r\n      >\r\n        Add Class\r\n      </button>\r\n    </div>\r\n  </main>\r\n</template>\r\n\r\n<script>\r\n/**\r\n * Component for adding a class to the user's dashboard / ClassList.\r\n *\r\n * @module AddClassView\r\n * @description Modal that allows the user to add a class to their dashboard.\r\n * @requires module:store/MainStore\r\n * @emits {Function} close - An event emitted when the class is added or the modal is closed.\r\n */\r\nimport { useMainStore } from \"@/store\";\r\nimport { _statuslog } from \"../../common\";\r\nimport { ErrorToast, WarningToast, SuccessToast } from \"@svonk/util\";\r\nexport default {\r\n  name: \"AddClassView\",\r\n  emits: [\"close\"],\r\n  data() {\r\n    return {\r\n      teacher_email: \"\",\r\n      class_id: \"\",\r\n      adding: false,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.$refs.teacher_email.focus();\r\n    // if ref is provided, set email and class_id\r\n    this.use_ref();\r\n  },\r\n  computed: {\r\n    class_obj() {\r\n      if (!this.classes) return null;\r\n      return this.classes.find((class_obj) => class_obj.id === this.class_id) || {};\r\n    },\r\n    loading() {\r\n      return this.store.loaded_email !== this.teacher_email;\r\n    },\r\n    classes() {\r\n      if (!this.teacher_email) {\r\n        return null;\r\n      } else if (this.teacher_email === this.store.loaded_email) {\r\n        return this.store.loaded_classes;\r\n      }\r\n      // commit store fetch_classes_by_email with teacher_email\r\n      this.store.fetch_classes_by_email(this.teacher_email);\r\n\r\n      return null;\r\n    },\r\n    store() {\r\n      return useMainStore();\r\n    },\r\n    is_join() {\r\n      return this.$route?.name == \"joinclass\";\r\n    },\r\n  },\r\n  methods: {\r\n    async add_class() {\r\n      this.adding = true;\r\n      this.store\r\n        .add_class(this.teacher_email, this.class_id, this.class_obj.name, this.class_obj.period)\r\n        .then(() => {\r\n          this.$emit(\"close\");\r\n          return Promise.resolve();\r\n        })\r\n        .catch(() => {\r\n          this.adding = false;\r\n          return Promise.reject();\r\n        });\r\n    },\r\n    async use_ref() {\r\n      const ref = this.$route.params?.ref;\r\n      if (ref && this.is_join) {\r\n        _statuslog(\"🔍 Attempting to use class join ref\", ref);\r\n        let [_email, _id] = ref.split(\"~\");\r\n        _email += \"@mvla.net\";\r\n        this.teacher_email = _email;\r\n        this.store.fetch_classes_by_email(_email);\r\n        while (this.store.loaded_email !== _email) {\r\n          await new Promise((resolve) => setTimeout(resolve, 100));\r\n        }\r\n\r\n        let found =\r\n          this.store.loaded_classes &&\r\n          this.store.loaded_classes.find((class_obj) => class_obj.id === _id);\r\n        if (found) {\r\n          if (found.is_joined) {\r\n            new WarningToast(\"You've already joined that class\", 3000);\r\n            _statuslog(\"🔥 Already joined class\", ref);\r\n            this.$emit(\"close\");\r\n          } else {\r\n            this.class_id = _id;\r\n            this.add_class()\r\n              .then(() => {\r\n                new SuccessToast(\"Successfully joined class\", 2000);\r\n                _statuslog(\"🎉 Successfully joined class\", ref);\r\n              })\r\n              .catch((err) => {\r\n                new ErrorToast(\"Something went wrong joining that class\", err, 3000);\r\n                _statuslog(\"🔥 Couldn't join class from ref\", ref);\r\n                this.to_normal_add();\r\n              });\r\n          }\r\n        } else {\r\n          new WarningToast(\"Couldn't find that class\", 3000);\r\n          _statuslog(\"🔥 Couldn't find class for join ref\", ref);\r\n          this.to_normal_add();\r\n        }\r\n      }\r\n    },\r\n    to_normal_add() {\r\n      this.$router.push({ name: \"addclass\" });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n","import { render } from \"./AddClass.vue?vue&type=template&id=18a4977d\"\nimport script from \"./AddClass.vue?vue&type=script&lang=js\"\nexport * from \"./AddClass.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\sande\\\\Documents\\\\GitHub\\\\mvtime.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","value","disabled","hidden","selected","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","$options","is_join","_hoisted_5","_hoisted_6","_hoisted_7","$data","teacher_email","$event","ref","type","placeholder","class_id","_normalizeClass","loading_bg","loading","classes","length","_Fragment","_renderList","class_obj","id","key","is_joined","_hoisted_10","_toDisplayString","period","name","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","onClick","_cache","_ctx","$emit","_hoisted_18","adding","args","add_class","_hoisted_19","emits","data","mounted","this","$refs","focus","use_ref","computed","find","store","loaded_email","loaded_classes","fetch_classes_by_email","useMainStore","$route","methods","async","then","Promise","resolve","catch","reject","params","_statuslog","_email","_id","split","setTimeout","found","WarningToast","SuccessToast","err","ErrorToast","to_normal_add","$router","push","__exports__","render"],"sourceRoot":""}