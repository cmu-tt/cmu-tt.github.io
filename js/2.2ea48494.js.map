{"version":3,"file":"js/2.2ea48494.js","mappings":"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","sources":["webpack://mvtime/./src/views/Portal/StatsModal.vue","webpack://mvtime/./src/views/Portal/StatsModal.vue?f9cd"],"sourcesContent":["<template>\r\n  <main class=\"entercode\">\r\n    <header class=\"modal_header\">\r\n      <h2 class=\"header_style modal_header_title\">View Statistics</h2>\r\n    </header>\r\n    <div class=\"overlay_contents\" ref=\"contents\">\r\n      <div class=\"overlay_contents_text\">\r\n        The daily surveys you have completed are displayed below. To view your individual responses,\r\n        click on the data point.\r\n      </div>\r\n      <br />\r\n      <nav class=\"stats_view_controls_wrapper\">\r\n        <div class=\"stats_view_controls\">\r\n          <button\r\n            @click=\"filter = tag.filter\"\r\n            class=\"stats_view_control__option\"\r\n            v-for=\"tag in filters\"\r\n            :key=\"tag.filter\"\r\n            :class=\"{ active: filter == tag.filter }\"\r\n          >\r\n            {{ tag.name }}\r\n          </button>\r\n        </div>\r\n        <span class=\"flex_spacer\"></span>\r\n        <button class=\"stats_view_control__refresh\" @click=\"update\">Update</button>\r\n      </nav>\r\n      <div class=\"stats_view_container alt_bg\" :class=\"{ loading_bg: !is_ready }\">\r\n        <div\r\n          class=\"stats_view_wrapper\"\r\n          v-if=\"surveys.length\"\r\n          :style=\"{\r\n            '--w-scale-stat': width_entry,\r\n            '--h-scale-stat': height_mark,\r\n          }\"\r\n        >\r\n          <div class=\"stats_view\">\r\n            <div\r\n              class=\"stats_view__entry\"\r\n              v-for=\"survey in surveys\"\r\n              :key=\"survey.id\"\r\n              :style=\"{\r\n                '--y-stat':\r\n                  filters[filter].data.scale(\r\n                    survey.data.responses[filters[filter].data.index].data\r\n                  ) - filters[filter].data.range.from,\r\n                '--x-stat': survey.data.index,\r\n              }\"\r\n              @click=\"open_survey(survey)\"\r\n            ></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <br />\r\n      <div class=\"overlay_contents_text\">\r\n        We appreciate your contributions towards our research. If you have any questions, please\r\n        <router-link to=\"/contact\">contact us</router-link>!\r\n      </div>\r\n    </div>\r\n    <div class=\"bottom_actions\">\r\n      <!-- <button class=\"close_action\" @click=\"$emit('close')\">Close</button> -->\r\n      <div class=\"flex_spacer\"></div>\r\n      <button class=\"continue_action\" @click=\"$emit('close')\">Close</button>\r\n    </div>\r\n  </main>\r\n</template>\r\n\r\n<script>\r\nimport { useMainStore } from \"@/store\";\r\nimport { ErrorToast } from \"@svonk/util\";\r\nexport default {\r\n  name: \"StatsModal\",\r\n  emits: [\"close\"],\r\n  data() {\r\n    return {\r\n      is_ready: false,\r\n      surveys: [],\r\n      filter: \"stress\",\r\n      filters: {\r\n        stress: {\r\n          name: \"Stress Level\",\r\n          filter: \"stress\",\r\n          data: {\r\n            index: 1,\r\n            range: {\r\n              from: 1,\r\n              to: 3,\r\n            },\r\n            scale(data) {\r\n              return { positive: 3, neutral: 2, negative: 1 }[data.sentiment];\r\n            },\r\n          },\r\n        },\r\n        sentiment: {\r\n          name: \"Mood\",\r\n          filter: \"sentiment\",\r\n          data: {\r\n            index: 2,\r\n            range: {\r\n              from: 1,\r\n              to: 5,\r\n            },\r\n            scale(data) {\r\n              return (data.sentiment * 5) / 100;\r\n            },\r\n          },\r\n        },\r\n        upcoming: {\r\n          name: \"Workload\",\r\n          filter: \"upcoming\",\r\n          data: {\r\n            index: 4,\r\n            range: {\r\n              from: 0,\r\n              to: 6,\r\n            },\r\n            scale(data) {\r\n              console.log(\"workload\", data);\r\n              return Math.min(data.num || data.tasks?.length || 0, 6);\r\n            },\r\n          },\r\n        },\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    store() {\r\n      return useMainStore();\r\n    },\r\n    completed() {\r\n      return this.store?.active_doc?.done_surveys || [];\r\n    },\r\n    width_entry() {\r\n      // percentage of width each datapoint will occupy\r\n      const digits = 4;\r\n      // use E scientific notation with exponent as number of digits\r\n      return Math.max(\r\n        0.0,\r\n        Math.round(Math.pow(10, digits) / this.surveys.length) / Math.pow(10, digits)\r\n      );\r\n    },\r\n    height_mark() {\r\n      // percentage of height each scale increment will occupy\r\n      const digits = 4;\r\n      const filter_data = this.filters[this.filter].data;\r\n      // use E scientific notation with exponent as number of digits\r\n      return (\r\n        Math.round(Math.pow(10, digits) / (filter_data.range.to - filter_data.range.from)) /\r\n        Math.pow(10, digits)\r\n      );\r\n    },\r\n  },\r\n  methods: {\r\n    process(data) {\r\n      this.surveys = data.filter((survey) => !survey.error);\r\n      // map index onto surveys\r\n      this.surveys.forEach((survey, index) => {\r\n        survey.data.index = index;\r\n      });\r\n      this.is_ready = true;\r\n    },\r\n    update() {\r\n      this.is_ready = false;\r\n      this.surveys = [];\r\n      this.store\r\n        .get_surveys(this.completed)\r\n        .then((data) => {\r\n          this.process(data);\r\n        })\r\n        .catch((err) => {\r\n          new ErrorToast(\"Failed to get statistics\", err, 5000);\r\n          this.is_ready = true;\r\n        });\r\n    },\r\n  },\r\n  mounted() {\r\n    this.update();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.stats_view_container {\r\n  width: 100%;\r\n  background-color: var(--color-overlay-input);\r\n  color: var(--color-on-overlay-input);\r\n  border: none;\r\n  border-radius: var(--radius-overlay-input);\r\n  overflow-x: auto;\r\n}\r\n.stats_view_container {\r\n  /* set 1em to equal 1% height */\r\n  font-size: 200px;\r\n  height: 200px;\r\n}\r\n\r\n/* scrollbar */\r\n.stats_view_container::-webkit-scrollbar-corner {\r\n  display: none;\r\n}\r\n.stats_view_container::-webkit-scrollbar {\r\n  background: var(--color-overlay-input);\r\n  width: 12px;\r\n  height: 12px;\r\n  border-radius: var(--radius-overlay-input);\r\n}\r\n\r\n.stats_view_container::-webkit-scrollbar-thumb {\r\n  width: 8px;\r\n  height: 8px;\r\n  background: var(--color-overlay-input-scrollbar);\r\n  border-radius: 10px;\r\n  border: 4px solid var(--color-overlay-input);\r\n}\r\n\r\n/* empty */\r\n.stats_view_container:empty {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: inherit;\r\n  height: 100px;\r\n}\r\n.stats_view_container:empty::before {\r\n  content: \"No data to display\";\r\n  opacity: 0.5;\r\n}\r\n/* entry wrapper */\r\n.stats_view_container > .stats_view_wrapper {\r\n  padding: var(--padding-overlay-input);\r\n  height: 100%;\r\n  min-width: 100%;\r\n  width: fit-content;\r\n}\r\n.stats_view_container > .stats_view_wrapper > .stats_view {\r\n  height: 100%;\r\n  min-width: 100%;\r\n  position: relative;\r\n}\r\n/* entries */\r\n.stats_view_container > .stats_view_wrapper > .stats_view > .stats_view__entry {\r\n  height: 5px;\r\n  width: 5px;\r\n  border-radius: 10px;\r\n  /* background: var(--color-on-overlay-input); */\r\n  background: var(--color-theme);\r\n  bottom: calc(100% * var(--y-stat) * var(--h-scale-stat));\r\n  left: calc(100% * var(--x-stat) * var(--w-scale-stat));\r\n  position: absolute;\r\n}\r\n\r\n/* controls */\r\n.stats_view_controls_wrapper {\r\n  margin-bottom: calc(var(--padding-overlay-input) / 2);\r\n  display: flex;\r\n  flex-flow: row wrap;\r\n}\r\n.stats_view_controls {\r\n  height: 30px;\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  border-radius: var(--radius-overlay-input);\r\n  overflow: hidden;\r\n  width: fit-content;\r\n}\r\n.stats_view_controls > button,\r\n.stats_view_control__refresh {\r\n  flex: 0 1 auto;\r\n  height: 30px;\r\n  background: var(--color-overlay-input);\r\n  color: var(--color-on-overlay-action-disabled);\r\n  border: none;\r\n  padding: 0 var(--padding-overlay-input);\r\n  font-size: 0.9em;\r\n  font-weight: 600;\r\n  user-select: none;\r\n}\r\n.stats_view_control__refresh {\r\n  border-radius: var(--radius-overlay-input);\r\n}\r\n.stats_view_controls > button.active,\r\n.stats_view_control__refresh {\r\n  background: var(--color-overlay-input-active);\r\n  color: var(--color-on-overlay-input);\r\n}\r\n</style>\r\n","import { render } from \"./StatsModal.vue?vue&type=template&id=33d27dc6&scoped=true\"\nimport script from \"./StatsModal.vue?vue&type=script&lang=js\"\nexport * from \"./StatsModal.vue?vue&type=script&lang=js\"\n\nimport \"./StatsModal.vue?vue&type=style&index=0&id=33d27dc6&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sande\\\\Documents\\\\GitHub\\\\mvtime.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-33d27dc6\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","ref","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_Fragment","_renderList","$data","filters","tag","onClick","$event","filter","_normalizeClass","active","key","name","_hoisted_8","_hoisted_9","_cache","args","$options","update","loading_bg","is_ready","surveys","length","style","_normalizeStyle","width_entry","height_mark","_hoisted_10","survey","id","data","scale","responses","index","range","from","_ctx","open_survey","_hoisted_12","_hoisted_13","_createVNode","_component_router_link","to","_hoisted_14","_hoisted_15","$emit","emits","stress","positive","neutral","negative","sentiment","upcoming","console","log","Math","min","num","tasks","computed","store","useMainStore","completed","this","active_doc","done_surveys","digits","max","round","pow","filter_data","methods","process","error","forEach","get_surveys","then","catch","err","ErrorToast","mounted","__exports__","render"],"sourceRoot":""}