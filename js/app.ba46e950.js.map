{"version":3,"file":"js/app.ba46e950.js","mappings":"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","sources":["webpack://mvtime/./src/common/index.js","webpack://mvtime/./src/App.vue","webpack://mvtime/./src/App.vue?7ccd","webpack://mvtime/./src/registerServiceWorker.js","webpack://mvtime/./src/main.js","webpack://mvtime/./src/views/Home/Home.vue","webpack://mvtime/./src/components/Home/BaseNav.vue","webpack://mvtime/./src/components/Home/BaseNav.vue?6606","webpack://mvtime/./src/components/Home/BaseFooter.vue","webpack://mvtime/./src/components/Home/BaseFooter.vue?89be","webpack://mvtime/./src/views/Home/Home.vue?d910","webpack://mvtime/./src/views/Home/NotFound.vue","webpack://mvtime/./src/views/Home/NotFound.vue?3f2e","webpack://mvtime/./src/router/index.js","webpack://mvtime/./src/firebase/index.js","webpack://mvtime/./src/store/index.js","webpack://mvtime/./src/components/Modal/OverlayWrapper.vue","webpack://mvtime/./src/components/Modal/OverlayWrapper.vue?608b","webpack://mvtime/webpack/bootstrap","webpack://mvtime/webpack/runtime/chunk loaded","webpack://mvtime/webpack/runtime/compat get default export","webpack://mvtime/webpack/runtime/define property getters","webpack://mvtime/webpack/runtime/ensure chunk","webpack://mvtime/webpack/runtime/get javascript chunk filename","webpack://mvtime/webpack/runtime/get mini-css chunk filename","webpack://mvtime/webpack/runtime/global","webpack://mvtime/webpack/runtime/hasOwnProperty shorthand","webpack://mvtime/webpack/runtime/load script","webpack://mvtime/webpack/runtime/make namespace object","webpack://mvtime/webpack/runtime/publicPath","webpack://mvtime/webpack/runtime/css loading","webpack://mvtime/webpack/runtime/jsonp chunk loading","webpack://mvtime/webpack/startup"],"sourcesContent":["/** Imperfect helper for _statusLog() */\r\nfunction getFirstNonStandardCharacter(str) {\r\n  try {\r\n    const match = str.match(\r\n      /^([\\P{L}\\p{Extended_Pictographic}]|(?:[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]))/u\r\n    );\r\n    return match ? match[0] : null;\r\n  } catch (err) {\r\n    return null;\r\n  }\r\n}\r\n\r\n/** Log function, takes any number of arguments. If the first character is nonstandard and followed by a space, it'll use that as a tag */\r\nfunction _statuslog() {\r\n  if (arguments.length == 0) return;\r\n  let args = Array.from(arguments);\r\n  let extras = [\r\n    `%cMVTT`,\r\n    \"background:#272727;color:#C9B092;padding:7px 12px;font-family:Lato,sans-serif;font-weight:bold;font-size:1.3em\",\r\n  ];\r\n  // check if first character is emoji, followed by space\r\n  if (getFirstNonStandardCharacter(args[0]) != null) {\r\n    // remove the first two characters from the first argument\r\n    extras[0] += \" %c\" + getFirstNonStandardCharacter(args[0]);\r\n    extras[2] =\r\n      \"background:#C9B092aa;background:#ffffffaa;color:#272727;padding:3px 5px;margin-left:5px;border-radius:5px;font-family:monospace !important;font-weight:bold;font-size:1.25em\";\r\n    args[0] = args[0].substring(2).trimStart();\r\n  }\r\n  try {\r\n    console.info(...extras, ...args);\r\n  } catch (err) {\r\n    console.log(...extras, ...args);\r\n  }\r\n}\r\ntry {\r\n  console.log = _statuslog;\r\n} catch (err) {\r\n  _statuslog(\"⚠ Couldn't override console.log\", err);\r\n}\r\nexport { _statuslog };\r\n","<template>\r\n  <main\r\n    id=\"themed_body\"\r\n    class=\"parent\"\r\n    ref=\"app\"\r\n    :_theme=\"theme\"\r\n    @click=\"refreshTimeout\"\r\n    @keydown=\"refreshTimeout\"\r\n    @focus=\"refreshTimeout\"\r\n  >\r\n    <router-view></router-view>\r\n    <OverlayWrapper v-if=\"do_timeout && (store.paused || animating)\" ref=\"overlay\">\r\n      <main class=\"pause_modal router_center_view\" ref=\"pause_modal\">\r\n        <header class=\"modal_header\">\r\n          <h2 class=\"header_style modal_header_title\">Session paused</h2>\r\n        </header>\r\n        <div ref=\"pause_contents\" class=\"overlay_contents\">\r\n          <div class=\"overlay_contents_text\">\r\n            Your session was inactive for an extended period of time and has been paused to conserve\r\n            resources.\r\n          </div>\r\n          <br />\r\n          <div class=\"overlay_contents_text\">\r\n            You can hide this message using the toggle in your account preferences.\r\n          </div>\r\n          <br />\r\n          <div class=\"overlay_contents_text\">Please click anywhere to resume using MVTT.</div>\r\n        </div>\r\n      </main>\r\n    </OverlayWrapper>\r\n  </main>\r\n</template>\r\n\r\n<script>\r\n/**\r\n * The main App component, which is the parent of all other components, and mostly serves as a wrapper for the router-view, though it does apply the theme\r\n *\r\n * @module App\r\n * @description The main App component, wrapper for Home or Portal Views.\r\n * @requires module:store/MainStore\r\n */\r\nimport OverlayWrapper from \"@/components/Modal/OverlayWrapper.vue\";\r\nimport { useMainStore } from \"@/store\";\r\nimport $ from \"jquery\";\r\nimport { _statuslog } from \"./common\";\r\nexport default {\r\n  name: \"App\",\r\n  components: {\r\n    OverlayWrapper,\r\n  },\r\n  data() {\r\n    return {\r\n      platform: \"\",\r\n      isElectron: false,\r\n      animating: false,\r\n    };\r\n  },\r\n  computed: {\r\n    do_timeout() {\r\n      return !this.store?.account_doc?.prefs?.hide_timeout;\r\n    },\r\n    pageTitle() {\r\n      return document.title;\r\n    },\r\n    store() {\r\n      return useMainStore();\r\n    },\r\n    theme() {\r\n      return this.store.get_theme;\r\n    },\r\n  },\r\n  mounted() {\r\n    this.isElectron = navigator.userAgent.toLowerCase().indexOf(\" electron/\") > -1;\r\n    if (this.isElectron) {\r\n      this.platform = this.$route.query.platform;\r\n      if (!this.platform && window.location.search) {\r\n        this.platform = window.location.search.split(\"=\")[1];\r\n      }\r\n      console.log(\"Electron Platform: \" + this.platform);\r\n    }\r\n    this.set_theme();\r\n    this.store.paused = false;\r\n    window.addEventListener(\"focus\", this.refreshTimeout);\r\n\r\n    // catch href clicks to open as \"/to/{encoded href}\"\r\n    this.$refs.app.addEventListener(\"click\", (e) => {\r\n      // catch click if it has an href\r\n      if (e.target.href) {\r\n        // fix link if it doesnt have a protocol or is relative\r\n        if (!e.target.href.includes(\"://\") || e.target.href.startsWith(\"/\")) {\r\n          e.target.href = new URL(e.target.href, window.location.href).href;\r\n        }\r\n        // check that it's an outlink\r\n        let url = new URL(e.target.href);\r\n        if (url?.hostname == \"mvtt.app\" || url?.hostname == window?.location?.hostname) return;\r\n\r\n        // if outlink, open in new tab as \"/to/{encoded href}\"\r\n        e.preventDefault();\r\n        _statuslog(`🔗 Opening outlink in a new tab | \"${url.href}\"`);\r\n        window.open(\"/to/\" + encodeURIComponent(url.href), \"_blank\");\r\n      }\r\n    });\r\n  },\r\n  created() {\r\n    // do dark mode from local storage, then from store (if logged in)\r\n    const systemTheme = window.matchMedia(\"(prefers-color-scheme: dark)\").matches\r\n      ? \"dark\"\r\n      : \"light\";\r\n    const storedTheme = window.localStorage.getItem(\"theme\");\r\n    this.isDarkMode = storedTheme === \"dark\" || (storedTheme === null && systemTheme === \"dark\");\r\n  },\r\n  methods: {\r\n    refreshTimeout() {\r\n      if (this.store) {\r\n        this.store.refresh_timeout();\r\n      }\r\n    },\r\n    set_theme() {\r\n      if (this.theme == \"light\") {\r\n        $(\"meta.theme-color\").attr(\"media\", \"\");\r\n        $(\"meta.theme-color-dark\").attr(\"media\", \"false\");\r\n      } else {\r\n        $(\"meta.theme-color-dark\").attr(\"media\", \"\");\r\n        $(\"meta.theme-color\").attr(\"media\", \"false\");\r\n      }\r\n    },\r\n  },\r\n  watch: {\r\n    \"store.paused\": function (new_val, old_val) {\r\n      if (this.do_timeout) {\r\n        if (new_val) {\r\n          // focus on next tick\r\n          this.$nextTick(() => {\r\n            this.$refs.pause_modal.focus();\r\n          });\r\n        } else if (old_val && this.$refs.overlay) {\r\n          this.animating = true;\r\n          this.$refs.overlay.close();\r\n          setTimeout(() => {\r\n            this.animating = false;\r\n          }, 250);\r\n        }\r\n      }\r\n    },\r\n    theme() {\r\n      this.set_theme();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nmain.parent {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.pause_modal .overlay_contents {\r\n  border-bottom: none;\r\n}\r\n.pause_modal {\r\n  width: 350px !important;\r\n}\r\n</style>\r\n","import { render } from \"./App.vue?vue&type=template&id=9bb9307a&scoped=true\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=9bb9307a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sande\\\\Documents\\\\GitHub\\\\mvtime.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9bb9307a\"]])\n\nexport default __exports__","/* eslint-disable no-console */\r\n\r\nimport { register } from \"register-service-worker\";\r\nimport { _statuslog } from \"@/common\";\r\n\r\nif (process.env.NODE_ENV === \"production\") {\r\n  register(`${process.env.BASE_URL}service-worker.js`, {\r\n    ready() {\r\n      _statuslog(\r\n        \"🛠 App is being served from cache by a service worker. \" +\r\n          \"For more details, visit https://goo.gl/AFskqB\"\r\n      );\r\n    },\r\n    registered() {\r\n      _statuslog(\"🛠 Service worker has been registered.\");\r\n    },\r\n    cached() {\r\n      _statuslog(\"🛠 Content has been cached for offline use.\");\r\n    },\r\n    updatefound() {\r\n      _statuslog(\"🛠 New content is downloading.\");\r\n    },\r\n    updated() {\r\n      _statuslog(\"🛠 New content is available; please refresh.\");\r\n      window.localStorage.clear();\r\n      window.location.reload(true);\r\n    },\r\n    offline() {\r\n      _statuslog(\"🛠 No internet connection found. App is running in offline mode.\");\r\n    },\r\n    error(error) {\r\n      _statuslog(\"🛑 Error during service worker registration:\", error);\r\n    },\r\n  });\r\n}\r\n","import { createApp, watch } from \"vue\";\r\nimport { createPinia } from \"pinia\";\r\nimport App from \"@/App.vue\";\r\nimport router from \"@/router\";\r\nimport { placeholderToast, Popup } from \"@svonk/util\";\r\nimport { _statuslog } from \"@/common\";\r\n// create instances of app requisites\r\nconst pinia = createPinia();\r\nconst app = createApp(App);\r\n// setup app requisites\r\napp.use(router);\r\napp.use(pinia);\r\n//* setup image loading\r\n// const loadimage = require(\"@/assets/img/placeholder/load_dark.gif\");\r\n// const errorimage = require(\"@/assets/img/placeholder/error_dark.png\");\r\napp.use(VueLazyload, {\r\n  preLoad: 2,\r\n  // error: errorimage,\r\n  // loading: loadimage,\r\n  attempt: 1,\r\n});\r\n\r\n//* lottie animations\r\n// import LottieVuePlayer from \"@lottiefiles/vue-lottie-player\";\r\n// app.use(LottieVuePlayer);\r\n\r\n// mount app\r\napp.mount(\"#app\");\r\n// setup store persistence using watcher\r\nwatch(\r\n  pinia.state,\r\n  (state) => {\r\n    window.localStorage.setItem(\"MVTT_app_state\", JSON.stringify(state.main));\r\n  },\r\n  { deep: true }\r\n);\r\n// when window.localStorage.MVTT_teacher_mode changes, reload\r\nwindow.addEventListener(\"storage\", (e) => {\r\n  if (e.key === \"MVTT_teacher_mode\") {\r\n    _statuslog(\"🏫 Detected teacher mode change, reloading\");\r\n    window.location.reload();\r\n  }\r\n});\r\n\r\n// styles\r\nimport \"@/assets/style/main.css\";\r\n\r\n// import jquery and store\r\nimport $ from \"jquery\";\r\n\r\nimport { useMainStore } from \"./store\";\r\n// auth\r\n\r\n$(document.body).on(\"click\", \".auth-action\", function () {\r\n  const store = useMainStore();\r\n  if (!store.user && $(this).hasClass(\"can-login\")) {\r\n    store.login();\r\n  } else if ($(this).hasClass(\"can-logout\")) {\r\n    if ($(this).hasClass(\"doprompt\")) {\r\n      new Popup(\r\n        [\"Log Out\", \"Are you sure you want to log out?\"],\r\n        \"default\",\r\n        10000,\r\n        require(\"@svonk/util/assets/popup-out.svg\"),\r\n        [\r\n          [\"removePopup()\", \"Cancel\", \"secondary-action fullborder\"],\r\n          [\"removePopup()\", \"Confirm\", \"primary-action auth-action can-logout\"],\r\n        ]\r\n      );\r\n    } else {\r\n      store.logout();\r\n    }\r\n  }\r\n});\r\n$(document.body).on(\"click\", \".gohome\", function () {\r\n  router.push(\"/\");\r\n});\r\n\r\n// page change\r\nimport { removePopup } from \"@svonk/util\";\r\nrouter.afterEach((to) => {\r\n  if (to.meta && to.meta.page_title) {\r\n    document.title = \"MV Test Tracker | \" + to.meta.page_title;\r\n  } else {\r\n    document.title = \"MV Test Tracker\";\r\n  }\r\n  let theme_light = to.meta?.theme_color?.light || \"#f5c14b\";\r\n  let theme_dark = to.meta?.theme_color?.dark || \"#f5c14b\";\r\n\r\n  $(\"meta.theme-color\").attr(\"content\", theme_light);\r\n  $(\"meta.theme-color-dark\").attr(\"content\", theme_dark);\r\n\r\n  // remove popup\r\n  removePopup();\r\n\r\n  // setup color variables for css\r\n  const style = document.documentElement.style;\r\n  style.setProperty(\"--theme-color\", theme_light);\r\n  style.setProperty(\"--theme-color-dark\", theme_dark);\r\n  // colors on theme color\r\n  let text_light = to.meta?.theme_color?.text_light || \"#000000\";\r\n  let text_dark = to.meta?.theme_color?.text_dark || \"#ffffff\";\r\n  style.setProperty(\"--theme-color-text\", text_light);\r\n  style.setProperty(\"--theme-color-text-dark\", text_dark);\r\n  style.setProperty(\"--theme-color-hover\", text_light + \"33\");\r\n  style.setProperty(\"--theme-color-hover-dark\", text_dark + \"33\");\r\n});\r\n\r\nwindow.toast = placeholderToast;\r\nwindow.$ = $;\r\n\r\n// router guard\r\nimport { Toast } from \"@svonk/util\";\r\n\r\nimport \"./registerServiceWorker\";\r\nimport VueLazyload from \"vue-lazyload\";\r\nrouter.beforeEach((to) => {\r\n  const store = useMainStore();\r\n\r\n  if (to.meta && to.meta.requiresAuth && store && !store.user) {\r\n    // launch auth popup through store action\r\n    new Toast(\r\n      \"Please log in or join to access this page\",\r\n      \"default\",\r\n      1500,\r\n      require(\"@svonk/util/assets/info-locked-icon.svg\")\r\n    );\r\n    // set redirect\r\n    return {\r\n      path: \"/\",\r\n      query: { redirect: to.fullPath },\r\n    };\r\n  } else if (to.meta && to.meta.requiresTeacher && store.user && !store.is_teacher) {\r\n    // launch auth popup through store action\r\n    new Toast(\r\n      \"You must be a teacher to access this page\",\r\n      \"default\",\r\n      1500,\r\n      require(\"@svonk/util/assets/info-locked-icon.svg\")\r\n    );\r\n    return { name: \"portal\" };\r\n  }\r\n});\r\n","<template>\r\n  <main class=\"apphome hidescroll scrolloverflow\">\r\n    <main class=\"base fullheightcontent\">\r\n      <BaseNav />\r\n      <router-view class=\"inner-base\" />\r\n    </main>\r\n    <BaseFooter />\r\n  </main>\r\n</template>\r\n\r\n<script>\r\nimport BaseNav from \"@/components/Home/BaseNav.vue\";\r\nimport BaseFooter from \"@/components/Home/BaseFooter.vue\";\r\nexport default {\r\n  name: \"AppHome\",\r\n  components: {\r\n    BaseNav,\r\n    BaseFooter,\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.apphome {\r\n  background-color: var(--color-home);\r\n}\r\n.base {\r\n  padding: 70px 90px;\r\n  padding-bottom: calc(70px - var(--footer-height));\r\n  display: flex;\r\n  flex-flow: column nowrap;\r\n}\r\n.inner-base {\r\n  padding: 40px 0;\r\n  flex-grow: 1;\r\n}\r\n@media (max-width: 1000px) {\r\n  .base {\r\n    padding: 50px 60px;\r\n  }\r\n}\r\n@media (max-width: 500px) {\r\n  .base {\r\n    padding: 40px 40px;\r\n  }\r\n  .inner-base {\r\n    padding: 20px 0;\r\n  }\r\n}\r\n.inner-base {\r\n  padding-bottom: 0;\r\n}\r\n</style>\r\n","<template>\r\n  <header>\r\n    <h1 class=\"gohome hideoverflow\">MV Test Tracker</h1>\r\n    <!-- Theme Button -->\r\n    <button\r\n      :_theme=\"store.get_theme\"\r\n      class=\"theme_button\"\r\n      title=\"Switch Theme\"\r\n      @click=\"store.toggle_theme\"\r\n    >\r\n      <div class=\"theme_icon\"></div>\r\n      <div class=\"toggle_text\">Switch Theme</div>\r\n    </button>\r\n    <span class=\"flex_spacer\"></span>\r\n    <button\r\n      class=\"nav-mobile-btn\"\r\n      v-if=\"mobile && !mobile_menu_open\"\r\n      @click=\"mobile_menu_open = !mobile_menu_open\"\r\n    ></button>\r\n    <div class=\"nav-actions\" v-if=\"!mobile || mobile_menu_open\" :class=\"{ mobile: mobile }\">\r\n      <button\r\n        class=\"nav-mobile-btn alt-btn\"\r\n        v-if=\"mobile\"\r\n        @click=\"mobile_menu_open = !mobile_menu_open\"\r\n      ></button>\r\n      <nav class=\"base-pages-nav\">\r\n        <!-- show only if not on that page -->\r\n        <router-link class=\"click-action-inline\" to=\"/\" @click=\"closeMenu\">Home</router-link>\r\n        <router-link class=\"click-action-inline\" to=\"/about\" @click=\"closeMenu\">About</router-link>\r\n        <router-link class=\"click-action-inline\" to=\"/contact\" @click=\"closeMenu\"\r\n          >Contact</router-link\r\n        >\r\n      </nav>\r\n      <span class=\"flex_spacer\"></span>\r\n      <button\r\n        id=\"nav-auth-btn\"\r\n        class=\"small-action-btn auth-action can-logout can-login click-action\"\r\n        :class=\"{ linked: store.personal_account && store.user }\"\r\n      >\r\n        Log {{ logged_in ? \"Out\" : \"In\" }}\r\n      </button>\r\n    </div>\r\n  </header>\r\n</template>\r\n\r\n<script>\r\nimport { useMainStore } from \"../../store\";\r\nexport default {\r\n  name: \"BaseNav\",\r\n  data() {\r\n    return {\r\n      mobile_menu_open: false,\r\n      mobile: window.innerWidth <= 800,\r\n    };\r\n  },\r\n  methods: {\r\n    resize() {\r\n      this.mobile = window.innerWidth <= 800;\r\n      if (!this.mobile) this.closeMenu();\r\n    },\r\n    closeMenu() {\r\n      this.mobile_menu_open = false;\r\n    },\r\n  },\r\n  mounted() {\r\n    window.addEventListener(\"resize\", this.resize);\r\n  },\r\n  unmounted() {\r\n    window.removeEventListener(\"resize\", this.resize);\r\n  },\r\n  computed: {\r\n    store() {\r\n      return useMainStore();\r\n    },\r\n    logged_in() {\r\n      return !!this.store.user;\r\n    },\r\n  },\r\n};\r\n// using the mounted() hook to add an event listener\r\n</script>\r\n\r\n<style scoped>\r\nheader {\r\n  width: 100%;\r\n  white-space: break-spaces;\r\n}\r\nheader * {\r\n  white-space: inherit;\r\n}\r\nheader,\r\nheader .nav-actions,\r\nheader .nav-actions nav {\r\n  display: flex;\r\n  flex-flow: row wrap;\r\n  align-items: center;\r\n}\r\n\r\nheader nav a {\r\n  margin: 0 var(--nav-spacing);\r\n  text-decoration: none;\r\n  color: inherit;\r\n}\r\n#nav-auth-btn {\r\n  margin-left: var(--nav-spacing);\r\n}\r\n.base-pages-nav > .router-link-exact-active {\r\n  /* opacity: 0.75; */\r\n  box-shadow: inset 0 -2px 0 var(--color-theme);\r\n}\r\n.nav-mobile-btn {\r\n  background: none;\r\n  border: none;\r\n  outline: none;\r\n  cursor: pointer;\r\n  width: 40px;\r\n  height: 40px;\r\n  background-size: contain;\r\n  background-repeat: no-repeat;\r\n  background-image: url(@/assets/img/general/menu/menu-icon.png);\r\n  background-image: url(@/assets/img/general/menu/menu-icon.svg);\r\n  filter: var(--filter-icon);\r\n}\r\n.nav-mobile-btn.alt-btn {\r\n  background-image: url(@/assets/img/general/menu/menu-close-icon.png);\r\n  background-image: url(@/assets/img/general/menu/menu-close-icon.svg);\r\n  margin-left: auto;\r\n}\r\n/* mobile */\r\n@media (max-width: 800px) {\r\n  header .nav-actions,\r\n  header .nav-actions nav {\r\n    display: flex;\r\n    flex-flow: column nowrap;\r\n    align-items: stretch;\r\n    justify-content: space-between;\r\n  }\r\n  header .nav-actions {\r\n    position: absolute;\r\n    top: -10px;\r\n    right: -10px;\r\n    background: var(--color-secondary);\r\n    border-radius: 10px;\r\n    padding: 10px;\r\n    z-index: 1;\r\n    box-shadow: var(--shadow-highlight), 0px 0px 3px #fff;\r\n    width: 200px;\r\n    height: 300px;\r\n  }\r\n  header {\r\n    flex-flow: row nowrap;\r\n    position: relative;\r\n  }\r\n  header .flex_spacer {\r\n    flex-grow: 0;\r\n    flex-shrink: 1;\r\n    flex-basis: 0;\r\n  }\r\n  header .nav-mobile-btn {\r\n    flex-shrink: 0;\r\n    flex-basis: 40px;\r\n    margin-left: var(--nav-spacing);\r\n  }\r\n  header .nav-actions #nav-auth-btn {\r\n    margin-top: var(--nav-spacing);\r\n    width: 100%;\r\n    margin-left: 0;\r\n  }\r\n  header .nav-actions .base-pages-nav a {\r\n    margin: var(--nav-spacing) auto;\r\n    text-align: center;\r\n    font-size: 1.3em;\r\n  }\r\n  header h1 {\r\n    flex-basis: 20px;\r\n    width: 20px;\r\n    flex-grow: 1;\r\n  }\r\n  .theme_button:hover,\r\n  .theme_button:active {\r\n    width: var(--size-sidebar-button);\r\n  }\r\n}\r\n.theme_button {\r\n  margin: 0 calc(var(--nav-spacing) * 2);\r\n}\r\n</style>\r\n","import { render } from \"./BaseNav.vue?vue&type=template&id=254f2d7d&scoped=true\"\nimport script from \"./BaseNav.vue?vue&type=script&lang=js\"\nexport * from \"./BaseNav.vue?vue&type=script&lang=js\"\n\nimport \"./BaseNav.vue?vue&type=style&index=0&id=254f2d7d&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sande\\\\Documents\\\\GitHub\\\\mvtime.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-254f2d7d\"]])\n\nexport default __exports__","<template>\r\n  <footer>\r\n    <p>\r\n      <span>&copy; 2022-2023 MVHS Test Tracker.&nbsp;</span>\r\n      <span>Website by <a href=\"https://svonk.me/\">Sander Vonk</a></span>\r\n    </p>\r\n  </footer>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"BaseFooter\",\r\n};\r\n</script>\r\n<style scoped>\r\nfooter {\r\n  width: 100%;\r\n  white-space: break-spaces;\r\n  height: var(--footer-height);\r\n}\r\nfooter p {\r\n  margin: 0;\r\n  padding: 0.5rem;\r\n  text-align: center;\r\n  background-color: var(--color-footer);\r\n  color: var(--color-footer-text);\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n}\r\np > span {\r\n  flex-grow: 1;\r\n  text-overflow: ellipsis;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  max-width: fit-content;\r\n}\r\np > span:first-child {\r\n  text-align: right;\r\n  flex-shrink: 1;\r\n  flex-basis: 0;\r\n}\r\np > span:last-child {\r\n  text-align: left;\r\n  flex-shrink: 0;\r\n}\r\n.clip-overflow {\r\n  flex-basis: 0;\r\n}\r\n</style>\r\n","import { render } from \"./BaseFooter.vue?vue&type=template&id=94e483ee&scoped=true\"\nimport script from \"./BaseFooter.vue?vue&type=script&lang=js\"\nexport * from \"./BaseFooter.vue?vue&type=script&lang=js\"\n\nimport \"./BaseFooter.vue?vue&type=style&index=0&id=94e483ee&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sande\\\\Documents\\\\GitHub\\\\mvtime.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-94e483ee\"]])\n\nexport default __exports__","import { render } from \"./Home.vue?vue&type=template&id=0be2f914\"\nimport script from \"./Home.vue?vue&type=script&lang=js\"\nexport * from \"./Home.vue?vue&type=script&lang=js\"\n\nimport \"./Home.vue?vue&type=style&index=0&id=0be2f914&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sande\\\\Documents\\\\GitHub\\\\mvtime.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"not-found\">\r\n    <h1 class=\"title_text err_text\">404</h1>\r\n    <h2 class=\"header_style err_text hideoverflow\">Page Not Found</h2>\r\n    <hr class=\"err-break\" />\r\n    <nav>\r\n      <router-link class=\"router-link click-action-inline\" to=\"/\">Home</router-link>\r\n      <span>&nbsp;|&nbsp;</span>\r\n\r\n      <router-link v-if=\"logged_in\" class=\"router-link click-action-inline\" to=\"/portal\"\r\n        >Portal</router-link\r\n      >\r\n      <span class=\"nostyle\" v-else>\r\n        <router-link class=\"router-link click-action-inline\" to=\"/about\">About</router-link>\r\n        <span>&nbsp;|&nbsp;</span>\r\n        <router-link class=\"router-link click-action-inline\" to=\"/contact\"\r\n          >Contact</router-link\r\n        ></span\r\n      >\r\n    </nav>\r\n\r\n    <div class=\"err-pad-bottom\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import store\r\nimport { useMainStore } from \"@/store\";\r\nexport default {\r\n  name: \"NotFound\",\r\n  computed: {\r\n    store() {\r\n      return useMainStore();\r\n    },\r\n    logged_in() {\r\n      return this.store.user;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nh1.err_text {\r\n  font-weight: 800;\r\n  font-size: 120px;\r\n}\r\nh2.err_text {\r\n  font-size: 40px;\r\n  display: block;\r\n  opacity: 0.7;\r\n}\r\n.not-found {\r\n  display: flex;\r\n  flex-flow: column nowrap;\r\n  justify-content: center;\r\n  height: 100%;\r\n  width: 100%;\r\n  text-align: left;\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n}\r\n.err-pad-bottom {\r\n  padding-bottom: 51px;\r\n}\r\n.err-break {\r\n  margin: 20px 0;\r\n  margin-bottom: 15px;\r\n  border: 0;\r\n  height: 3px;\r\n  border-radius: 4px;\r\n  opacity: 0.8;\r\n  background-image: linear-gradient(to right, var(--color-theme) 50px, rgba(0, 0, 0, 0) 75%);\r\n}\r\nnav span:not(.router-link):not(.nostyle) {\r\n  opacity: 0.7;\r\n  color: var(--color-theme-accent-border);\r\n}\r\nnav .router-link {\r\n  opacity: 1;\r\n  color: var(--color-theme);\r\n}\r\n</style>\r\n","import { render } from \"./NotFound.vue?vue&type=template&id=f34b6ee6&scoped=true\"\nimport script from \"./NotFound.vue?vue&type=script&lang=js\"\nexport * from \"./NotFound.vue?vue&type=script&lang=js\"\n\nimport \"./NotFound.vue?vue&type=style&index=0&id=f34b6ee6&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sande\\\\Documents\\\\GitHub\\\\mvtime.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f34b6ee6\"]])\n\nexport default __exports__","import { createRouter, createWebHistory } from \"vue-router\";\r\nimport Home from \"../views/Home/Home.vue\";\r\nimport NotFound from \"../views/Home/NotFound.vue\";\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(process.env.BASE_URL),\r\n  routes: [\r\n    {\r\n      path: \"/\",\r\n      name: \"home\",\r\n      component: Home,\r\n      meta: {\r\n        page_title: \"Home\",\r\n        theme_color: {\r\n          light: \"#ffffff\",\r\n          dark: \"#16130e\",\r\n        },\r\n        requiresAuth: false,\r\n      },\r\n      children: [\r\n        // about and contact pages\r\n        {\r\n          path: \"\",\r\n          name: \"home\",\r\n          component: () => import(\"../views/Home/HomeView.vue\"),\r\n          meta: {\r\n            page_title: \"Home\",\r\n            theme_color: {\r\n              light: \"#ffffff\",\r\n              dark: \"#16130e\",\r\n            },\r\n            requiresAuth: false,\r\n          },\r\n          children: [\r\n            // view task\r\n\r\n            {\r\n              // specify param \"ref\" in the route\r\n              path: \"/view/:ref?\",\r\n              name: \"viewtaskalt\",\r\n              component: () => import(\"@/views/Portal/ViewTask.vue\"),\r\n              meta: {\r\n                page_title: \"View Task\",\r\n                theme_color: {\r\n                  light: \"#bfbfbf\",\r\n                  dark: \"#0d0d0d\",\r\n                },\r\n                requiresAuth: false,\r\n              },\r\n            },\r\n            // redirect page\r\n            {\r\n              path: \"to/:path?\",\r\n              name: \"redirect\",\r\n              component: () => import(\"../views/Home/Redirect.vue\"),\r\n              meta: {\r\n                page_title: \"Confirm Redirect\",\r\n                theme_color: {\r\n                  light: \"#bfbfbf\",\r\n                  dark: \"#0d0d0d\",\r\n                },\r\n                requiresAuth: false,\r\n              },\r\n            },\r\n            // join form\r\n            {\r\n              path: \"join\",\r\n              name: \"join\",\r\n              component: () => import(\"@/views/Home/JoinModal.vue\"),\r\n              meta: {\r\n                page_title: \"Join the MVTT Beta\",\r\n                theme_color: {\r\n                  light: \"#bfbfbf\",\r\n                  dark: \"#0d0d0d\",\r\n                },\r\n                requiresAuth: false,\r\n                // change later to instead have custom action\r\n                block_close: true,\r\n                close_path: \"/\",\r\n                blockStandardRedirect: true,\r\n              },\r\n            },\r\n            {\r\n              path: \"link/:code?\",\r\n              name: \"link\",\r\n              component: () => import(\"@/views/Home/LinkModal.vue\"),\r\n              props: true,\r\n              meta: {\r\n                page_title: \"Link Personal Account\",\r\n                theme_color: {\r\n                  light: \"#bfbfbf\",\r\n                  dark: \"#0d0d0d\",\r\n                },\r\n                close_path: \"/\",\r\n                blockStandardRedirect: true,\r\n              },\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          path: \"about\",\r\n          name: \"about\",\r\n          component: () => import(\"../views/Home/AboutView.vue\"),\r\n          meta: {\r\n            page_title: \"About\",\r\n            theme_color: {\r\n              light: \"#ffffff\",\r\n              dark: \"#16130e\",\r\n            },\r\n            requiresAuth: false,\r\n          },\r\n        },\r\n        {\r\n          path: \"legal/privacy\",\r\n          name: \"privacy\",\r\n          component: () => import(\"../views/Home/Legal/PrivacyView.vue\"),\r\n          meta: {\r\n            page_title: \"Legal - Privacy Policy\",\r\n            theme_color: {\r\n              light: \"#ffffff\",\r\n              dark: \"#16130e\",\r\n            },\r\n            requiresAuth: false,\r\n          },\r\n        },\r\n        {\r\n          path: \"legal/tos\",\r\n          name: \"tos\",\r\n          component: () => import(\"../views/Home/Legal/TermsView.vue\"),\r\n          meta: {\r\n            page_title: \"Legal - Terms of Service\",\r\n            theme_color: {\r\n              light: \"#ffffff\",\r\n              dark: \"#16130e\",\r\n            },\r\n            requiresAuth: false,\r\n          },\r\n        },\r\n        {\r\n          path: \"download\",\r\n          name: \"download\",\r\n          component: () => import(\"../views/Home/DownloadView.vue\"),\r\n          meta: {\r\n            page_title: \"Download [BETA]\",\r\n            theme_color: {\r\n              light: \"#ffffff\",\r\n              dark: \"#16130e\",\r\n            },\r\n            requiresAuth: false,\r\n          },\r\n        },\r\n        {\r\n          path: \"roadmap\",\r\n          name: \"roadmap\",\r\n          component: () => import(\"../views/Home/TodoView.vue\"),\r\n          meta: {\r\n            page_title: \"Development Roadmap\",\r\n            theme_color: {\r\n              light: \"#ffffff\",\r\n              dark: \"#16130e\",\r\n            },\r\n            requiresAuth: false,\r\n          },\r\n        },\r\n        {\r\n          path: \"contact\",\r\n          name: \"contact\",\r\n          component: () => import(\"../views/Home/ContactView.vue\"),\r\n          meta: {\r\n            page_title: \"Contact\",\r\n            theme_color: {\r\n              light: \"#ffffff\",\r\n              dark: \"#16130e\",\r\n            },\r\n            requiresAuth: false,\r\n          },\r\n        },\r\n        {\r\n          path: \"/:pathMatch(.*)*\",\r\n          name: \"404\",\r\n          component: NotFound,\r\n          meta: {\r\n            page_title: \"404\",\r\n            theme_color: {\r\n              light: \"#ffffff\",\r\n              dark: \"#16130e\",\r\n            },\r\n          },\r\n        },\r\n      ],\r\n    },\r\n    {\r\n      path: \"/portal\",\r\n      name: \"portal\",\r\n      component: () => import(\"../views/Portal/Portal.vue\"),\r\n      meta: {\r\n        page_title: \"Portal\",\r\n        theme_color: {\r\n          light: \"#f2f2f2\",\r\n          dark: \"#121212\",\r\n        },\r\n        requiresAuth: true,\r\n      },\r\n      children: [\r\n        {\r\n          path: \"/survey/daily\",\r\n          name: \"daily\",\r\n          component: () => import(\"../views/Portal/DailySurvey.vue\"),\r\n          meta: {\r\n            page_title: \"Daily Check-In\",\r\n            theme_color: {\r\n              light: \"#b5b5b5\",\r\n              dark: \"#0d0d0d\",\r\n            },\r\n            requiresAuth: true,\r\n            block_close: true,\r\n            blockStandardRedirect: true,\r\n            noSurvey: true,\r\n          },\r\n        },\r\n        {\r\n          path: \"/settings\",\r\n          name: \"settings\",\r\n          component: () => import(\"../views/Portal/SettingsModal.vue\"),\r\n          meta: {\r\n            page_title: \"Settings\",\r\n            theme_color: {\r\n              light: \"#b5b5b5\",\r\n              dark: \"#0d0d0d\",\r\n            },\r\n            requiresAuth: true,\r\n            noSurvey: true,\r\n          },\r\n        },\r\n        {\r\n          path: \"/portal/onboarding\",\r\n          name: \"onboarding\",\r\n          component: () => import(\"../views/Portal/Onboarding.vue\"),\r\n          meta: {\r\n            page_title: \"Onboarding\",\r\n            theme_color: {\r\n              light: \"#b5b5b5\",\r\n              dark: \"#0d0d0d\",\r\n            },\r\n            requiresAuth: true,\r\n            block_close: true,\r\n            noSurvey: true,\r\n          },\r\n        },\r\n        {\r\n          path: \"/portal/add\",\r\n          name: \"addclass\",\r\n          component: () => import(\"../views/Portal/AddClass.vue\"),\r\n          meta: {\r\n            page_title: \"Join a Class\",\r\n            theme_color: {\r\n              light: \"#b5b5b5\",\r\n              dark: \"#0d0d0d\",\r\n            },\r\n            requiresAuth: true,\r\n          },\r\n        },\r\n        {\r\n          path: \"/portal/add/ref/:ref?\",\r\n          name: \"joinclass\",\r\n          component: () => import(\"../views/Portal/AddClass.vue\"),\r\n          meta: {\r\n            page_title: \"Join from Reference\",\r\n            theme_color: {\r\n              light: \"#b5b5b5\",\r\n              dark: \"#0d0d0d\",\r\n            },\r\n            requiresAuth: true,\r\n          },\r\n        },\r\n        {\r\n          path: \"/portal/add/code/:code?\",\r\n          name: \"codeclass\",\r\n          component: () => import(\"../views/Portal/AddClass.vue\"),\r\n          meta: {\r\n            page_title: \"Join from Code\",\r\n            theme_color: {\r\n              light: \"#b5b5b5\",\r\n              dark: \"#0d0d0d\",\r\n            },\r\n            requiresAuth: true,\r\n          },\r\n        },\r\n        {\r\n          path: \"/portal/create\",\r\n          name: \"createclass\",\r\n          component: () => import(\"../views/Portal/CreateClass.vue\"),\r\n          meta: {\r\n            page_title: \"Teacher | Create Class\",\r\n            theme_color: {\r\n              light: \"#b5b5b5\",\r\n              dark: \"#0d0d0d\",\r\n            },\r\n            requiresAuth: true,\r\n            requiresTeacher: true,\r\n          },\r\n        },\r\n        {\r\n          path: \"/portal/new/:tasktype?\",\r\n          name: \"newtask\",\r\n          component: () => import(\"../views/Portal/CreateTask.vue\"),\r\n          meta: {\r\n            page_title: \"Teacher | Add Task\",\r\n            theme_color: {\r\n              light: \"#b5b5b5\",\r\n              dark: \"#0d0d0d\",\r\n            },\r\n            requiresAuth: true,\r\n            requiresTeacher: true,\r\n          },\r\n        },\r\n        {\r\n          // specify param \"ref\" in the route\r\n          path: \"/portal/view/:ref?\",\r\n          name: \"viewtask\",\r\n          component: () => import(\"../views/Portal/ViewTask.vue\"),\r\n          meta: {\r\n            page_title: \"View Task\",\r\n            theme_color: {\r\n              light: \"#b5b5b5\",\r\n              dark: \"#0d0d0d\",\r\n            },\r\n            requiresAuth: false,\r\n          },\r\n        },\r\n        {\r\n          // specify param \"ref\" in the route\r\n          path: \"/portal/edit/:ref?\",\r\n          name: \"edit\",\r\n          component: () => import(\"../views/Portal/EditTask.vue\"),\r\n          meta: {\r\n            page_title: \"Edit Task\",\r\n            theme_color: {\r\n              light: \"#b5b5b5\",\r\n              dark: \"#0d0d0d\",\r\n            },\r\n            requiresAuth: true,\r\n            requiresTeacher: true,\r\n          },\r\n        },\r\n        {\r\n          // specify param \"ref\" in the route\r\n          path: \"/portal/edit/class/:ref?\",\r\n          name: \"editclass\",\r\n          component: () => import(\"../views/Portal/EditClass.vue\"),\r\n          meta: {\r\n            page_title: \"Edit Class\",\r\n            theme_color: {\r\n              light: \"#b5b5b5\",\r\n              dark: \"#0d0d0d\",\r\n            },\r\n            requiresAuth: true,\r\n            requiresTeacher: true,\r\n          },\r\n        },\r\n        {\r\n          // specify param \"ref\" in the route\r\n          path: \"/portal/delete/:type?/:ref?\",\r\n          name: \"delete\",\r\n          component: () => import(\"../views/Portal/DeleteTask.vue\"),\r\n          meta: {\r\n            page_title: \"Confirm Task Delete\",\r\n            theme_color: {\r\n              light: \"#b5b5b5\",\r\n              dark: \"#0d0d0d\",\r\n            },\r\n            requiresAuth: true,\r\n            requiresTeacher: true,\r\n          },\r\n        },\r\n        {\r\n          // specify param \"ref\" in the route\r\n          path: \"/portal/leave/:ref?\",\r\n          name: \"leave\",\r\n          component: () => import(\"../views/Portal/LeaveClass.vue\"),\r\n          meta: {\r\n            page_title: \"Confirm Class Leave\",\r\n            theme_color: {\r\n              light: \"#b5b5b5\",\r\n              dark: \"#0d0d0d\",\r\n            },\r\n            requiresAuth: true,\r\n          },\r\n        },\r\n      ],\r\n    },\r\n    // redirect any /app routes to /portal\r\n    {\r\n      path: \"/app\",\r\n      redirect: \"/portal\",\r\n      meta: {\r\n        requiresAuth: true,\r\n      },\r\n    },\r\n  ],\r\n  parseQuery: (query) => require(\"qs\").parse(query),\r\n});\r\n\r\nexport default router;\r\n","// Path: firebase/index.js\r\n\r\n// import firebase\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getAuth } from \"firebase/auth\";\r\nimport { getFirestore, onSnapshot, doc } from \"firebase/firestore\";\r\nimport { getAnalytics } from \"firebase/analytics\";\r\n\r\n// firebase config\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDGqqhApln4pxm4EynPCSkfwyK8aopjfCk\",\r\n  authDomain: \"auth.mvtt.app\",\r\n  projectId: \"mvtrack\",\r\n  storageBucket: \"mvtrack.appspot.com\",\r\n  messagingSenderId: \"1070634963357\",\r\n  appId: \"1:1070634963357:web:2a4abc725fff24a5199f74\",\r\n  measurementId: \"G-6LNX1KCR8E\",\r\n};\r\n\r\n// initialize firebases\r\nconst app = initializeApp(firebaseConfig);\r\nconst auth = getAuth(app);\r\nconst db = getFirestore(app);\r\nconst analytics = getAnalytics(app);\r\n\r\n// export firebase\r\nexport { app, auth, db, analytics, authChangeAction, refreshTimeout };\r\n\r\n// handle auth updates (user login/logout) and set user data in store\r\nimport { useMainStore } from \"../store\";\r\nimport { _statuslog } from \"@/common\";\r\nimport router from \"@/router\";\r\nauth.onAuthStateChanged((user) => {\r\n  authChangeAction(user);\r\n});\r\nlet unsub;\r\nlet subscribed = false;\r\nlet timeout;\r\nfunction authChangeAction(user) {\r\n  const store = useMainStore();\r\n  if (user) {\r\n    store.set_user(user);\r\n    // unsubscribe from any prev\r\n    unsubscribe();\r\n    // if not signed in, exit\r\n    if (!store.user) return;\r\n    // setup onSnapshot listener for user data\r\n    setupSnapshot(user.uid);\r\n    timeout = startTimeout();\r\n    // rewrite the above with firebase 9 functions\r\n  } else {\r\n    store.clear();\r\n  }\r\n}\r\n\r\nfunction setupSnapshot(uid) {\r\n  const store = useMainStore();\r\n  store.hide_timeout();\r\n  unsub = onSnapshot(\r\n    doc(db, \"users\", uid),\r\n    { includeMetadataChanges: true },\r\n    (listening_doc) => {\r\n      if (listening_doc.metadata.hasPendingWrites) {\r\n        _statuslog(\"⬥ Snapshot from local changes\");\r\n        return;\r\n      }\r\n      _statuslog(\"⏷ Snapshot from remote\");\r\n      // check if doc exists\r\n      if (!listening_doc.exists()) {\r\n        store.create_doc();\r\n        return;\r\n      }\r\n      let listening_doc_data = listening_doc.data();\r\n      // set based on id\r\n      if (store.user && store.user?.uid == listening_doc.id) {\r\n        // set the account_doc\r\n        store.account_doc = listening_doc_data;\r\n      } else {\r\n        store.linked_account_doc = listening_doc_data;\r\n      }\r\n      // run fetch_classes() to update classes\r\n      // store.fetch_classes();\r\n    },\r\n    (err) => {\r\n      _statuslog(\"⚠ Couldn't get snapshot from remote\", err);\r\n    }\r\n  );\r\n  subscribed = true;\r\n}\r\n\r\n// allow for unsubscribing from onSnapshot\r\nfunction unsubscribe(show_prompt) {\r\n  // clear timeout\r\n  clearTimeout(timeout);\r\n  let store = useMainStore();\r\n  if (show_prompt) {\r\n    store.show_timeout();\r\n  }\r\n  if (unsub) {\r\n    unsub();\r\n    _statuslog(\"⬥ Unsubscribed from remote changes\");\r\n  }\r\n  subscribed = false;\r\n}\r\n\r\nfunction msToText(ms) {\r\n  // use modolo to get minutes and seconds\r\n  const minutes = Math.floor(ms / 1000 / 60);\r\n  const seconds = Math.floor((ms / 1000) % 60);\r\n  return (\r\n    (minutes || !seconds ? `${minutes} minute${minutes != 1 ? \"s\" : \"\"}` : \"\") +\r\n    (seconds ? `${seconds} second${seconds != 1 ? \"s\" : \"\"}` : \"\")\r\n  );\r\n}\r\n\r\nfunction startTimeout(delay = 1000 * 60 * 5) {\r\n  return setTimeout(() => {\r\n    _statuslog(`⬥ Page unused for ${msToText(delay)}, removing onSnapshot listener`);\r\n    unsubscribe(true);\r\n  }, delay);\r\n}\r\n\r\nfunction refreshTimeout(delay) {\r\n  const store = useMainStore();\r\n  store.hide_timeout();\r\n  if (!subscribed) {\r\n    // setup snapshot and pull data\r\n    setupSnapshot(store.personal_account ? store.account_doc.linked_to : store.user.uid);\r\n    // get class data / tasks again if \"/portal\" in path (check w/ router)\r\n    if (router.currentRoute.value && router.currentRoute.value.path.startsWith(\"/portal\")) {\r\n      _statuslog(\"⬥ Refreshing class data\");\r\n      store.fetch_classes();\r\n    }\r\n    _statuslog(\"⬥ Resubscribed to remote changes\");\r\n  }\r\n  clearTimeout(timeout);\r\n  timeout = startTimeout(delay);\r\n}\r\n","// Path: store/index.js\r\n\r\n// setup Pinia store\r\nimport { defineStore } from \"pinia\";\r\nimport { _statuslog } from \"@/common\";\r\nimport { Toast, ErrorToast, cleanError, WarningToast, SuccessToast } from \"@svonk/util\";\r\n\r\n// get firebase requirements\r\nimport {\r\n  collection,\r\n  doc,\r\n  setDoc,\r\n  getDoc,\r\n  getDocs,\r\n  query,\r\n  // where,\r\n  addDoc,\r\n  writeBatch,\r\n  updateDoc,\r\n  deleteDoc,\r\n  // arrayRemove,\r\n} from \"firebase/firestore\";\r\nimport CryptoJS from \"crypto-js\";\r\nimport { auth, db, authChangeAction, refreshTimeout } from \"../firebase\";\r\nimport { signInWithPopup, GoogleAuthProvider, signInWithRedirect } from \"firebase/auth\";\r\nconst provider = new GoogleAuthProvider();\r\nconst isElectron = navigator?.userAgent?.toLowerCase()?.indexOf(\" electron/\") > -1;\r\n\r\nconst ORG_DOMAIN = \"@mvla.net\";\r\n\r\n// add email and name to provider\r\nprovider.addScope(\"email\");\r\nprovider.addScope(\"profile\");\r\nauth.useDeviceLanguage();\r\n// constrict to only mvla.net emails\r\nprovider.setCustomParameters({\r\n  login_hint: \"username\" + ORG_DOMAIN,\r\n  // hd: \"mvla.net\",\r\n});\r\n\r\n// import router\r\nimport router from \"../router\";\r\nfunction validOrgAccount(userEmail) {\r\n  return userEmail.split(\"@\")[1] == \"mvla.net\";\r\n}\r\nfunction isIFrame() {\r\n  try {\r\n    return window.self !== window.top;\r\n  } catch (e) {\r\n    return true;\r\n  }\r\n}\r\n// get date in local time but with ISO format\r\nlet today = new Date();\r\ntoday = new Date(today.getTime() - today.getTimezoneOffset() * 60 * 1000);\r\ntoday = today.toISOString().split(\"T\")[0];\r\n// define store\r\nexport const useMainStore = defineStore({\r\n  id: \"main\",\r\n  /** Function to create a clean store state, used for initialization. Will attempt to load from window.localStorage variable to save on firebase calls -> isn't always stable after app update that changes state keyings */\r\n  state: () => {\r\n    let state = {};\r\n    // setting up store\r\n    let local = window.localStorage.getItem(\"MVTT_app_state\");\r\n    if (local && local != \"undefined\" && local != \"null\") {\r\n      try {\r\n        _statuslog(\"↻ State from local storage\");\r\n        state = JSON.parse(local);\r\n        state.paused = false;\r\n        return state;\r\n      } catch (err) {\r\n        _statuslog(\"⟳ Error parsing local storage state\", err);\r\n      }\r\n    }\r\n    // if no local storage, set up store\r\n    _statuslog(\"🔨 Setting up store from scratch\");\r\n    /** Set default store state */\r\n    return (state = {\r\n      /**\r\n       * @name user\r\n       * @description The user object from firebase auth\r\n       * @type {Object}\r\n       * @default null\r\n       */\r\n      user: null,\r\n      /**\r\n       * @name account_doc\r\n       * @description The authenticated user's document from the users collection in firestore\r\n       * @type {Object}\r\n       * @default null\r\n       * @see {@link active_doc}\r\n       */\r\n      account_doc: null,\r\n      /**\r\n       * @name linked_account_doc\r\n       * @description The linked account document from the users collection in firestore\r\n       * @type {Object}\r\n       * @default null\r\n       * @see {@link active_doc}\r\n       */\r\n      linked_account_doc: null,\r\n      /**\r\n       * @name classes\r\n       * @description Collection of the ids of classes that the user is in\r\n       * @type {Array}\r\n       * @default []\r\n       * @see {@link fetch_classes}\r\n       * @see {@link get_tasks}\r\n       * @see {@link tasks}\r\n       */\r\n      classes: [],\r\n      /**\r\n       * @name tasks\r\n       * @description Collection of the processed task objects\r\n       * @type {Array}\r\n       * @default []\r\n       * @see {@link get_tasks}\r\n       */\r\n      tasks: [],\r\n      /**\r\n       * @name loaded_email\r\n       * @description The email of the user that the classes have been loaded for (for previews in AddClass.vue)\r\n       * @type {String}\r\n       * @default null\r\n       * @see {@link loaded_classes}\r\n       * @see {@link fetch_classes_by_email}\r\n       */\r\n      loaded_email: null,\r\n      /**\r\n       * @name loaded_classes\r\n       * @description The classes that have been loaded for the loaded_email (for previews in AddClass.vue)\r\n       * @type {Array}\r\n       * @default null\r\n       * @see {@link loaded_email}\r\n       * @see {@link fetch_classes_by_email}\r\n       */\r\n      loaded_classes: null,\r\n      /**\r\n       * @name teacher\r\n       * @description The teacher object, with doc_ref and collection_ref\r\n       * @type {Object}\r\n       * @default {doc_ref: null, collection_ref: null}\r\n       * @see {@link is_teacher}\r\n       * @see {@link create_teacher_doc}\r\n       */\r\n      teacher: {\r\n        doc_ref: null,\r\n        collection_ref: null,\r\n      },\r\n      /**\r\n       * @name theme\r\n       * @description The theme of the app, either \"light\" or \"dark\"\r\n       * @type {String}\r\n       * @default null\r\n       * @see {@link get_theme}\r\n       * @see {@link toggle_theme}\r\n       * @see {@link clear}\r\n       * @note This is a local variable, and is while it may reflect what's in the user's document, it's not always accurate, though it is preferred locally, and persists across sessions / store {@link clear}s\r\n       */\r\n      theme: null,\r\n      /**\r\n       * @name personal_account\r\n       * @description If the user is using their personal account (true) or a valid org account (false)\r\n       * @type {Boolean}\r\n       * @default false\r\n       * @see {@link linked_account_doc}\r\n       * @see {@link linked_account_ref}\r\n       * @see {@link active_doc}\r\n       * @see {@link active_ref}\r\n       */\r\n      personal_account: false,\r\n      /**\r\n       * @name paused\r\n       * @description If the app is paused (true) or not (false)\r\n       * @type {Boolean}\r\n       * @default false\r\n       * @see {@link show_timeout}\r\n       * @see {@link hide_timeout}\r\n       */\r\n      paused: false,\r\n    });\r\n  },\r\n  /** The getters to get data that's based off of the store state, but requires manipulation */\r\n  getters: {\r\n    /**\r\n     * @function linked_accounts\r\n     * @description Get all linked accounts from active_doc.linked\r\n     * @returns {Array} Array of linked account emails\r\n     * @default []\r\n     */\r\n    linked_accounts() {\r\n      if (!this.user || !this.active_doc) return [];\r\n      // get all linked accounts from doc.linked\r\n      return this.active_doc.linked || [];\r\n    },\r\n    /**\r\n     * @function non_recent_signin\r\n     * @description Check if user signed in within the last 24 hours\r\n     * @returns {Boolean} if the user's session started within the last 24 hours\r\n     * @default false\r\n     */\r\n    non_recent_signin() {\r\n      // return true if user signed in within the last 24 hours\r\n      if (!this.user) return false;\r\n      let last_signin = this.user?.metadata?.lastSignInTime;\r\n      if (!last_signin) return false;\r\n      last_signin = new Date(last_signin);\r\n      let diff = new Date().getTime() - last_signin.getTime();\r\n      return diff > 24 * 60 * 60 * 1000;\r\n    },\r\n    /**\r\n     * @function recently_joined\r\n     * @description Check if user joined within the last 12 hours\r\n     * @returns {Boolean} if the user's account was created within the last 12 hours\r\n     * @default false\r\n     */\r\n    recently_joined() {\r\n      // return true if user joined within the last 12 hours\r\n      if (!this.user) return false;\r\n      let creation_time = this.user?.metadata?.creationTime;\r\n      if (!creation_time) return false;\r\n      creation_time = new Date(creation_time);\r\n      let diff = new Date().getTime() - creation_time.getTime();\r\n      return diff < 12 * 60 * 60 * 1000;\r\n    },\r\n    /**\r\n     * @function is_teacher\r\n     * @description Check if user is a teacher, or is in teacher mode locally (for testing)\r\n     * @returns {Boolean} if the user is a teacher\r\n     * @default false\r\n     */\r\n    is_teacher() {\r\n      // check if email is a teacher email (ends in ORG_DOMAIN) && has letters in the first part\r\n      if (!this.user) return false;\r\n      if (\r\n        this.active_doc?.teacher_mode == true ||\r\n        window?.localStorage?.MVTT_teacher_mode == \"true\"\r\n      ) {\r\n        if (this.active_doc?.teacher_mode == true || this.active_doc?.teacher_mode == null) {\r\n          window.localStorage.setItem(\"MVTT_teacher_mode\", true);\r\n          if (this.personal_account) {\r\n            _statuslog(\"🏫 No teacher mode for personal account\");\r\n            return false;\r\n          } else {\r\n            _statuslog(\"🏫 Local teacher mode\");\r\n            return true;\r\n          }\r\n        } else {\r\n          window.localStorage.setItem(\"MVTT_teacher_mode\", false);\r\n          _statuslog(\"🏫 Teacher mode disabled locally to reflect remote changes\");\r\n        }\r\n      }\r\n\r\n      let email = this.user.email;\r\n      let [first, last] = email.split(\"@\");\r\n      if (last == \"mvla.net\" && !/\\d/.test(first)) {\r\n        _statuslog(\"🏫 Teacher mode enabled for non-student district account\");\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n    /**\r\n     * @function done_daily_survey\r\n     * @description Check if user has completed the daily survey, or is a teacher\r\n     * @returns {Boolean} if the user / proxy for the user has completed the join form\r\n     * @default false\r\n     * @see {@link save_daily_survey}\r\n     * @note Returns true if user is a teacher, since we're not tracking data for them\r\n     */\r\n    done_daily_survey() {\r\n      if (!this.active_doc) return false;\r\n      // if (this.is_teacher) return true;\r\n      return this.active_doc?.done_surveys && this.active_doc.done_surveys?.includes(today);\r\n    },\r\n    /**\r\n     * @function done_join_form\r\n     * @description Check if user has completed the join form\r\n     * @returns {Boolean} if the user / proxy for the user has completed the join form\r\n     * @default false\r\n     */\r\n    done_join_form() {\r\n      if (!this.user) return false;\r\n      return !!this.active_doc?.join_form;\r\n    },\r\n    /**\r\n     * @function account_ref\r\n     * @description Get the user's absolute document reference (the signed-in account, even if it's a linked account)\r\n     * @returns {Object} The firebase document reference for the user's account\r\n     * @default null\r\n     */\r\n    account_ref() {\r\n      if (!this.user) return null;\r\n      return doc(db, \"users\", this.user.uid);\r\n    },\r\n    /**\r\n     * @function linked_account_ref\r\n     * @description Get the user's linked account document reference (the account that the user is linked to, if it exists)\r\n     * @returns {Object} The firebase document reference for the user's linked account\r\n     * @default null\r\n     */\r\n    linked_account_ref() {\r\n      if (!this.user || !this.account_doc) return null;\r\n      if (!this.account_doc.linked_to) return null;\r\n      return doc(db, \"users\", this.account_doc.linked_to);\r\n    },\r\n    /**\r\n     * @function active_ref\r\n     * @description Get the user's active document reference (the signed-in account's doc ref, or the linked account's if it exists)\r\n     * @returns {Object} The firebase document reference for the user's active account\r\n     * @default null\r\n     */\r\n    active_ref() {\r\n      return this.personal_account ? this.linked_account_ref : this.account_ref;\r\n    },\r\n    /**\r\n     * @function active_doc\r\n     * @description Get the user's active document (the signed-in account's doc, or the linked account's if it exists)\r\n     * @returns {Object} The local copy of the document being used for dashboard data\r\n     * @default null\r\n     * @see {@link active_ref}\r\n     */\r\n    active_doc() {\r\n      return this.personal_account ? this.linked_account_doc : this.account_doc;\r\n    },\r\n    /**\r\n     * @function get_theme\r\n     * @description Get theme from local storage or user doc\r\n     * @returns {String} \"light\" or \"dark\"\r\n     * @default \"light\"\r\n     */\r\n    get_theme() {\r\n      // get local\r\n      let local_theme = this.theme || window.localStorage.getItem(\"theme\");\r\n      // get userdoc theme\r\n      let active_doc_theme = this.active_doc?.prefs?.theme;\r\n      // set new to system by default\r\n      let new_theme = window.matchMedia(\"(prefers-color-scheme: dark)\").matches ? \"dark\" : \"light\";\r\n      // if not userdoc theme, use local theme, and set userdoc theme to local theme\r\n      if (!active_doc_theme) {\r\n        if (local_theme) {\r\n          // set to local if local exists\r\n          new_theme = local_theme;\r\n        } else {\r\n          // set to system if local doesn't exist, and set update local\r\n          window.localStorage.setItem(\"theme\", new_theme);\r\n        }\r\n        if (this.active_doc) {\r\n          let new_doc = { ...this.active_doc };\r\n          new_doc.prefs = { ...new_doc.prefs, theme: new_theme };\r\n          this.set_active(new_doc);\r\n          this.update_remote();\r\n        }\r\n        return local_theme || \"light\";\r\n      }\r\n      // if userdoc theme, use userdoc theme, and set local theme to userdoc theme\r\n      else {\r\n        if (local_theme != active_doc_theme) {\r\n          window.localStorage.setItem(\"theme\", active_doc_theme);\r\n        }\r\n        return active_doc_theme ? active_doc_theme : \"light\";\r\n      }\r\n    },\r\n  },\r\n  /** The actions to manipulate the store state */\r\n  actions: {\r\n    /**\r\n     * @function code_from_ref_helper\r\n     * @param {String} ref ref in email/uid format\r\n     * @returns {String} 6-character code from ref\r\n     * @see {@link code_from_ref}\r\n     */\r\n    hash(ref) {\r\n      let hash = CryptoJS.SHA256(ref).toString();\r\n      return hash.substring(0, 5);\r\n    },\r\n    /**\r\n     * @function code_from_ref\r\n     * @description Create a proxy code from a ref (email/uid)\r\n     * @param {String} ref ref in email/uid format\r\n     * @see {@link hash}\r\n     */\r\n    async code_from_ref(ref) {\r\n      try {\r\n        if (!ref) return Promise.reject(\"No ref provided\");\r\n        // fix ref to be in email@mvla.net/uid\r\n        // - fix for different formats\r\n        ref = ref.split(\"~\").join(\"/\");\r\n        // - remove domain from email and re-add\r\n        let [_email, _id] = ref.split(\"/\");\r\n        if (!_email || !_id) return Promise.reject(\"Invalid ref\");\r\n        _email = _email.split(\"@\")[0] + ORG_DOMAIN;\r\n        ref = _email + \"/\" + _id;\r\n\r\n        // get code\r\n        const code = this.hash(ref);\r\n\r\n        // check if class object already has code in this.classes\r\n        let class_obj = this.classes.find((e) => e.id == ref);\r\n        if (class_obj?.code !== code) {\r\n          // add ref to code doc\r\n          const code_ref = doc(db, \"codes\", code);\r\n          await setDoc(code_ref, { ref: ref });\r\n\r\n          // add code to class doc\r\n          const class_ref = doc(db, \"classes\", _email, \"classes\", _id);\r\n          await updateDoc(class_ref, { code: code }, { merge: true });\r\n        }\r\n        return Promise.resolve(code);\r\n      } catch (err) {\r\n        return Promise.reject(err);\r\n      }\r\n    },\r\n    /**\r\n     * @function ref_from_code\r\n     * @description Get the ref (email/uid) from a code\r\n     * @param {String} code The code to get the ref for\r\n     * @returns {Promise} A promise that resolves to the ref (email/uid) or rejects with an {String} error\r\n     */\r\n    async ref_from_code(code) {\r\n      try {\r\n        if (!code) throw \"No code provided\";\r\n        // get ref from code doc\r\n        const code_ref = doc(db, \"codes\", code);\r\n        const code_doc = await getDoc(code_ref);\r\n        _statuslog(\"🔗 Got code doc\", code_doc.data());\r\n        if (!code_doc.exists()) throw \"Code doesn't exist\";\r\n\r\n        let ref = code_doc.data().ref;\r\n        if (!ref) throw \"Code doesn't have ref\";\r\n\r\n        // fix ref to use url email(without domain)~uid format\r\n        let [_email, _id] = ref.split(\"/\");\r\n        if (!_email || !_id) throw \"Invalid ref\";\r\n        _email = _email.split(\"@\")[0];\r\n        ref = _email + \"~\" + _id;\r\n        return Promise.resolve(ref);\r\n      } catch (err) {\r\n        return Promise.reject(err);\r\n      }\r\n    },\r\n    /**\r\n     * @function toggle_teacher\r\n     * @description Toggle teacher mode (for testing)\r\n     * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\r\n     * @see {@link is_teacher}\r\n     */\r\n    async toggle_teacher() {\r\n      // use localStorage.MVTT_teacher_mode as basis for toggle, then set the localStorage and remote doc\r\n      if (!this.user) return;\r\n      let prev =\r\n        this.active_doc?.teacher_mode || window.localStorage.getItem(\"MVTT_teacher_mode\") == \"true\";\r\n      window.localStorage.setItem(\"MVTT_teacher_mode\", !prev);\r\n      let new_text = !prev ? \"on\" : \"off\";\r\n      if (this.active_doc) {\r\n        if (!prev) {\r\n          this.active_doc.teacher_mode = true;\r\n        } else {\r\n          delete this.active_doc.teacher_mode;\r\n        }\r\n        await this.update_remote();\r\n        _statuslog(`🏫 Remote teacher mode toggled ${new_text}`);\r\n      }\r\n      _statuslog(`🏫 Local teacher mode toggled ${new_text}`);\r\n      new SuccessToast(`Teacher mode toggled ${new_text}`, 2000);\r\n    },\r\n\r\n    /**\r\n     * @function get_tasks\r\n     * @description Get all tasks from all classes\r\n     * @returns {Promise} Promise that resolves to Array of all tasks from all classes, with class name and color added\r\n     * @default []\r\n     * @see {@link fetch_classes}\r\n     */\r\n    async get_tasks() {\r\n      try {\r\n        if (!this.classes?.length) return Promise.resolve([]);\r\n        // get all the classes with this.classes(), then get all their tasks and combine them into an array\r\n        let tasks = [];\r\n        let classes = this.classes;\r\n        for (let i = 0; i < classes.length; i++) {\r\n          let class_tasks = classes[i].tasks;\r\n          class_tasks = class_tasks ? class_tasks : [];\r\n          // add class name and color to each task\r\n          for (let j = 0; j < class_tasks.length; j++) {\r\n            classes[i].name = classes[i].name ? classes[i].name : \"Unnamed Class\";\r\n            // check task date type and convert to date object if necessary\r\n            if (typeof class_tasks[j].date == \"string\") {\r\n              // convert to mm-dd-yyyy from yyyy-mm-dd\r\n              class_tasks[j].date = class_tasks[j].date.split(\"T\")[0];\r\n              let [year, month, day] = class_tasks[j].date.split(\"-\");\r\n              class_tasks[j].date = `${month}-${day}-${year}`;\r\n              class_tasks[j].date = new Date(class_tasks[j].date);\r\n              class_tasks[j].date = isNaN(class_tasks[j].date) ? null : class_tasks[j].date;\r\n            }\r\n            // set color from parent class color\r\n            class_tasks[j].color = classes[i].color;\r\n            tasks.push({\r\n              ...class_tasks[j],\r\n              class_name: `P${classes[i].period} - ${classes[i].name}`,\r\n            });\r\n          }\r\n        }\r\n        // sort tasks by day, if day the same, sort by period, then by name\r\n        tasks.sort((a, b) => {\r\n          a.name = a.name ? a.name : \"\";\r\n          b.name = b.name ? b.name : \"\";\r\n          if (a.date && b.date) {\r\n            if (a.date.getTime() == b.date.getTime()) {\r\n              if (a.period == b.period) {\r\n                return a.name.localeCompare(b.name);\r\n              }\r\n              return a.period - b.period;\r\n            }\r\n            return a.date.getTime() - b.date.getTime();\r\n          }\r\n          return a.name.localeCompare(b.name);\r\n        });\r\n\r\n        this.tasks = tasks;\r\n        return Promise.resolve(tasks);\r\n      } catch (err) {\r\n        return Promise.reject(err);\r\n      }\r\n    },\r\n    /**\r\n     * @function clear\r\n     * @description Reset the store state and local storage, and redirect to home if page requires auth\r\n     * @returns Nothing\r\n     * @note Imperfect, and isn't enough to prevent errors when the app updates to a version with a different store state structure\r\n     */\r\n    clear() {\r\n      this.user = null;\r\n      this.account_doc = null;\r\n      this.linked_account_doc = null;\r\n      this.classes = [];\r\n      this.tasks = [];\r\n      this.loaded_email = null;\r\n      this.loaded_classes = null;\r\n      this.personal_account = false;\r\n      this.teacher = {\r\n        doc_ref: null,\r\n        collection_ref: null,\r\n      };\r\n      window.localStorage.removeItem(\"MVTT_app_state\");\r\n      // if page requires auth, redirect to home\r\n      if (router.currentRoute?.value?.meta?.requiresAuth) {\r\n        router.push(\"/\");\r\n      }\r\n    },\r\n    /**\r\n     * @function set_active\r\n     * @description Set the active document (the signed-in account's doc, or the linked account's if it exists) to the provided document\r\n     * @param {Object} data The document data to replace the active document (account_doc or linked_doc) with\r\n     */\r\n    set_active(data) {\r\n      if (!data) return;\r\n      if (this.personal_account) {\r\n        this.linked_account_doc = data;\r\n      } else {\r\n        this.account_doc = data;\r\n      }\r\n    },\r\n    /**\r\n     * @function doc_from_uid\r\n     * @description Get a user document from a uid\r\n     * @param {String} uid The uid of the user to get the document for\r\n     * @returns {Promise} A promise that resolves to the {Object} user document or rejects with an {String} error\r\n     * @see {@link getDoc}\r\n     * @see {@link link_account_uid}\r\n     */\r\n    async doc_from_uid(uid) {\r\n      try {\r\n        if (!uid) throw \"No account uid provided\";\r\n        // get user document from uid\r\n        let linked_doc = await getDoc(doc(db, \"users\", uid));\r\n        _statuslog(\"🔗 Got linking account's document\", linked_doc.data());\r\n        if (!linked_doc.exists()) throw \"Account doesn't exist or you haven't been added yet\";\r\n        let linked_doc_data = linked_doc.data();\r\n        return Promise.resolve(linked_doc_data);\r\n      } catch (err) {\r\n        _statuslog(\"🔗 Couldn't get linking account's document\", err);\r\n        return Promise.reject(err);\r\n      }\r\n    },\r\n    /**\r\n     * @function link_account_uid\r\n     * @description Link a user account to another user's account by uid (for personal accounts only)\r\n     * @param {String} uid The uid of the user to link to\r\n     * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\r\n     * @see {@link invite_linked}\r\n     */\r\n    async link_account_uid(uid) {\r\n      if (!uid) return;\r\n      if (!this.personal_account) {\r\n        new WarningToast(\"This account is a primary account and cannot be linked\", 3000);\r\n        return;\r\n      }\r\n      try {\r\n        let linked_doc = await this.doc_from_uid(uid);\r\n        if (!linked_doc) throw \"Account doesn't exist or you haven't been invited\";\r\n        // update remote\r\n        this.account_doc.linked_to = uid;\r\n        await this.update_remote();\r\n        new SuccessToast(`Successfully linked to ${linked_doc.name}'s account!`, 4000);\r\n      } catch (err) {\r\n        new ErrorToast(\"Couldn't link account\", err, 2000);\r\n        return Promise.reject(err);\r\n      }\r\n    },\r\n    /**\r\n     * @function invite_linked\r\n     * @description Invite a user account to link to another user's account (for personal accounts only,) including sending them an email with the code to join\r\n     * @param {String} email The email of the user to invite (and send an invite email to)\r\n     * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\r\n     */\r\n    async invite_linked(email) {\r\n      if (!this.user || !this.active_doc) return;\r\n      if (this.personal_account) {\r\n        new WarningToast(\"This account is already linked!\", 2000);\r\n      }\r\n      // exclude empty or mvla emails\r\n      if (!email || validOrgAccount(email) || !email.includes(\"@\")) {\r\n        new WarningToast(\"Please enter a valid non-mvla email\", 2000);\r\n        return;\r\n      }\r\n      // check if email is already linked (has entry with matching .email)\r\n      if (this.linked_accounts.includes(email)) {\r\n        new WarningToast(\"That account is already linked\", 2000);\r\n        return;\r\n      }\r\n      // add to doc.linked\r\n      if (!this.active_doc.linked) {\r\n        if (this.personal_account) {\r\n          this.linked_account_doc.linked = [];\r\n        } else {\r\n          this.account_doc.linked = [];\r\n        }\r\n      }\r\n\r\n      // add email to queue\r\n      let email_queue = collection(db, \"mail\");\r\n      try {\r\n        let sent_email = await addDoc(email_queue, {\r\n          to: email,\r\n          cc: this.user.email,\r\n          from: `${this.active_doc.name} via MV Test Tracker <mail@mvtt.app>`,\r\n          fromname: this.active_doc.name + \" via MV Test Tracker\",\r\n          template: {\r\n            name: \"link_invite\",\r\n            data: {\r\n              sender_name: this.active_doc.name.split(\" \")[0],\r\n              sender_uid: this.user.uid,\r\n            },\r\n          },\r\n        });\r\n        // wait for the email document to have keys .delivery.attempts > 0 and .delivery.error == null\r\n        let email_doc_ref = doc(email_queue, sent_email.id);\r\n        let email_doc = await getDoc(email_doc_ref);\r\n        let checks = 1;\r\n        while (\r\n          !email_doc.exists() ||\r\n          (!!email_doc.data()?.delivery?.attempts == 0 && checks <= 3)\r\n        ) {\r\n          await new Promise((resolve) => setTimeout(resolve, (2 ^ checks) * 2000));\r\n          email_doc = await getDoc(email_doc_ref);\r\n          _statuslog(\"📧 Checked email doc\");\r\n          checks++;\r\n        }\r\n        if (\r\n          !email_doc.data()?.delivery?.info?.accepted?.includes(email) ||\r\n          email_doc.data()?.delivery?.attempts == 0\r\n        ) {\r\n          _statuslog(\"📧 Email failed to send\", email_doc.data());\r\n          throw \"Email failed to send\";\r\n        }\r\n\r\n        // update remote\r\n        if (this.personal_account) {\r\n          this.linked_account_doc.linked.push(email);\r\n        } else {\r\n          this.account_doc.linked.push(email);\r\n        }\r\n        await this.update_remote();\r\n        new SuccessToast(`We notified ${email}, you'll receive a copy of the email too!`, 4000);\r\n        return Promise.resolve();\r\n      } catch (err) {\r\n        new ErrorToast(`Couldn't invite \"${email}\"`, err, 2000);\r\n        return Promise.reject(err);\r\n      }\r\n    },\r\n    /**\r\n     * @function uninvite_linked\r\n     * @description Unlink a user account from another user's account (for personal accounts only)\r\n     * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\r\n     * @see {@link invite_linked}\r\n     */\r\n    async uninvite_linked(email) {\r\n      try {\r\n        if (!this.user) return;\r\n        // if exists in userdoc.linked, remove and save\r\n        if (this.active_doc.linked.includes(email)) {\r\n          let filtered_linked = this.active_doc.linked.filter((e) => e != email);\r\n          if (this.personal_account) {\r\n            this.linked_account_doc.linked = filtered_linked;\r\n          } else {\r\n            this.account_doc.linked = filtered_linked;\r\n          }\r\n          await this.update_remote();\r\n          new SuccessToast(`Removed ${email} from your linked accounts`, 2000);\r\n        } else {\r\n          new WarningToast(`${email} is not linked to this account`, 2000);\r\n        }\r\n        Promise.resolve();\r\n      } catch (err) {\r\n        new ErrorToast(`Couldn't unlink \"${email}\"`, err, 2000);\r\n        return Promise.reject(err);\r\n      }\r\n    },\r\n    /**\r\n     * @function refresh_timeout\r\n     * @description A proxy for the refreshTimeout function in firebase.js (to reduce unnecessary onSnapshot calls)\r\n     * @param {Number} delay The delay in milliseconds to refresh the timeout for (default 1000 set in firebase.js)\r\n     * @see {@link refreshTimeout}\r\n     */\r\n    refresh_timeout(delay) {\r\n      this.paused = false;\r\n      // refresh listener timeout if user is logged in\r\n      if (!this.user) return;\r\n      refreshTimeout(delay);\r\n    },\r\n    /**\r\n     * @function login_promise\r\n     * @description A wrapper for the store.user state, to wait for the user to be set\r\n     * @returns {Promise} A promise that resolves to the user object\r\n     * @see {@link user}\r\n     * @see {@link login}\r\n     * @note Currently not very widely used, but should be implemented more in order to prevent excessive store watcher calls\r\n     */\r\n    async login_promise() {\r\n      // wait for this.user to be set\r\n      return new Promise((resolve) => {\r\n        let interval = setInterval(() => {\r\n          if (this.user) {\r\n            clearInterval(interval);\r\n            resolve(this.user);\r\n          }\r\n        }, 100);\r\n      });\r\n    },\r\n    /**\r\n     * @function save_join_form\r\n     * @description Save the responses from the join form to the active user's document\r\n     * @param {Object} responses The responses from the join form to save\r\n     * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\r\n     */\r\n    async save_join_form(responses) {\r\n      try {\r\n        if (!this.user || !this.active_doc) throw \"No doc to save join form to\";\r\n        // wait for user doc to be created / exist then save responses to doc.join_form\r\n        if (this.personal_account) {\r\n          this.linked_account_doc = this.linked_account_doc || {};\r\n          this.linked_account_doc.join_form = responses;\r\n        } else {\r\n          this.account_doc = this.account_doc || {};\r\n          this.account_doc.join_form = responses;\r\n        }\r\n        await this.update_remote();\r\n        return Promise.resolve();\r\n      } catch (err) {\r\n        return Promise.reject(err);\r\n      }\r\n    },\r\n    /**\r\n     * @function save_daily_survey\r\n     * @description Save the responses from the daily survey to the active user's document\r\n     * @param {Object} responses The responses from the daily survey to save\r\n     * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\r\n     * @see {@link done_daily_survey}\r\n     */\r\n    async save_daily_survey(responses) {\r\n      // save responses in /survey/daily/{date}/{uid}\r\n      try {\r\n        // wait for user login\r\n        if (!this.user) await this.login_promise();\r\n        let survey_ref = doc(db, \"survey\", \"daily\", today, this.user.uid);\r\n        let response_obj = {\r\n          time: new Date().getTime(),\r\n          responses: responses,\r\n        };\r\n        await setDoc(survey_ref, response_obj);\r\n        // update user doc to have date in \"done_surveys\"\r\n        let updated_surveys = this.active_doc?.done_surveys ? this.active_doc.done_surveys : [];\r\n        updated_surveys.push(today);\r\n        if (this.personal_account) {\r\n          this.linked_account_doc.done_surveys = updated_surveys;\r\n        } else {\r\n          this.account_doc.done_surveys = updated_surveys;\r\n        }\r\n        await this.update_remote();\r\n        new SuccessToast(\"Saved daily survey\", 2000);\r\n        return Promise.resolve();\r\n      } catch (err) {\r\n        new ErrorToast(\"Couldn't save daily survey\", err, 2000);\r\n        return Promise.reject(err);\r\n      }\r\n    },\r\n    /**\r\n     * @function toggle_theme\r\n     * @description Toggle the theme between light and dark, and save to local storage and user account doc\r\n     * @returns Nothing\r\n     * @see {@link get_theme}\r\n     * @see {@link theme}\r\n     */\r\n    async toggle_theme() {\r\n      this.theme = this.get_theme == \"light\" ? \"dark\" : \"light\";\r\n      window.localStorage.setItem(\"theme\", this.theme);\r\n      if (this.active_doc) {\r\n        // update\r\n        let new_doc = { ...this.active_doc };\r\n        new_doc.prefs = { ...new_doc.prefs, theme: this.theme };\r\n        // fixes for legacy\r\n        delete new_doc.theme;\r\n        // commit changes\r\n        this.set_active(new_doc);\r\n        await this.update_remote();\r\n      }\r\n      new SuccessToast(`Switched to ${this.theme} theme`, 2000);\r\n      // trigger theme update\r\n      this.theme = this.get_theme;\r\n    },\r\n\r\n    /**\r\n     * @function remove_class_id_helper\r\n     * @description Helper function to remove a class from the active user's document and save changes to remote\r\n     * @returns Nothing\r\n     * @see {@link remove_class}\r\n     * @see {@link remove_invalid}\r\n     * @see {@link fetch_classes}\r\n     */\r\n    async remove_class_id_helper(class_id) {\r\n      let filtered_classes = this.active_doc.classes.filter((c) => c != class_id);\r\n      if (this.personal_account) {\r\n        this.linked_account_doc.classes = filtered_classes;\r\n      } else {\r\n        this.account_doc.classes = filtered_classes;\r\n      }\r\n      // remove from local\r\n      this.classes = this.classes.filter((c) => c.id != class_id);\r\n      this.get_tasks();\r\n      // update remote\r\n      await this.update_remote();\r\n    },\r\n    /**\r\n     * @function remove_invalid\r\n     * @description Remove a class from the active user's document, and show a toast saying that the class was removed because it was invalid\r\n     * @returns Nothing\r\n     * @see {@link remove_class_id_helper}\r\n     */\r\n    async remove_invalid(class_id) {\r\n      await this.remove_class_id_helper(class_id);\r\n      new WarningToast(`Removed non-existent class \"${class_id}\"`, 2000);\r\n      return Promise.resolve();\r\n    },\r\n    /**\r\n     * @function remove_class\r\n     * @description Remove a class from the active user's document, and show a toast saying that the class was removed manually\r\n     * @returns Nothing\r\n     * @see {@link remove_class_id_helper}\r\n     */\r\n    async remove_class(class_id) {\r\n      try {\r\n        await this.remove_class_id_helper(class_id);\r\n        _statuslog(\"🗑️ Removed class from user's doc: \" + class_id);\r\n        new SuccessToast(\"Left class\", 2000);\r\n        return Promise.resolve();\r\n      } catch (err) {\r\n        _statuslog(\"🔥 Error removing class from user's doc: \" + err);\r\n        new ErrorToast(\"Couldn't leave class\", err, 2000);\r\n        return Promise.reject(err);\r\n      }\r\n    },\r\n    /**\r\n     * @function set_user\r\n     * @description Set the user object and load the user's document, with some additional checks and error handling. Also set the user's document if it exists, or create it if it doesn't, and logs them out if the account is deemed invalid\r\n     * @returns Nothing\r\n     * @see {@link user}\r\n     * @see {@link authChangeAction}\r\n     * @see {@link account_doc}\r\n     * @see {@link linked_account_doc}\r\n     * @see {@link personal_account}\r\n     */\r\n    set_user(user) {\r\n      _statuslog(\"🔑 Setting user\");\r\n      // load user doc to check .personal_account\r\n      getDoc(doc(db, \"users\", user.uid))\r\n        .then((userDoc) => {\r\n          if (userDoc.exists()) {\r\n            this.account_doc = userDoc.data();\r\n            this.personal_account = this.account_doc?.personal_account;\r\n          } else {\r\n            this.account_doc = null;\r\n            this.linked_account_doc = null;\r\n            this.personal_account = false;\r\n          }\r\n          if (\r\n            !user.email ||\r\n            (!validOrgAccount(user.email) &&\r\n              !this.personal_account &&\r\n              !(this.account_doc?.personal_account && this.account_doc?.linked_to))\r\n          ) {\r\n            auth.signOut();\r\n            new WarningToast(\r\n              \"Please use your MVLA email to log in, or use an account that has been linked\",\r\n              4000\r\n            );\r\n            this.clear();\r\n            return;\r\n          }\r\n          this.user = user;\r\n          // if this is a personal account, get the associated linked account doc\r\n          if (this.personal_account) {\r\n            this.get_remote();\r\n          }\r\n          // if teacher, setup this.teacher refs\r\n          if (this.is_teacher) {\r\n            _statuslog(\"🏫 In teacher mode\");\r\n            this.teacher.doc_ref = doc(db, \"classes\", this.user.email);\r\n            this.teacher.collection_ref = collection(this.teacher.doc_ref, \"classes\");\r\n          }\r\n          // if router has a redirect, go to it\r\n          if (\r\n            router.currentRoute?.value?.query?.redirect &&\r\n            !router.currentRoute?.value?.meta?.blockStandardRedirect\r\n          ) {\r\n            router.replace(router.currentRoute?.value?.query?.redirect);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          auth.signOut();\r\n          new WarningToast(\"Something went wrong loading your user data\", 2000);\r\n          _statuslog(\"🔥 Error loading user data: \" + err);\r\n        });\r\n    },\r\n    /**\r\n     * @function login\r\n     * @description Log the user in with Google OAuth (using the appropriate prompt type based on window support), and set the user object.\r\n     * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\r\n     * @see {@link user}\r\n     * @see {@link logout}\r\n     */\r\n    async login() {\r\n      new Toast(\r\n        \"Opening login popup...\",\r\n        \"default\",\r\n        1000,\r\n        require(\"@svonk/util/assets/info-locked-icon.svg\")\r\n      );\r\n      // sign in with google, then set user data\r\n      // if electron, use redirect, otherwise, use popup\r\n      await (isElectron || isIFrame()\r\n        ? signInWithRedirect(auth, provider)\r\n        : signInWithPopup(auth, provider)\r\n      )\r\n        .then(() => {\r\n          if (!this.user || !this.user.email || !validOrgAccount(this.user.email)) return;\r\n          new Toast(\r\n            \"Logged in as \" + this.user.displayName + \"!\",\r\n            \"default\",\r\n            2000,\r\n            require(\"@svonk/util/assets/info-unlocked-icon.svg\")\r\n          );\r\n          _statuslog(\"🔑 Logged in as \" + this.user.displayName);\r\n          authChangeAction(this.user);\r\n          if (\r\n            !router.currentRoute?.value?.query?.redirect &&\r\n            !router.currentRoute?.value?.meta?.blockStandardRedirect\r\n          ) {\r\n            router.push(\"/portal\");\r\n          }\r\n          return Promise.resolve();\r\n        })\r\n        .catch((error) => {\r\n          let err = cleanError(error);\r\n          if (\r\n            error.code == \"auth/cancelled-popup-request\" ||\r\n            error.code == \"auth/popup-closed-by-user\" ||\r\n            error.code == \"auth/user-cancelled\"\r\n          ) {\r\n            new WarningToast(err, 2000);\r\n          } else {\r\n            new ErrorToast(\"Couldn't log in\", err, 2000);\r\n          }\r\n          return Promise.reject(err);\r\n        });\r\n    },\r\n    /**\r\n     * @function login_personal\r\n     * @description Most things that login() does, but for personal accounts (does not preform org account check, enforce sign-in domain, or redirect)\r\n     * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\r\n     * @see {@link personal_account}\r\n     * @see {@link user}\r\n     * @see {@link login}\r\n     */\r\n    async login_personal() {\r\n      new Toast(\r\n        \"Opening login popup...\",\r\n        \"default\",\r\n        1000,\r\n        require(\"@svonk/util/assets/info-locked-icon.svg\")\r\n      );\r\n      // create new provider with no hd\r\n      const personal_provider = new GoogleAuthProvider();\r\n      personal_provider.addScope(\"email\");\r\n      personal_provider.addScope(\"profile\");\r\n      // sign in with google, then set user data\r\n      // if electron, use redirect, otherwise, use popup\r\n      await (isElectron || isIFrame()\r\n        ? signInWithRedirect(auth, personal_provider)\r\n        : signInWithPopup(auth, personal_provider)\r\n      )\r\n        .then(() => {\r\n          if (!this.user || !this.user.email || validOrgAccount(this.user.email)) return;\r\n          new Toast(\r\n            \"Logged in as \" + this.user.displayName + \"!\",\r\n            \"default\",\r\n            2000,\r\n            require(\"@svonk/util/assets/info-unlocked-icon.svg\")\r\n          );\r\n          _statuslog(\"🔑 Logged in as \" + this.user.displayName);\r\n          authChangeAction(this.user);\r\n          return Promise.resolve();\r\n        })\r\n        .catch((err) => {\r\n          new ErrorToast(\"Couldn't log in\", err, 2000);\r\n          return Promise.reject(err);\r\n        });\r\n    },\r\n    /**\r\n     * @function logout\r\n     * @description Log the user out and clear the store state\r\n     * @returns Nothing\r\n     * @see {@link clear}\r\n     */\r\n    logout() {\r\n      auth.signOut();\r\n      this.clear();\r\n      new Toast(\"Logged Out\", \"default\", 1500, require(\"@svonk/util/assets/info-locked-icon.svg\"));\r\n    },\r\n    /**\r\n     * @function get_remote\r\n     * @description Get the user's document from the remote database, and create it if it doesn't exist. Preforms additional checks for personal accounts, and removes the linked account if it doesn't exist\r\n     * @returns Nothing\r\n     * @see {@link create_doc}\r\n     * @see {@link update_remote}\r\n     * @see {@link active_doc}\r\n     */\r\n    async get_remote() {\r\n      // set document data\r\n      // get doc from firebase\r\n      let active_doc = await getDoc(this.account_ref);\r\n      _statuslog(\"📄 Got user doc remote\");\r\n      if (active_doc.exists()) {\r\n        this.set_active(active_doc.data());\r\n      } else if (this.personal_account) {\r\n        // linked account doesn't exist\r\n        _statuslog(\"🔗 Linked account doesn't exist, removing it and going home\");\r\n        new WarningToast(\"Linked account doesn't exist, removing it and going home\", 2000);\r\n        this.account_doc.linked_to = null;\r\n        await this.update_wrapper_acc_doc();\r\n        this.linked_account_doc = null;\r\n        router.push(\"/\");\r\n      } else {\r\n        // if doc doesn't exist, create it\r\n        await this.create_doc();\r\n        await this.get_remote();\r\n      }\r\n    },\r\n    /**\r\n     * @function update_remote\r\n     * @description Update the active user's document in the remote database\r\n     * @returns Nothing\r\n     * @see {@link get_remote}\r\n     * @see {@link active_doc}\r\n     * @see {@link active_ref}\r\n     */\r\n    async update_remote() {\r\n      // update remote doc\r\n      await setDoc(this.active_ref, this.active_doc, { merge: true });\r\n      _statuslog(\"⏶ Pushed changes to remote\");\r\n    },\r\n    /**\r\n     * @function update_wrapper_acc_doc\r\n     * @description Update the authenticated user's document in the remote database (for personal accounts only)\r\n     * @returns Nothing\r\n     * @see {@link update_remote}\r\n     * @see {@link personal_account}\r\n     */\r\n    async update_wrapper_acc_doc() {\r\n      await setDoc(this.account_ref, this.account_doc, { merge: true });\r\n    },\r\n    /**\r\n     * @function update_wrapper_acc_doc\r\n     * @description Update the authenticated user's document in the remote database with the data given (for personal accounts only)\r\n     * @returns Nothing\r\n     * @see {@link update_remote}\r\n     * @see {@link personal_account}\r\n     * @see {@link update_wrapper_acc_doc}\r\n     */\r\n    async update_wrapper_with_merge(data) {\r\n      try {\r\n        await setDoc(this.account_ref, data, { merge: true });\r\n        return Promise.resolve();\r\n      } catch (err) {\r\n        return Promise.reject(err);\r\n      }\r\n    },\r\n    /**\r\n     * @function create_doc\r\n     * @description Create the user's document in the remote database, create a teacher document if the user is a teacher, and create a personal account if the user is using a personal account. Also preforms onboarding for non-teacher\r\n     * @returns Nothing\r\n     * @see {@link create_teacher_doc}\r\n     * @see {@link update_remote}\r\n     * @see {@link get_remote}\r\n     */\r\n    async create_doc() {\r\n      _statuslog(\"📄 User document doesn't exist, creating new one...\");\r\n      new WarningToast(\"User document doesn't exist, creating new one...\", 2000);\r\n      this.account_doc = {\r\n        name: this.user.displayName,\r\n        email: this.user.email,\r\n        classes: [],\r\n        prefs: { theme: this.get_theme, hide_timeout: false },\r\n      };\r\n      if (this.personal_account) {\r\n        this.account_doc = {\r\n          linked_to: null,\r\n          personal_account: true,\r\n          name: this.user.displayName,\r\n          email: this.user.email,\r\n          prefs: { theme: this.get_theme, hide_timeout: false },\r\n        };\r\n      }\r\n      if (this.is_teacher) {\r\n        await this.create_teacher_doc();\r\n        new SuccessToast(\"Created user & teacher documents; Let's get started\", 2000);\r\n      } else {\r\n        await this.update_remote();\r\n        // do onboarding\r\n        new SuccessToast(\"Created user document; Let's get started\", 2000);\r\n        if (!this.personal_account) {\r\n          router.push({\r\n            name: \"onboarding\",\r\n            query: {\r\n              redirect: \"/settings?redirect=/portal\",\r\n            },\r\n          });\r\n        }\r\n      }\r\n    },\r\n    /**\r\n     * @function create_teacher_doc\r\n     * @description Create the teacher document for the user, and redirect to the create class page\r\n     * @returns Nothing\r\n     * @see {@link create_doc}\r\n     * @see {@link is_teacher}\r\n     */\r\n    async create_teacher_doc() {\r\n      // create teacher doc under (classes/teacher_email+ORG_DOMAIN) with sub-collection (classes)\r\n      let teacher_ref = doc(db, \"classes\", this.active_doc.email || this.user.email);\r\n      await setDoc(teacher_ref, {\r\n        name: this.active_doc.name || this.user.displayName,\r\n        email: this.active_doc.email || this.user.email,\r\n      });\r\n      this.teacher = {\r\n        doc_ref: teacher_ref,\r\n        collection_ref: collection(teacher_ref, \"classes\"),\r\n      };\r\n      router.push(\"/portal/create\");\r\n    },\r\n    /**\r\n     * @function fetch_classes\r\n     * @description Fetch all classes from the user's document and combine them into an array, while checking for duplicates and invalid classes\r\n     * @returns {Array} Array of all (unique) classes from the user's document\r\n     * @see {@link classes}\r\n     * @see {@link fetch_classes_by_email}\r\n     * @see {@link remove_invalid}\r\n     * @see {@link remove_class}\r\n     * @see {@link remove_class_id_helper}\r\n     */\r\n    async fetch_classes() {\r\n      let run_hash = Math.random().toString(36).substring(7);\r\n      _statuslog(`📚 Started fetch  | <${run_hash}>`);\r\n      // check for duplicates\r\n      if (!this.active_doc?.classes) return Promise.reject(\"Waiting for user document to load\");\r\n\r\n      let unique = [...new Set(this.active_doc.classes)];\r\n      if (unique.length != this.active_doc.classes.length) {\r\n        if (this.personal_account) {\r\n          this.linked_account_doc.classes = unique;\r\n        } else {\r\n          this.account_doc.classes = unique;\r\n        }\r\n        await this.update_remote();\r\n        new WarningToast(\"Removed duplicate classes\", 2000);\r\n        _statuslog(\"📚 Removed duplicate classes\");\r\n      }\r\n\r\n      // get all classes' data and combine into an array\r\n      let classes = [];\r\n      for (let class_path of this.active_doc.classes) {\r\n        // split class path into teacher/uid\r\n        let [teacher, class_id] = class_path.split(\"/\");\r\n        if (!teacher || !class_id) {\r\n          await this.remove_invalid(class_path);\r\n          continue;\r\n        }\r\n        // get classes sub-collection from teacher's doc\r\n        let teacher_classes = collection(db, \"classes\", teacher, \"classes\");\r\n        if (!teacher_classes) {\r\n          await this.remove_invalid(class_path);\r\n          continue;\r\n        }\r\n        // get class doc from classes sub-collection\r\n        let subclass_ref = doc(teacher_classes, class_id);\r\n        let subclass_doc = await getDoc(subclass_ref);\r\n        if (!subclass_doc.exists()) {\r\n          await this.remove_invalid(class_path);\r\n          continue;\r\n        }\r\n        // push class to array\r\n        let doc_data = subclass_doc.data();\r\n        doc_data.id = class_path;\r\n        doc_data.ref = [teacher, class_id].join(\"/\");\r\n\r\n        classes.push(doc_data);\r\n      }\r\n      _statuslog(`📚 Got class docs | <${run_hash}>`);\r\n      // get tasks for all classes in parallel\r\n      await Promise.all(\r\n        classes.map(async (class_data) => {\r\n          let tasks = [];\r\n          let [_email, _id] = class_data.ref.split(\"/\");\r\n          let class_ref = doc(db, \"classes\", _email, \"classes\", _id);\r\n          let class_tasks = collection(class_ref, \"tasks\");\r\n          let class_tasks_snapshot = await getDocs(class_tasks);\r\n          class_tasks_snapshot.forEach((task) => {\r\n            let task_data = task.data();\r\n            task_data.ref = [_email, _id, task.id].join(\"/\");\r\n            tasks.push(task_data);\r\n          });\r\n          class_data.tasks = tasks;\r\n        })\r\n      );\r\n      _statuslog(`📚 Got task docs  | <${run_hash}>`);\r\n\r\n      // sort classes by period number, then by name\r\n      classes.sort((a, b) => {\r\n        if (a.period == b.period) {\r\n          return a.name.localeCompare(b.name);\r\n        }\r\n        return a.period - b.period;\r\n      });\r\n      this.classes = classes;\r\n      this.get_tasks();\r\n      Promise.resolve();\r\n    },\r\n    /**\r\n     * @function fetch_classes_by_email\r\n     * @description Fetch all classes for a given email, and set the loaded classes to the result\r\n     * @param {String} email The email to fetch classes for\r\n     * @returns Nothing\r\n     * @see {@link loaded_classes}\r\n     * @see {@link loaded_email}\r\n     * @see {@link fetch_classes}\r\n     * @note Messy implementation, should be refactored to use a separate store state for loaded classes, or at least not use so many store state keys. Prehaps promises would work?\r\n     */\r\n    async fetch_classes_by_email(email) {\r\n      this.loaded_email = null;\r\n      if (!email || !validOrgAccount(email)) {\r\n        this.loaded_classes = null;\r\n        this.loaded_email = email;\r\n        return;\r\n      }\r\n      //let classes_maindoc = await getDoc(doc(db, \"classes\", email));\r\n      _statuslog(\"📄 Getting classes from email\");\r\n      //if (classes_maindoc.exists()) {\r\n      let classes = [];\r\n      /**\r\n       * This file contains the Vuex store for the application. It manages the state of the application and provides methods for adding, creating, and deleting classes and tasks.\r\n       * @file store/index.js\r\n       */\r\n      let classes_subcollection = collection(doc(db, \"classes\", email), \"classes\");\r\n      let classes_subcollection_query_snapshot = await getDocs(query(classes_subcollection));\r\n      _statuslog(\"📄 Got classes subcollection from email\");\r\n      classes_subcollection_query_snapshot.forEach((class_doc) => {\r\n        let class_data = class_doc.data();\r\n        class_data.id = class_doc.id;\r\n        // if user already in class, change name to \"[JOINED] name\"\r\n        if (this.active_doc?.classes.includes([email, class_doc.id].join(\"/\"))) {\r\n          class_data.is_joined = true;\r\n        }\r\n        classes.push(class_data);\r\n      });\r\n      classes.sort((a, b) => {\r\n        if (a.period == b.period) {\r\n          return a.name.localeCompare(b.name);\r\n        }\r\n        return a.period - b.period;\r\n      });\r\n      this.loaded_classes = classes;\r\n      // } else {\r\n      //    this.loaded_classes = null;\r\n      // }\r\n\r\n      this.loaded_email = email;\r\n    },\r\n    /**\r\n     * @function add_class\r\n     * @description Add a class to the active user's document, and show a toast saying that the class was added\r\n     * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\r\n     * @param {String} teacher_email The email of the teacher whose class it is\r\n     * @param {String} class_id The id of the class to add\r\n     * @param {String} class_name The name of the class being added\r\n     * @param {Number} class_period The period of the class being added\r\n     * @see {@link classes}\r\n     */\r\n    async add_class(teacher_email, class_id, class_name, class_period) {\r\n      if (!this.active_doc?.classes) return;\r\n      if (!class_id) return;\r\n\r\n      let class_key = [teacher_email, class_id].join(\"/\");\r\n      if (this.active_doc.classes.includes(class_key)) return;\r\n      if (this.personal_account) {\r\n        this.linked_account_doc.classes.push(class_key);\r\n      } else {\r\n        this.account_doc.classes.push(class_key);\r\n      }\r\n      await this.update_remote();\r\n      await this.fetch_classes();\r\n      new SuccessToast(`Added \"P${class_period} - ${class_name}\" to your classes`, 2000);\r\n      // return new success promise\r\n      return Promise.resolve();\r\n    },\r\n    /**\r\n     * @function create_class\r\n     * @description Create a class with the given object, and add it to the active user's document. (for teachers)\r\n     * @param {Object} class_obj The class object to with the class data, document will be created in /classes under the teacher's email with these contents\r\n     * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\r\n     * @see {@link is_teacher}\r\n     * @see {@link teacher}\r\n     */\r\n    async create_class(class_obj) {\r\n      _statuslog(\"🔨 Creating class\", class_obj);\r\n      if (!this.is_teacher) {\r\n        new ErrorToast(\"You need to be a teacher to create a class\", 2000);\r\n        return;\r\n      }\r\n      if (!class_obj.name || !class_obj.period) return; // handled in disabled attr of button, failsafe for db\r\n      try {\r\n        // check if there is a teacher doc and collection\r\n        if (!this.teacher.doc_ref || !this.teacher.collection_ref) {\r\n          // create teacher doc\r\n          await this.create_teacher_doc();\r\n          // call this again\r\n          await this.create_class(class_obj);\r\n          return;\r\n        }\r\n        // create class doc under teacher.collection_ref\r\n        let class_doc_ref = await addDoc(this.teacher.collection_ref, class_obj);\r\n        // add class to user doc;\r\n        new SuccessToast(`Created class \"${class_obj.name}\"`, 2000);\r\n        _statuslog(\"🏫 class_doc_ref\", class_doc_ref);\r\n        await this.add_class(\r\n          this.active_doc.email || this.user.email,\r\n          class_doc_ref.id,\r\n          class_obj.name,\r\n          class_obj.period\r\n        );\r\n        return Promise.resolve();\r\n      } catch (e) {\r\n        new ErrorToast(\"Couldn't create class\", cleanError(e), 2000);\r\n        return Promise.reject(e);\r\n      }\r\n    },\r\n    /**\r\n     * @function create_task\r\n     * @description Create a task with the given object, and add it to the classes specified in the object. (for teachers)\r\n     * @param {Object} task_obj The task object to with the task data, data will be added to /classes docs\r\n     * @param {Array} task_classes The classes to add the task to\r\n     * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\r\n     */\r\n    async create_task(task_obj, task_classes) {\r\n      try {\r\n        if (!task_obj.name && task_obj?.type != \"note\") {\r\n          return Promise.reject(\"No task name specified\");\r\n        } else if (!task_classes || task_classes.length == 0) {\r\n          return Promise.reject(\"No classes selected\");\r\n        }\r\n        // use firebase array add to add task to each class\r\n        let batch = writeBatch(db);\r\n        let updated_classes = Array.from(this.classes);\r\n        task_classes.forEach((class_id) => {\r\n          // fix any class_id that has the teacher email in it\r\n          let displayed_class_id = class_id;\r\n          let [_email, _id] = class_id.split(\"/\");\r\n          // use this.teacher.collection_ref to get class collection ref, then update the class documents within\r\n          let class_tasks_collection = collection(db, \"classes\", _email, \"classes\", _id, \"tasks\");\r\n          task_obj.class_id = displayed_class_id;\r\n\r\n          // batch add a new task doc with the data to the class_tasks_collection collection, using auto-generated id\r\n          let task_ref = doc(class_tasks_collection);\r\n          batch.set(task_ref, task_obj);\r\n          updated_classes.forEach((class_obj) => {\r\n            if (class_obj.id == displayed_class_id) {\r\n              class_obj.tasks.push({\r\n                ...task_obj,\r\n                ref: [_email, _id, task_ref.id].join(\"/\"),\r\n                class_id: displayed_class_id,\r\n                _proxy: true,\r\n              });\r\n            }\r\n          });\r\n        });\r\n        await batch.commit();\r\n        // update this.classes.tasks for each, then rerun get_tasks to update this.tasks from updated classes\r\n        this.classes = updated_classes;\r\n        this.get_tasks();\r\n\r\n        let name = task_obj.type == \"note\" ? \"\" : `\"${task_obj.name}\"`;\r\n        new SuccessToast(\r\n          `Added ${task_obj.type || \"task\"} ${name} to ${task_classes.length} class${\r\n            task_classes.length == 1 ? \"\" : \"es\"\r\n          }`,\r\n          2000\r\n        );\r\n        return Promise.resolve();\r\n      } catch (e) {\r\n        return Promise.reject(e);\r\n      }\r\n    },\r\n    /**\r\n     * @function update_class\r\n     * @description Update an instance of a class (for teachers). Intended to be preformed from the EditClass Modal\r\n     * @param {String} class_ref the \"email/class_id\" String representation of the class ref in firebase\r\n     * @param {Object} class_obj The updated class object\r\n     * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\r\n     */\r\n    async update_class(class_ref, class_obj) {\r\n      try {\r\n        let [_email, _id] = class_ref.split(\"/\");\r\n        _email += ORG_DOMAIN;\r\n        // update the document with the same id as the class from the classes collection\r\n        await updateDoc(doc(db, \"classes\", _email, \"classes\", _id), class_obj);\r\n        _statuslog(\"📝 Updated remote class\");\r\n        let classes = this.classes;\r\n        // update local version of class in classes\r\n        const classIndex = classes.findIndex(\r\n          (class_obj) => class_obj.id === [_email, _id].join(\"/\")\r\n        );\r\n        if (classIndex !== -1) {\r\n          // Update the class object within the classes array\r\n          classes[classIndex] = { ...classes[classIndex], ...class_obj, _proxy: true };\r\n          _statuslog(\"📝 Updated local class\");\r\n        }\r\n\r\n        // show changes\r\n        this.classes = [...classes];\r\n        this.get_tasks();\r\n\r\n        // finish\r\n        return Promise.resolve();\r\n      } catch (err) {\r\n        return Promise.reject(err);\r\n      }\r\n    },\r\n    /**\r\n     * @function update_task\r\n     * @description Update an instance of a task from a class (for teachers). Intended to be preformed from the EditTask Modal\r\n     * @param {String} task_ref the \"email/class_id/task_id\" String representation of the task ref in firebase\r\n     * @param {Object} task_obj The updated task object\r\n     * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\r\n     */\r\n    async update_task(task_ref, task_obj) {\r\n      try {\r\n        delete task_obj.class_id;\r\n        delete task_obj.ref;\r\n        let [_email, _id, task_id] = task_ref.split(\"/\");\r\n        if (!_email.includes(ORG_DOMAIN)) {\r\n          _email += ORG_DOMAIN;\r\n        }\r\n        // update the document with the same id as the task from the tasks collection\r\n        await updateDoc(doc(db, \"classes\", _email, \"classes\", _id, \"tasks\", task_id), task_obj);\r\n        _statuslog(\"📝 Updated remote task\");\r\n        let classes = this.classes;\r\n        // update local version of task in classes\r\n        let class_id = [_email, _id].join(\"/\");\r\n        const classIndex = classes.findIndex((class_obj) => class_obj.id === class_id);\r\n        const ref = [_email, _id, task_id].join(\"/\");\r\n        if (classIndex !== -1) {\r\n          const taskIndex = classes[classIndex].tasks.findIndex((task) => task.ref === ref);\r\n\r\n          if (taskIndex !== -1) {\r\n            // Update the task object within the tasks array of the class_obj\r\n            classes[classIndex].tasks[taskIndex] = {\r\n              ...task_obj,\r\n              ref: ref,\r\n              class_id: class_id,\r\n              _proxy: true,\r\n            };\r\n            _statuslog(\"📝 Updated local task\");\r\n          }\r\n        }\r\n\r\n        // show changes\r\n        this.classes = [...classes];\r\n        this.get_tasks();\r\n\r\n        // finish\r\n        return Promise.resolve();\r\n      } catch (err) {\r\n        return Promise.reject(err);\r\n      }\r\n    },\r\n    /**\r\n     * @function delete_task\r\n     * @description Delete an instance of a task from a class (for teachers). Intended to be preformed from the ViewTask Modal\r\n     * @param {String} task_ref the \"email/class_id\" String representation of the task ref in firebase\r\n     * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\r\n     * @see {@link create_task}\r\n     * @note This currently only removes the instance of the task being viewed. Could add a secondary modal to allow deletion of multiple instances instead?\r\n     */\r\n    async delete_task(task_ref) {\r\n      let [_email, _id, task_id] = task_ref.split(\"/\");\r\n      _email += ORG_DOMAIN;\r\n      try {\r\n        // retrieve class reference\r\n\r\n        // remove the document with the same id as the task from the tasks collection\r\n        await deleteDoc(doc(db, \"classes\", _email, \"classes\", _id, \"tasks\", task_id));\r\n\r\n        // rerun get_tasks to update local data\r\n      } catch (err) {\r\n        return Promise.reject(err);\r\n      }\r\n      try {\r\n        let classes = this.classes;\r\n        classes.forEach((class_obj) => {\r\n          if (class_obj.id == [_email, _id].join(\"/\")) {\r\n            class_obj.tasks = class_obj.tasks.filter((task) => {\r\n              return task.ref != [_email, _id, task_id].join(\"/\");\r\n            });\r\n          }\r\n        });\r\n        this.classes = classes;\r\n        this.get_tasks();\r\n      } catch (err) {\r\n        _statuslog(\"🔥 Error removing task from local\", err);\r\n      }\r\n\r\n      return Promise.resolve();\r\n    },\r\n    /**\r\n     * @function task_from_ref\r\n     * @description Get the task object from a task reference\r\n     * @param {String} ref The task reference to get the task object from\r\n     * @returns {Promise} A promise that resolves to the task object or rejects with an {String} error\r\n     */\r\n    async task_from_ref(ref) {\r\n      try {\r\n        let [_email, _id, task_id] = ref.split(\"/\");\r\n        _email += ORG_DOMAIN;\r\n        let class_doc = await getDoc(doc(db, \"classes\", _email, \"classes\", _id));\r\n        let class_data = class_doc.data();\r\n        _statuslog(\"📚 Got class from ref\");\r\n\r\n        let task_doc = await getDoc(doc(db, \"classes\", _email, \"classes\", _id, \"tasks\", task_id));\r\n        if (!task_doc.exists()) return Promise.resolve(null);\r\n        _statuslog(\"📄 Got task from ref\");\r\n        let task_data = task_doc.data();\r\n        task_data = {\r\n          ...task_data,\r\n          ref: ref,\r\n          class_id: [_email, _id].join(\"/\"),\r\n          class_name: `P${class_data.period} - ${class_data.name}`,\r\n          _class: { ...class_data, ref: [_email.split(ORG_DOMAIN)[0], _id].join(\"~\") },\r\n        };\r\n        return Promise.resolve(task_data);\r\n      } catch (err) {\r\n        return Promise.reject(err);\r\n      }\r\n    },\r\n    /**\r\n     * @function class_from_ref\r\n     * @description Get the class object from a class reference\r\n     * @param {String} ref The class reference to get the class object from\r\n     * @returns {Promise} A promise that resolves to the class object or rejects with an {String} error\r\n     */\r\n    async class_from_ref(ref) {\r\n      try {\r\n        let [_email, _id] = ref.split(\"/\");\r\n        _email += ORG_DOMAIN;\r\n        let class_doc = await getDoc(doc(db, \"classes\", _email, \"classes\", _id));\r\n        _statuslog(\"📄 Got class doc\");\r\n        if (!class_doc.exists()) return Promise.reject();\r\n        let class_data = class_doc.data();\r\n        _statuslog(\"📚 Got class data\");\r\n        return Promise.resolve(class_data);\r\n      } catch (err) {\r\n        return Promise.reject(err);\r\n      }\r\n    },\r\n    /**\r\n     * @function show_timeout\r\n     * @description Show a popup saying that the session has timed out\r\n     * @returns Nothing\r\n     * @see {@link hide_timeout}\r\n     * @see {@link refresh_timeout}\r\n     */\r\n    show_timeout() {\r\n      _statuslog(\"🕒 Showing timeout\");\r\n      this.paused = true;\r\n    },\r\n\r\n    /**\r\n     * @function hide_timeout\r\n     * @description Hide the popup saying that the session has timed out\r\n     * @returns Nothing\r\n     * @see {@link show_timeout}\r\n     * @see {@link refresh_timeout}\r\n     */\r\n    hide_timeout() {\r\n      if (this.paused) {\r\n        _statuslog(\"🕒 Hiding timeout\");\r\n        this.paused = false;\r\n      }\r\n    },\r\n  },\r\n});\r\n","<template>\r\n  <div\r\n    class=\"overlay overlay_center_view overlay_slot__wrapper\"\r\n    :class=\"{ animate_out: animating_out }\"\r\n  >\r\n    <div class=\"overlay_close\" @click=\"closable ? close() : null\" :closable=\"closable\"></div>\r\n\r\n    <component v-if=\"component\" class=\"overlay_slot\" :is=\"component\" @close=\"close\" />\r\n    <slot v-else class=\"overlay_slot\" :close=\"close\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport \"@/assets/style/overlay.css\";\r\nexport default {\r\n  name: \"OverlayWrapper\",\r\n  emits: [\"close\"],\r\n  props: {\r\n    component: {\r\n      type: Object,\r\n      default: null,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      animating_out: false,\r\n    };\r\n  },\r\n  computed: {\r\n    closable() {\r\n      return this.$route?.meta?.block_close !== true;\r\n    },\r\n  },\r\n  methods: {\r\n    close() {\r\n      // animate out with scale for 0.25s, then emit close\r\n      this.animating_out = true;\r\n      setTimeout(() => {\r\n        window.onbeforeunload = null;\r\n        this.$emit(\"close\");\r\n        this.animating_out = false;\r\n      }, 250);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n","import { render } from \"./OverlayWrapper.vue?vue&type=template&id=30ce9620\"\nimport script from \"./OverlayWrapper.vue?vue&type=script&lang=js\"\nexport * from \"./OverlayWrapper.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\sande\\\\Documents\\\\GitHub\\\\mvtime.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"js/\" + chunkId + \".\" + {\"12\":\"6a081143\",\"48\":\"3fb4d67a\",\"86\":\"9ad0ab90\",\"133\":\"250b9708\",\"229\":\"5d913812\",\"328\":\"83aa6eda\",\"371\":\"98e35bc3\",\"454\":\"c5bec492\",\"478\":\"f1454719\",\"481\":\"dda7f9ff\",\"504\":\"bc66df09\",\"524\":\"3b9f7896\",\"529\":\"7efec34f\",\"594\":\"2f400570\",\"619\":\"502246a7\",\"648\":\"2d57b5fa\",\"710\":\"52c29f6f\",\"730\":\"bebd3a1c\",\"758\":\"53d0be97\",\"766\":\"8a2f5c70\",\"767\":\"a51b74e9\",\"770\":\"01b717dd\",\"815\":\"d5f20010\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"css/\" + chunkId + \".\" + {\"48\":\"eeae3750\",\"86\":\"bc3f70f7\",\"133\":\"102f1e67\",\"328\":\"fd8eb828\",\"371\":\"6b00815e\",\"454\":\"26082224\",\"478\":\"878f223e\",\"481\":\"b901e163\",\"504\":\"1221cfec\",\"594\":\"a370beff\",\"619\":\"1701e17f\",\"648\":\"097e6834\",\"710\":\"7011d503\",\"730\":\"32dc29b3\",\"758\":\"fb682efa\",\"766\":\"21056a39\",\"767\":\"a54d4ffa\",\"770\":\"77b68f83\",\"815\":\"2fa4a5c8\"}[chunkId] + \".css\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var inProgress = {};\nvar dataWebpackPrefix = \"mvtime:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","if (typeof document === \"undefined\") return;\nvar createStylesheet = function(chunkId, fullhref, oldTag, resolve, reject) {\n\tvar linkTag = document.createElement(\"link\");\n\n\tlinkTag.rel = \"stylesheet\";\n\tlinkTag.type = \"text/css\";\n\tvar onLinkComplete = function(event) {\n\t\t// avoid mem leaks.\n\t\tlinkTag.onerror = linkTag.onload = null;\n\t\tif (event.type === 'load') {\n\t\t\tresolve();\n\t\t} else {\n\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\tvar realHref = event && event.target && event.target.href || fullhref;\n\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + realHref + \")\");\n\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n\t\t\terr.type = errorType;\n\t\t\terr.request = realHref;\n\t\t\tif (linkTag.parentNode) linkTag.parentNode.removeChild(linkTag)\n\t\t\treject(err);\n\t\t}\n\t}\n\tlinkTag.onerror = linkTag.onload = onLinkComplete;\n\tlinkTag.href = fullhref;\n\n\tif (oldTag) {\n\t\toldTag.parentNode.insertBefore(linkTag, oldTag.nextSibling);\n\t} else {\n\t\tdocument.head.appendChild(linkTag);\n\t}\n\treturn linkTag;\n};\nvar findStylesheet = function(href, fullhref) {\n\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n\tfor(var i = 0; i < existingLinkTags.length; i++) {\n\t\tvar tag = existingLinkTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return tag;\n\t}\n\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n\tfor(var i = 0; i < existingStyleTags.length; i++) {\n\t\tvar tag = existingStyleTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\");\n\t\tif(dataHref === href || dataHref === fullhref) return tag;\n\t}\n};\nvar loadStylesheet = function(chunkId) {\n\treturn new Promise(function(resolve, reject) {\n\t\tvar href = __webpack_require__.miniCssF(chunkId);\n\t\tvar fullhref = __webpack_require__.p + href;\n\t\tif(findStylesheet(href, fullhref)) return resolve();\n\t\tcreateStylesheet(chunkId, fullhref, null, resolve, reject);\n\t});\n}\n// object to store loaded CSS chunks\nvar installedCssChunks = {\n\t143: 0\n};\n\n__webpack_require__.f.miniCss = function(chunkId, promises) {\n\tvar cssChunks = {\"48\":1,\"86\":1,\"133\":1,\"328\":1,\"371\":1,\"454\":1,\"478\":1,\"481\":1,\"504\":1,\"594\":1,\"619\":1,\"648\":1,\"710\":1,\"730\":1,\"758\":1,\"766\":1,\"767\":1,\"770\":1,\"815\":1};\n\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n\t\tpromises.push(installedCssChunks[chunkId] = loadStylesheet(chunkId).then(function() {\n\t\t\tinstalledCssChunks[chunkId] = 0;\n\t\t}, function(e) {\n\t\t\tdelete installedCssChunks[chunkId];\n\t\t\tthrow e;\n\t\t}));\n\t}\n};\n\n// no hmr","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmvtime\"] = self[\"webpackChunkmvtime\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(3490); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["getFirstNonStandardCharacter","str","match","err","_statuslog","arguments","length","args","Array","from","extras","substring","trimStart","console","info","log","class","ref","_createElementVNode","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_createElementBlock","id","_theme","$options","theme","onClick","_cache","refreshTimeout","onKeydown","onFocus","_createVNode","_component_router_view","do_timeout","store","paused","$data","animating","_createBlock","_component_OverlayWrapper","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_10","name","components","OverlayWrapper","data","platform","isElectron","computed","this","account_doc","prefs","hide_timeout","pageTitle","document","title","useMainStore","get_theme","mounted","navigator","userAgent","toLowerCase","indexOf","$route","query","window","location","search","split","set_theme","addEventListener","$refs","app","e","target","href","includes","startsWith","URL","url","hostname","preventDefault","open","encodeURIComponent","created","systemTheme","matchMedia","matches","storedTheme","localStorage","getItem","isDarkMode","methods","refresh_timeout","$","attr","watch","new_val","old_val","$nextTick","pause_modal","focus","overlay","close","setTimeout","__exports__","render","register","ready","registered","cached","updatefound","updated","clear","reload","offline","error","pinia","createPinia","createApp","App","use","router","VueLazyload","preLoad","attempt","mount","state","setItem","JSON","stringify","main","deep","key","body","on","user","hasClass","login","Popup","require","logout","push","afterEach","to","meta","page_title","theme_light","theme_color","light","theme_dark","dark","removePopup","style","documentElement","setProperty","text_light","text_dark","toast","placeholderToast","beforeEach","requiresAuth","Toast","path","redirect","fullPath","requiresTeacher","is_teacher","_hoisted_1","_component_BaseNav","_component_BaseFooter","toggle_theme","mobile","mobile_menu_open","$event","_normalizeClass","_component_router_link","closeMenu","linked","personal_account","_toDisplayString","logged_in","innerWidth","resize","unmounted","removeEventListener","BaseNav","BaseFooter","createRouter","history","createWebHistory","process","routes","component","Home","children","block_close","close_path","blockStandardRedirect","props","NotFound","noSurvey","parseQuery","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","initializeApp","auth","getAuth","db","getFirestore","getAnalytics","unsub","onAuthStateChanged","authChangeAction","timeout","subscribed","set_user","unsubscribe","setupSnapshot","uid","startTimeout","onSnapshot","doc","includeMetadataChanges","listening_doc","metadata","hasPendingWrites","exists","create_doc","listening_doc_data","linked_account_doc","show_prompt","clearTimeout","show_timeout","msToText","ms","minutes","Math","floor","seconds","delay","linked_to","currentRoute","value","fetch_classes","provider","GoogleAuthProvider","ORG_DOMAIN","validOrgAccount","userEmail","isIFrame","self","top","addScope","useDeviceLanguage","setCustomParameters","login_hint","today","Date","getTime","getTimezoneOffset","toISOString","defineStore","local","parse","classes","tasks","loaded_email","loaded_classes","teacher","doc_ref","collection_ref","getters","linked_accounts","active_doc","non_recent_signin","last_signin","lastSignInTime","diff","recently_joined","creation_time","creationTime","teacher_mode","MVTT_teacher_mode","email","first","last","test","done_daily_survey","done_surveys","done_join_form","join_form","account_ref","linked_account_ref","active_ref","local_theme","active_doc_theme","new_theme","new_doc","set_active","update_remote","actions","hash","CryptoJS","toString","async","Promise","reject","join","_email","_id","code","class_obj","find","code_ref","setDoc","class_ref","updateDoc","merge","resolve","code_doc","getDoc","prev","new_text","SuccessToast","i","class_tasks","j","date","year","month","day","isNaN","color","class_name","period","sort","a","b","localeCompare","removeItem","linked_doc","linked_doc_data","doc_from_uid","ErrorToast","WarningToast","email_queue","collection","sent_email","addDoc","cc","fromname","template","sender_name","sender_uid","email_doc_ref","email_doc","checks","delivery","attempts","accepted","filtered_linked","filter","interval","setInterval","clearInterval","responses","login_promise","survey_ref","response_obj","time","updated_surveys","class_id","filtered_classes","c","get_tasks","remove_class_id_helper","then","userDoc","signOut","get_remote","replace","catch","signInWithRedirect","signInWithPopup","displayName","cleanError","personal_provider","update_wrapper_acc_doc","create_teacher_doc","teacher_ref","run_hash","random","unique","Set","class_path","remove_invalid","teacher_classes","subclass_ref","subclass_doc","doc_data","all","map","class_data","class_tasks_snapshot","getDocs","forEach","task","task_data","classes_subcollection","classes_subcollection_query_snapshot","class_doc","is_joined","teacher_email","class_period","class_key","create_class","class_doc_ref","add_class","task_obj","task_classes","type","batch","writeBatch","updated_classes","displayed_class_id","class_tasks_collection","task_ref","set","_proxy","commit","classIndex","findIndex","task_id","taskIndex","deleteDoc","task_doc","_class","animate_out","animating_out","closable","$props","_resolveDynamicComponent","onClose","_renderSlot","_ctx","$slots","emits","Object","default","onbeforeunload","$emit","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","keys","every","splice","r","n","getter","__esModule","d","definition","o","defineProperty","enumerable","get","f","chunkId","reduce","promises","u","miniCssF","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","inProgress","dataWebpackPrefix","l","done","script","needAttach","scripts","getElementsByTagName","s","getAttribute","createElement","charset","nc","setAttribute","src","onScriptComplete","event","onerror","onload","doneFns","parentNode","removeChild","bind","head","appendChild","Symbol","toStringTag","p","createStylesheet","fullhref","oldTag","linkTag","rel","onLinkComplete","errorType","realHref","Error","request","insertBefore","nextSibling","findStylesheet","existingLinkTags","tag","dataHref","existingStyleTags","loadStylesheet","installedCssChunks","miniCss","cssChunks","installedChunks","installedChunkData","promise","loadingEnded","realSrc","message","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}