"use strict";(self["webpackChunkmvtime"]=self["webpackChunkmvtime"]||[]).push([[451],{1311:function(t,e,s){s.d(e,{l:function(){return i}});var o=s(1020);const a=[[/https:\/\/[a-zA-Z0-9]+.instructure.com\/courses\/[0-9]+\/modules*./,"Canvas Course Modules"],[/https:\/\/[a-zA-Z0-9]+.instructure.com\/courses\/[0-9]+\/assignments\/[0-9]+/,"Canvas Assignment"],[/https:\/\/[a-zA-Z0-9]+.instructure.com\/courses\/[0-9]+/,"Canvas Course"],[/https:\/\/[a-zA-Z0-9]+.instructure.com\/courses/,"Canvas Home"],[/https:\/\/[a-zA-Z0-9]+.instructure.com/,"Canvas"],[/https:\/\/classroom.google.com\/c\/[a-zA-Z0-9]+\/a\/.+/,"Google Classroom Assignment"],[/https:\/\/classroom.google.com\/c\/[a-zA-Z0-9]+\/p\/.+/,"Google Classroom Post"],[/https:\/\/classroom.google.com\/c\/[a-zA-Z0-9]+/,"Google Classroom Class"],[/https:\/\/classroom.google.com\/h/,"Google Classroom Home"],[/https:\/\/classroom.google.com\/u\/[0-9]+/,"Google Classroom Home"],[/https:\/\/drive.google.com\/file\/d\/.+/,"Google Drive File"],[/https:\/\/drive.google.com\/drawings\/d\/.+/,"Google Drawing"],[/https:\/\/docs.google.com\/document\/d\/.+/,"Google Docs File"],[/https:\/\/docs.google.com\/spreadsheets\/d\/.+/,"Google Sheet"],[/https:\/\/[a-zA-Z0-9]+.lon-capa.net.*/,"LON-CAPA Portal"],[/https:\/\/lon-capa.net.*/,"LON-CAPA Portal"],[/https:\/\/[a-zA-Z0-9]+.loncapa.net.*/,"LON-CAPA Portal"],[/https:\/\/loncapa.net.*/,"LON-CAPA Portal"]];function n(t){if(t){t=t.toLowerCase();for(let e=0;e<a.length;e++)if(t.match(a[e][0]))return a[e][1]}}const i=(0,o.Q_)({id:"magic",state:()=>({types:{note:"Note",task:"Assignment",test:"Test",project:"Project",quiz:"Quiz",exam:"Exam"}}),getters:{},actions:{text(t){return n(t)||null},type(t){const e="note"==t.type,s=((e?t.description:t.name)||"").toLowerCase();return s.includes("summative")&&!s.includes("assignment")||s.includes("formative")||s.includes("unit")&&s.includes("test")?"test":s.includes("project")?"project":s.includes("quiz")?"quiz":s.includes("exam")||s.includes("midterm")||s.includes("final")?"exam":s.length>=100||!s&&t.description&&t.description.length>=60?"note":s.length>=10&&s.length<50&&e||s.includes("assignment")?"task":void 0}}})},7451:function(t,e,s){s.r(e),s.d(e,{default:function(){return D}});s(7658);var o=s(3396),a=s(7139),n=s(9242);const i=t=>((0,o.dD)("data-v-4e2ec3df"),t=t(),(0,o.Cn)(),t),l={class:"edit_task"},r={class:"modal_header",ref:"title"},c={class:"header_style modal_header_title"},d={class:"overlay_contents",ref:"contents"},u={key:0},h={class:"overlay_contents_text change_text"},m=["href"],g={class:"inputs_row"},p=["placeholder"],_={key:1,alt:"Loading Icon",class:"loading_icon"},k={class:"bottom_actions"},f=["disabled"],y=i((()=>(0,o._)("div",{class:"flex_spacer"},null,-1))),v=["disabled"];function w(t,e,s,i,w,C){return(0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("header",r,[(0,o._)("h2",c,(0,a.zw)(w.original_note?"Update":"Add")+" "+(0,a.zw)(w.task.type||"task")+" notes ",1)],512),(0,o._)("div",d,[w.ready?((0,o.wg)(),(0,o.iD)("div",u,[(0,o._)("div",h,[(0,o.Uk)(' Save your notes for "'+(0,a.zw)(w.task.name)+'" in ',1),(0,o._)("a",{class:"class_name button_pointer_text",href:`/view/${w.task._class.ref}`,onClick:e[0]||(e[0]=e=>{e.preventDefault(),t.$router.push({name:"viewclass",params:{ref:w.task._class.ref},query:t.$route.query})}),style:(0,a.j5)({"--color-class":w.task._class.color,"--color-class-alt":w.task._class.color+"2d"})},(0,a.zw)(`P${w.task._class.period} - ${w.task._class.name}`),13,m)]),(0,o._)("div",g,[(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>w.note=t),class:"styled_input styled_textarea task_note",type:"text",placeholder:"Your "+C.type_full+" Notes (Optional)"},"\r\n          ",8,p),[[n.nr,w.note]])])])):((0,o.wg)(),(0,o.iD)("img",_))],512),(0,o._)("div",k,[w.ready?((0,o.wg)(),(0,o.iD)("button",{key:0,class:(0,a.C_)(["back_action click_escape",{loading_bg:w.loading}]),disabled:w.loading,onClick:e[2]||(e[2]=(...t)=>C.back&&C.back(...t))}," View ",10,f)):((0,o.wg)(),(0,o.iD)("button",{key:1,class:"close_action click_escape",onClick:e[3]||(e[3]=e=>t.$emit("close"))},"Close")),y,(0,o._)("button",{class:(0,a.C_)(["continue_action click_ctrlenter",{loading_bg:w.loading}]),onClick:e[4]||(e[4]=(...t)=>C.try_submit&&C.try_submit(...t)),disabled:C.not_submittable},(0,a.zw)(w.original_note?"Update":"Add"),11,v)])])}var C=s(8980),b=s(1311),$=s(2745),A=s(1708),z=s(9529),O=s.n(z),x={name:"EditTaskView",emits:["close"],mixins:[O()],data(){return{task:{},original_note:"",note:"",ready:!1,loading:!0}},mounted(){this.$smoothReflow({el:this.$refs.contents,childTransitions:!0}),this.$smoothReflow({el:this.$refs.title,hideOverflow:!0}),this.get_task()},computed:{not_submittable(){return!this.changed},type_full(){return(0,b.l)()?.types[this.task.type]||this.task.type||"Task"},store(){return(0,C.h)()},changed(){return this.original_note!==this.note}},methods:{try_submit(){this.not_submittable?new A.OO("No changes to save",1e3):this.update_note()},back(){this.$router.push({name:"viewtask",params:{ref:this.$route.params.ref},query:this.$route.query})},async update_note(){this.loading=!0,this.store.set_note(this.note,this.$route.params.ref).then((()=>{new A.bF(`${this.original_note?this.note?"Updated":"Removed":"Added"} ${this.task.type||"task"} notes for ${this.task.name}`,2e3),this.back()})).catch((t=>{this.loading=!1,$.i2.error(`ðŸ“ƒ Couldn't edit ${this.task.type||"task"} notes:`,t),new A.PK(`Couldn't edit ${this.task.type||"task"} notes`,t,2e3)}))},async get_task(){const t=this.$route.params.ref.split("~").join("/");t?t.split("/").length<3&&(new A.OO("Invalid task specified",1500),this.$emit("close")):(new A.OO("No task specified",1500),this.$emit("close")),this.store.task_from_ref(t).then((t=>{t?(this.task=t,this.original={...t},this.ready=!0,this.loading=!1):(new A.OO("Couldn't find that task",2e3),$.i2.warn("âš  Couldn't find task"),this.$emit("close"));const e=this.store.note_for(this.$route.params.ref);e&&(this.note=e,this.original_note=e)})).catch((t=>{new A.PK("Error getting task",t,1500),$.i2.error("âš  Error getting task",t),this.$emit("close")}))}}},P=s(89);const Z=(0,P.Z)(x,[["render",w],["__scopeId","data-v-4e2ec3df"]]);var D=Z}}]);
//# sourceMappingURL=451.7e0d8393.js.map