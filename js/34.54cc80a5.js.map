{"version":3,"file":"js/34.54cc80a5.js","mappings":"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","sources":["webpack://mvtime/./src/store/magic.js","webpack://mvtime/./src/components/Portal/ExamCard.vue","webpack://mvtime/./src/components/Portal/ExamCard.vue?b3ef","webpack://mvtime/./src/views/Portal/ViewClass.vue","webpack://mvtime/./src/views/Portal/ViewClass.vue?81e5"],"sourcesContent":["// Path: store/magic.js\n\n// setup Pinia store\nimport { _status } from \"@/common\";\nimport { defineStore } from \"pinia\";\n\nconst API_URL = `https://${process.env.VUE_APP_BRAND_DOMAIN__API}/`;\n\nexport const useMagic = defineStore({\n  id: \"magic\",\n  state: () => ({\n    last: {},\n    types: [\n      { key: \"note\", name: \"Note\", list_as: \"Add a Note\", shortcuts: [\"n\"] },\n      {\n        key: \"task\",\n        name: \"Assignment\",\n        list_as: \"Schedule an Assignment\",\n        shortcuts: [\"a\"],\n      },\n      // socratic: \"Socratic Seminar\",\n      {\n        key: \"test\",\n        name: \"Test\",\n        list_as: \"Schedule a Test\",\n        shortcuts: [\"t\"],\n      },\n\n      // summative: \"Summative Assignment\",\n      // midterm: \"Midterm\",\n      {\n        key: \"project\",\n        name: \"Project\",\n        list_as: \"Schedule a Project\",\n        shortcuts: [\"p\"],\n      },\n      {\n        key: \"quiz\",\n        name: \"Quiz\",\n        list_as: \"Schedule a Quiz\",\n        shortcuts: [\"q\"],\n      },\n      {\n        key: \"exam\",\n        name: \"Exam\",\n        list_as: \"Schedule an Exam\",\n        shortcuts: [\"e\"],\n      },\n    ],\n  }),\n  getters: {},\n  actions: {\n    /**\n     * @function type_full\n     * @description get the full type name from the short type\n     * @param {String} short_type - the short type of the task\n     * @returns {String} text - the full type name\n     * @see types\n     */\n    type_full(short_type) {\n      return this.types.find((t) => t.key === short_type)?.name || short_type;\n    },\n    /**\n     * @function path\n     * @description get the smart text associated with a given url\n     * @param {String} path\n     * @returns {String} text - the smart text associated with the url\n     */\n    async text(path) {\n      if (!path) return;\n      return await this.rated_api_get(\"get/magic/link-text\", { path });\n    },\n    /**\n     * @function type\n     * @description get the smart type associated with a given description\n     * @param {String} text\n     */\n    async type(task) {\n      if (!task) return;\n      return await this.rated_api_get(\"get/magic/task-type\", { task });\n    },\n    /**\n     * @function api_get\n     * @description do get request to url: API_URL + endpoint with request query of data\n     * @param {String} endpoint api endpoint\n     * @param {Object} data query params\n     * @returns {Promise<Object>} json\n     */\n    async api_get(endpoint, data) {\n      data = data || {};\n      if (!endpoint) return;\n      // get url with query\n      const url = new URL(API_URL + endpoint);\n      Object.keys(data).forEach((key) => url.searchParams.append(key, data[key]));\n      const run_hash = Math.random().toString(36).substring(7);\n      _status.log(`🛜 Running API fetch | <${run_hash}>`);\n      // do request\n      this.last[endpoint] = { time: Date.now(), hash: run_hash };\n      try {\n        const response = await fetch(url.href, {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        });\n        // response\n        if (!response.ok) throw \"Non-valid response\";\n        const json = await response.json();\n        _status.log(`🛜 API fetch success | <${run_hash}>`);\n        return json.data;\n      } catch (err) {\n        _status.error(`🛜 API fetch failed  | <${run_hash}>`, err);\n        return null;\n      }\n    },\n    /**\n     * @function rated_api_get\n     * @description do api_get but abide by rate limit (only eval once every 15 seconds)\n     */\n    async rated_api_get(type) {\n      _status.log(\"🛜 API fetch requested\");\n      const run_hash = Math.random().toString(36).substring(7);\n      const prev_time = this.last[type]?.time;\n      const prev_hash = this.last[type]?.hash;\n      if (Date.now() - prev_time < 2000) {\n        _status.warn(\"🛜 API fetch rate limited\");\n        // wait 15 seconds and see if it is still the most recent request\n        await new Promise((resolve) => setTimeout(resolve, 15000));\n        if (this.last[type]?.time !== prev_time || this.last[type]?.hash !== prev_hash) {\n          _status.warn(\"🛜 Outdated API fetch skipped\");\n          return;\n        } else {\n          _status.log(\"🛜 API fetch rate limit lifted\");\n        }\n      }\n      return await this.api_get(...arguments, run_hash);\n    },\n  },\n});\n","<template>\n  <a class=\"task_card\" :style=\"{ '--color-calendar-task': task.color }\">\n    <div class=\"task_card_icon\" :title=\"task.class_name\">\n      <div class=\"task_card_icon_container\">\n        <div class=\"task_card_icon_container__img\"></div>\n      </div>\n    </div>\n    <div class=\"task_card_details\">\n      <div class=\"task_card_details__title\">{{ task.name }}</div>\n      <div class=\"task_card_details__extended\">\n        <span class=\"task_card_details__extended__date\">{{\n          task.date.toLocaleDateString(undefined, {\n            weekday: \"long\",\n            month: \"long\",\n            day: \"numeric\",\n          })\n        }}</span>\n        &nbsp;|&nbsp;\n        <span class=\"task_card_details__extended__type\">{{ type_full }}</span>\n      </div>\n    </div>\n  </a>\n</template>\n\n<script>\nimport { useMagic } from \"@/store/magic\";\nexport default {\n  name: \"ExamCard\",\n  props: {\n    task: {\n      type: Object,\n      required: true,\n    },\n  },\n  computed: {\n    type_full() {\n      return useMagic().type_full(this.task.type);\n    },\n  },\n};\n</script>\n\n<style>\n.task_card {\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: stretch;\n  align-items: stretch;\n  height: var(--height-task-card);\n  margin: 10px 0;\n  color: inherit !important;\n}\n.task_card,\n.task_card * {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.task_card_icon {\n  height: 100%;\n  width: var(--height-task-card);\n  border-radius: 30%;\n  border: solid 2px var(--color-calendar-task);\n  box-sizing: border-box;\n  filter: var(--filter-calendar-task);\n  overflow: hidden;\n  flex-shrink: 0;\n  /* box-shadow: 0px 4px 4px var(--color-calendar-task); */\n  /* box-shadow: 0px 0px 4px var(--color-calendar-task); */\n}\n.task_card_icon_container {\n  height: 100%;\n  width: 100%;\n  filter: var(--filter-task-card-icon);\n  background-color: var(--color-task-card-icon);\n}\n.task_card_icon_container__img {\n  background-image: url(@/assets/img/general/portal/exam/test-icon.png);\n  background-image: url(@/assets/img/general/portal/exam/test-icon.svg);\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: center center;\n  padding: var(--padding-task-card-icon);\n  filter: var(--filter-icon);\n  height: 100%;\n  width: 100%;\n}\n.task_card_details {\n  padding-left: 20px;\n  flex-grow: 1;\n  /* layout */\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: stretch;\n  justify-content: space-evenly;\n}\n/* details */\n.task_card_details > * {\n  white-space: nowrap;\n  overflow: hidden;\n  max-width: 100%;\n  text-overflow: ellipsis;\n}\n.task_card_details__title {\n  font-size: 14px;\n  font-weight: 500;\n}\n.task_card_details__extended {\n  opacity: 0.5;\n  font-size: 12px;\n  font-weight: 400;\n  /* layout */\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  justify-content: flex-start;\n}\n.task_card_details__extended__date {\n  flex: auto 0 1;\n}\n.task_card_details__extended__type {\n  flex: 0px 1 1;\n}\n</style>\n","import { render } from \"./ExamCard.vue?vue&type=template&id=de5e6496\"\nimport script from \"./ExamCard.vue?vue&type=script&lang=js\"\nexport * from \"./ExamCard.vue?vue&type=script&lang=js\"\n\nimport \"./ExamCard.vue?vue&type=style&index=0&id=de5e6496&lang=css\"\n\nimport exportComponent from \"/Users/sander/Documents/GitHub/mvtime.github.io/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <main class=\"viewclass\">\n    <header class=\"modal_header\" ref=\"title\">\n      <h2 class=\"header_style modal_header_title\">View class details</h2>\n    </header>\n    <div ref=\"contents\" class=\"overlay_contents\">\n      <div v-if=\"ready\" ref=\"text_contents\">\n        <div class=\"spaced_contents\">\n          <div class=\"styled_obj\">\n            <span class=\"styled_line__label\">Class:</span>\n            <span class=\"styled_line__separator\"></span>\n            <span class=\"styled_line__value\">\n              <a\n                class=\"class_name button_pointer_text\"\n                :href=\"`/view/${this.$route.params.ref}`\"\n                @click=\"$event.preventDefault()\"\n                :style=\"{\n                  '--color-class': class_obj.color,\n                  '--color-class-alt': class_obj.color + '2d',\n                }\"\n                >P{{ class_obj.period }} - {{ class_obj.name }}</a\n              >\n            </span>\n          </div>\n          <div class=\"styled_obj\">\n            <span class=\"styled_line__label\">Period:</span>\n            <span class=\"styled_line__separator\"></span>\n            <span class=\"styled_line__value\">\n              {{ class_obj.period }} (Schedules\n              {{ schedules[class_obj.period % 2].join(\", \") }})</span\n            >\n          </div>\n          <div class=\"styled_obj\">\n            <span class=\"styled_line__label\">Name:</span>\n            <span class=\"styled_line__separator\"></span>\n            <span class=\"styled_line__value\"> {{ class_obj.name }}</span>\n          </div>\n          <div class=\"styled_obj\">\n            <span class=\"styled_line__label\">Description:</span>\n            <span class=\"styled_line__separator\"></span>\n            <span class=\"styled_line__value\" v-html=\"text || 'Not Provided'\"> </span>\n          </div>\n          <div class=\"styled_obj upcoming_section\" ref=\"upcoming\">\n            <span class=\"styled_line__label\">Upcoming:</span>\n            <span class=\"styled_line__separator\"></span>\n            <span\n              @click=\"get_upcoming\"\n              class=\"styled_line__value alt_bg\"\n              :class=\"{\n                loading_clickable: !upcoming && !loading_upcoming,\n                loading_bg: loading_upcoming,\n              }\"\n            >\n              <span v-if=\"!upcoming && !loading_upcoming\" class=\"load_text\">Click to Load</span>\n              <div v-else-if=\"!loading_upcoming\" class=\"upcoming_tasks_container\">\n                <div v-if=\"loading_upcoming\" class=\"upcoming_tasks_loading\">\n                  <img alt=\"Loading Icon\" class=\"loading_icon\" src=\"/assets/loading.svg\" />\n                </div>\n                <div v-else-if=\"upcoming && upcoming.length\" class=\"upcoming_tasks\">\n                  <ExamCard\n                    class=\"upcoming_tasks__task\"\n                    v-for=\"task in upcoming\"\n                    :task=\"task\"\n                    :key=\"task.name\"\n                    :href=\"`/view/${task.ref}`\"\n                    @click=\"\n                      $event.preventDefault();\n                      show_task(task.ref);\n                    \"\n                  ></ExamCard>\n                </div>\n                <span v-else>No Upcoming Tasks</span>\n              </div>\n            </span>\n          </div>\n        </div>\n        <div class=\"overlay_contents_text\">\n          Information is provided by teachers and volunteer students, and may not always be correct\n        </div>\n      </div>\n      <img ref=\"loading_contents\" alt=\"Loading Icon\" class=\"loading_icon\" v-else />\n    </div>\n    <div class=\"bottom_actions\">\n      <button class=\"close_action click_escape\" @click=\"$emit('close')\">Close</button>\n      <div class=\"flex_spacer\"></div>\n      <button class=\"share_action primary_styled\" @click=\"share_class\" :disabled=\"!ready\">\n        Share\n      </button>\n      <button\n        class=\"edit_action primary_styled\"\n        v-if=\"editable\"\n        :disabled=\"!ready\"\n        @click=\"edit_class\"\n      >\n        Edit\n      </button>\n      <button\n        class=\"join_leave_action primary_styled\"\n        v-else-if=\"store.user && class_obj\"\n        :disabled=\"!ready\"\n        :class=\"{ click_escape: joinable }\"\n        @click=\"\n          if (joinable) {\n            join_class();\n          } else {\n            leave_class();\n          }\n        \"\n      >\n        {{ joinable ? \"Join\" : \"Leave\" }}\n      </button>\n    </div>\n  </main>\n</template>\n<script>\n/**\n * Displays the details of a class and allows the teacher to edit it, or any user to share it\n *\n * @module ViewClassView\n * @description Modal that displays the details of a class and allows the teacher to edit it.\n * @requires module:store/MainStore\n * @emits {Function} close - An event emitted when the modal is closed.\n */\n\nimport { WarningToast, ErrorToast, SuccessToast } from \"@svonk/util\";\nimport { _status } from \"@/common\";\nimport { useMainStore } from \"@/store\";\nimport smoothReflow from \"vue-smooth-reflow\";\nimport showdown from \"showdown\";\nimport \"@/assets/style/markdown.css\";\nimport ExamCard from \"@/components/Portal/ExamCard.vue\";\nlet converter = new showdown.Converter();\nexport default {\n  name: \"ViewClassView\",\n  emits: [\"close\"],\n  mixins: [smoothReflow],\n  components: { ExamCard },\n  data() {\n    return {\n      class_obj: null,\n      ready: false,\n      loading_upcoming: false,\n      upcoming: null,\n      schedules: [\n        [\"A\", \"G\", \"C\", \"D\", \"and H\"],\n        [\"A\", \"G\", \"B\", \"E\", \"and I\"],\n      ],\n    };\n  },\n  computed: {\n    store() {\n      return useMainStore();\n    },\n    text() {\n      return this.class_obj?.description && converter.makeHtml(this.class_obj?.description);\n    },\n    joinable() {\n      return (\n        this.store.user &&\n        this.class_obj &&\n        // and not already joined\n        !this.store?.active_doc?.classes?.includes(this.store.ref_to_path(this.$route.params.ref))\n      );\n    },\n    editable() {\n      return (\n        this.store.is_teacher &&\n        this.store.user &&\n        this.class_obj &&\n        this.$route.params.ref &&\n        this.$route.params.ref.split(\"~\")[0] ==\n          this.store.active_doc.email.replace(this.store.ORG_DOMAIN, \"\")\n      );\n    },\n  },\n  mounted() {\n    this.$smoothReflow({\n      el: this.$refs.contents,\n      hideOverflow: false,\n      childTransitions: false,\n    });\n    this.$smoothReflow({\n      el: this.$refs.title,\n      hideOverflow: true,\n    });\n    this.get_class();\n  },\n  methods: {\n    /** Shares the class link with the native share function, or to the clipboard if sharing is not supported */\n    async share_class() {\n      let url = new URL(\n        `https://${this.$env.VUE_APP_BRAND_DOMAIN__VIEWCLASS}/` + this.$route.params.ref\n      );\n      if (navigator.share) {\n        navigator\n          .share({\n            title: this.class_obj.name,\n            text: `Check out ${this.class_obj.name || \"this class\"} on ${\n              this.$env.VUE_APP_BRAND_SHORT_NAME\n            }!`,\n            url: url.href,\n          })\n          .then(() => new SuccessToast(\"Opened share dialog\", 1000))\n          .catch((err) => _status.error(\"🔥 Error sharing\", err));\n      } else if (navigator.clipboard) {\n        navigator.clipboard.writeText(url.href);\n        new WarningToast(\"Sharing not supported, copied link to clipboard\", 2000);\n      } else {\n        new WarningToast(\"Sharing and copying not supported, sorry\", 2000);\n      }\n    },\n    edit_class() {\n      this.$router.push({\n        name: \"editclass\",\n        params: {\n          ref: this.$route?.params?.ref,\n        },\n        query: this.$route.query,\n      });\n    },\n    join_class() {\n      this.$router.push({\n        name: \"refclass\",\n        params: {\n          ref: this.$route?.params?.ref,\n        },\n        query: this.$route.query,\n      });\n    },\n    leave_class() {\n      this.$router.push({\n        name: \"leave\",\n        params: {\n          ref: this.$route?.params?.ref,\n        },\n        query: this.$route.query,\n      });\n    },\n    async get_upcoming() {\n      if (this.upcoming != null) {\n        return;\n      }\n      this.loading_upcoming = true;\n      this.store\n        .upcoming_from_ref(this.$route.params.ref.split(\"~\").join(\"/\"), this.class_obj)\n        .then((upcoming) => {\n          this.upcoming = upcoming;\n          this.loading_upcoming = false;\n        })\n        .catch((err) => {\n          new WarningToast(\"Couldn't get upcoming tasks\", 2000);\n          _status.error(\"⚠ Couldn't get upcoming tasks\", err);\n          this.loading_upcoming = false;\n        });\n    },\n    async get_class() {\n      // get class ref from route params\n      if (!this.$route.params.ref) {\n        new WarningToast(\"No class specified\", 1500);\n        this.$emit(\"close\");\n        return;\n      }\n      const ref = this.$route.params.ref.split(\"~\").join(\"/\");\n      if (!ref) {\n        new WarningToast(\"No class specified\", 1500);\n        this.$emit(\"close\");\n        return;\n      } else if (ref.split(\"/\").length != 2) {\n        new WarningToast(\"Invalid class specified\", 1500);\n        this.$emit(\"close\");\n        return;\n      }\n      // get class from store\n      this.store\n        .class_from_ref(ref)\n        .then((class_obj) => {\n          if (!class_obj) {\n            new WarningToast(\"Couldn't find that class\", 2000);\n            this.$emit(\"close\");\n          } else {\n            this.class_obj = class_obj;\n            this.ready = true;\n          }\n        })\n        .catch((err) => {\n          new ErrorToast(\"Error getting class\", err, 1500);\n          _status.error(\"⚠ Error getting class\", err);\n          this.$emit(\"close\");\n        });\n    },\n    show_task(ref) {\n      this.$router.push({\n        name: \"viewtask\",\n        params: {\n          ref: ref,\n        },\n        query: this.$route.query,\n      });\n    },\n  },\n};\n</script>\n<style scoped>\n.spaced_contents {\n  margin-top: 0;\n}\n.loading_icon {\n  max-height: 150px;\n  min-width: 100%;\n}\n.class_name {\n  line-height: 1em;\n  cursor: default;\n}\n.upcoming_tasks {\n  display: flex;\n  flex-direction: column;\n  gap: calc(var(--padding-overlay-input) / 1.5);\n}\n.upcoming_tasks__task {\n  cursor: pointer;\n  user-select: none;\n  margin: 0;\n}\n/* style upcoming */\n.upcoming_section .loading_clickable {\n  cursor: pointer;\n  text-align: center;\n  user-select: none;\n  transition: letter-spacing 0.15s ease-out;\n}\n.upcoming_section .loading_clickable:hover {\n  letter-spacing: 0.04em;\n}\n.upcoming_section .loading_bg {\n  height: calc(50px + 2 * var(--padding-overlay-input));\n}\n.upcoming_section {\n  padding: 0;\n}\n.upcoming_section > .styled_line__label,\n.upcoming_section > .styled_line__value {\n  padding: calc((var(--height-overlay-input) - 18px) / 2) var(--padding-overlay-input);\n  display: block;\n  box-sizing: content-box;\n}\n.upcoming_section > .styled_line__label {\n  padding-right: 0;\n}\n.upcoming_section > .styled_line__value {\n  width: 0;\n  flex-grow: 1;\n  padding-left: 0;\n}\n.upcoming_section > .styled_line__separator {\n  height: calc(100% - (var(--height-overlay-input) - 18px) + 5px);\n}\n</style>\n","import { render } from \"./ViewClass.vue?vue&type=template&id=5804b2c2&scoped=true\"\nimport script from \"./ViewClass.vue?vue&type=script&lang=js\"\nexport * from \"./ViewClass.vue?vue&type=script&lang=js\"\n\nimport \"./ViewClass.vue?vue&type=style&index=0&id=5804b2c2&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/sander/Documents/GitHub/mvtime.github.io/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5804b2c2\"]])\n\nexport default __exports__"],"names":["API_URL","useMagic","defineStore","id","state","last","types","key","name","list_as","shortcuts","getters","actions","type_full","short_type","this","find","t","async","path","rated_api_get","task","endpoint","data","url","URL","Object","keys","forEach","searchParams","append","run_hash","Math","random","toString","substring","_status","log","time","Date","now","hash","response","fetch","href","method","headers","ok","json","err","error","type","prev_time","prev_hash","warn","Promise","resolve","setTimeout","api_get","arguments","_createElementVNode","class","_hoisted_2","_createElementBlock","style","_normalizeStyle","$props","color","title","class_name","_hoisted_4","_hoisted_5","_toDisplayString","_hoisted_6","_hoisted_7","date","toLocaleDateString","undefined","_hoisted_8","$options","props","required","computed","__exports__","render","ref","_hoisted_3","alt","src","_hoisted_31","_hoisted_1","$data","ready","_hoisted_9","_hoisted_10","_hoisted_11","$route","params","onClick","_cache","$event","preventDefault","class_obj","period","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","schedules","join","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","innerHTML","text","_hoisted_25","_hoisted_26","_hoisted_27","args","get_upcoming","_normalizeClass","upcoming","loading_upcoming","_hoisted_29","_hoisted_30","_hoisted_32","length","_hoisted_33","_Fragment","_renderList","_createBlock","_component_ExamCard","show_task","_hoisted_34","_hoisted_28","_hoisted_35","_hoisted_36","_hoisted_37","_ctx","$emit","_hoisted_38","share_class","disabled","_hoisted_39","editable","edit_class","_hoisted_40","store","user","click_escape","joinable","join_class","leave_class","_hoisted_41","converter","showdown","emits","mixins","smoothReflow","components","ExamCard","useMainStore","description","makeHtml","active_doc","classes","includes","ref_to_path","is_teacher","split","email","replace","ORG_DOMAIN","mounted","$smoothReflow","el","$refs","contents","hideOverflow","childTransitions","get_class","methods","$env","VUE_APP_BRAND_DOMAIN__VIEWCLASS","navigator","share","VUE_APP_BRAND_SHORT_NAME","then","SuccessToast","catch","clipboard","writeText","WarningToast","$router","push","query","upcoming_from_ref","class_from_ref","ErrorToast"],"sourceRoot":""}