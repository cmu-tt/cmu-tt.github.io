{"version":3,"file":"js/620.6cd27ce2.js","mappings":"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","sources":["webpack://mvtime/./src/components/Modal/ModalFromPages.vue","webpack://mvtime/./src/components/Modal/ModalFromPages.vue?d9c6","webpack://mvtime/./src/views/Home/LinkModal.vue","webpack://mvtime/./src/components/Modal/SignIntoPersonalAccount.vue","webpack://mvtime/./src/components/Modal/SignIntoPersonalAccount.vue?f57a","webpack://mvtime/./src/components/Modal/LinkAccount.vue","webpack://mvtime/./src/components/Modal/LinkAccount.vue?15c1","webpack://mvtime/./src/views/Home/LinkModal.vue?e441"],"sourcesContent":["<template>\r\n  <Modal\r\n    ref=\"modal\"\r\n    :title=\"page.title\"\r\n    :content=\"page.content\"\r\n    :html=\"page.content ? null : page.html\"\r\n    :is_notification=\"page.is_notification\"\r\n    :submit_text=\"page.submit_text\"\r\n    :progress=\"{ current: page_index + 1, total: pages.length }\"\r\n    :show_progress=\"true\"\r\n    :can_continue=\"can_continue\"\r\n    :continue_action=\"next_page\"\r\n    :load=\"load_data\"\r\n    :skippable=\"skippable\"\r\n    @open=\"switch_to\"\r\n    @update=\"curr_data = $event\"\r\n    @status=\"curr_done = $event\"\r\n    @skip=\"$emit('skip')\"\r\n  ></Modal>\r\n</template>\r\n\r\n<script>\r\n/**\r\n * @file ModalFromPages.vue\r\n * @displayName Modal from Pages\r\n * @description A modal view that displays a series of pages as a modal with progression.\r\n * @property {Array} pages - An array of page objects, each with a title (String) and content (Component) or html (String), and most importantly a @update and @status emit.\r\n * @emits {Array} finish - Emitted when the user has finished all pages, with an array of responses from each page.\r\n */\r\nfunction confirm_unfinished() {\r\n  // message irrelevant for most browsers, but nice to have\r\n  return \"You haven't finished the task yet, and might lose progress. Are you sure you want to close the tab?\";\r\n}\r\nimport ModalVue from \"./Modal.vue\";\r\nimport { _status } from \"@/common\";\r\nexport default {\r\n  name: \"ModalFromPages\",\r\n  emits: [\"finish\", \"skip\"],\r\n  components: {\r\n    Modal: ModalVue,\r\n  },\r\n  props: {\r\n    pages: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n    skippable: {\r\n      type: Boolean,\r\n      default: false,\r\n      required: false,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      page_index: 0,\r\n      responses: [],\r\n      curr_data: null,\r\n      curr_done: false,\r\n      page_start: Date.now(),\r\n    };\r\n  },\r\n  computed: {\r\n    load_data() {\r\n      // return saved data, or empty object\r\n      this.set_done();\r\n      return this.responses[this.page_index]?.data || {};\r\n    },\r\n    page() {\r\n      if (this.pages.length == 0) {\r\n        return {\r\n          title: \"No pages provided\",\r\n          content: null,\r\n          html: null,\r\n          is_notification: true,\r\n          submit_text: \"Oops!\",\r\n        };\r\n      }\r\n      return this.pages[this.page_index];\r\n    },\r\n    can_continue() {\r\n      // either no content or has updated with @status of true\r\n      return !this.page.content || this.page.is_notification || this.curr_done;\r\n    },\r\n  },\r\n  mounted() {\r\n    window.addEventListener(\"keydown\", this.arrow);\r\n  },\r\n  beforeUnmount() {\r\n    window.removeEventListener(\"keydown\", this.arrow);\r\n  },\r\n  methods: {\r\n    set_done() {\r\n      this.curr_done = this.responses[this.page_index]?.done || false;\r\n    },\r\n    arrow(event) {\r\n      // catch arrow keys to switch pages\r\n      if (event.key == \"ArrowLeft\") {\r\n        this.switch_to(this.page_index - 1);\r\n      } else if (event.key == \"ArrowRight\") {\r\n        this.switch_to(this.page_index + 1);\r\n      }\r\n    },\r\n    switch_to(page_index) {\r\n      // switch to page at index, as long as it is before the current, or already completed\r\n      if (\r\n        page_index <= this.page_index ||\r\n        Object.prototype.hasOwnProperty.call(this.responses, Math.max(page_index - 1, 0))\r\n      ) {\r\n        this.page_index = page_index;\r\n      } else {\r\n        _status.log(`⏵ ModalFromPages: page index ${page_index} invalid`);\r\n      }\r\n    },\r\n    next_page() {\r\n      // get responses from current component and add to responses array\r\n      this.responses[this.page_index] = {\r\n        data: this.curr_data,\r\n        done: this.curr_done || !this.page.content || this.page.is_notification,\r\n        time: {\r\n          start: this.page_start,\r\n          duration: Date.now() - this.page_start,\r\n        },\r\n      };\r\n      if (this.can_continue && this.page_index < this.pages.length - 1) {\r\n        // add unload listener to prevent accidental closing if previous page is 1st\r\n        if (this.page_index == 0) {\r\n          window.onbeforeunload = confirm_unfinished;\r\n        }\r\n\r\n        // switch to next page\r\n        this.page_index++;\r\n      } else if (this.can_continue) {\r\n        // emit responses\r\n        this.$emit(\"finish\", this.responses);\r\n        // leave the rest up to the parent component\r\n      }\r\n    },\r\n  },\r\n  watch: {\r\n    page_index() {\r\n      // reset page details when changing pages\r\n      this.page_start = Date.now();\r\n      this.curr_data = this.load_data;\r\n      this.set_done();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped></style>\r\n","import { render } from \"./ModalFromPages.vue?vue&type=template&id=694ce12d\"\nimport script from \"./ModalFromPages.vue?vue&type=script&lang=js\"\nexport * from \"./ModalFromPages.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\sande\\\\Documents\\\\GitHub\\\\mvtime.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <ModalFromPages\r\n    :pages=\"pages\"\r\n    @finish=\"finish\"\r\n    @skip=\"$emit('close')\"\r\n    ref=\"survey_modal\"\r\n  ></ModalFromPages>\r\n</template>\r\n\r\n<script>\r\n/* eslint-disable vue/no-unused-components */\r\nimport { useMainStore } from \"@/store\";\r\nimport { shallowRef } from \"vue\";\r\nimport { WarningToast } from \"@svonk/util\";\r\nimport ModalFromPages from \"@/components/Modal/ModalFromPages.vue\";\r\nimport SignIntoPersonalAccount from \"@/components/Modal/SignIntoPersonalAccount.vue\";\r\nimport LinkAccount from \"@/components/Modal/LinkAccount.vue\";\r\nimport \"@/assets/style/overlay.css\";\r\nexport default {\r\n  name: \"LinkModal\",\r\n  emits: [\"close\"],\r\n  components: {\r\n    ModalFromPages,\r\n    SignIntoPersonalAccount,\r\n    LinkAccount,\r\n  },\r\n  data() {\r\n    return {\r\n      ready: false,\r\n      pages: [\r\n        {\r\n          title: \"Link Personal Account\",\r\n          html: `<div class='overlay_contents_text'>Thank you for taking the time to link your account. This will allow you to access your account from any device.<br/><br/> You'll need to be signed into your personal account in order to continue, we'll guide you through that on the next page.</div>`,\r\n          submit_text: \"Okay\",\r\n          is_notification: true,\r\n        },\r\n        {\r\n          title: \"Sign into Personal Account\",\r\n          content: shallowRef(SignIntoPersonalAccount),\r\n          submit_text: \"Continue\",\r\n        },\r\n        {\r\n          title: \"Account Details\",\r\n          content: shallowRef(LinkAccount),\r\n          submit_text: \"Link\",\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  props: {\r\n    code: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n  },\r\n  computed: {\r\n    store() {\r\n      return useMainStore();\r\n    },\r\n  },\r\n  mounted() {\r\n    if (!this.code) {\r\n      new WarningToast(\"No code provided!\", \"You must provide a code to link your account.\");\r\n      this.$emit(\"close\");\r\n    } else {\r\n      this.ready = true;\r\n    }\r\n    this.store.personal_account = true;\r\n    if (\r\n      this.store?.linked_account_doc?.linked_to &&\r\n      this.store.linked_account_doc.linked_to == this.code\r\n    ) {\r\n      this.$emit(\"close\");\r\n      new WarningToast(\"These two accounts are already linked!\", 2000);\r\n    }\r\n  },\r\n  methods: {\r\n    finish() {\r\n      this.store.link_account_uid(this.code).then(() => {\r\n        this.$emit(\"close\");\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n","<template>\r\n  <div class=\"personal_prompt\">\r\n    <div class=\"overlay_contents_text\">\r\n      If you're signed into an {{ store.ORG_DOMAIN.substring(1) }} account, you should have been\r\n      signed out automatically\r\n    </div>\r\n    <div class=\"inputs_row\">\r\n      <button class=\"primary_styled styled_input\" @click=\"sign_into_personal\" :disabled=\"ready\">\r\n        Login to Personal Account\r\n      </button>\r\n    </div>\r\n    <div class=\"overlay_contents_text\">Please sign into your personal account to continue</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useMainStore } from \"@/store\";\r\nimport { WarningToast } from \"@svonk/util\";\r\nexport default {\r\n  name: \"SignIntoPersonalAccount\",\r\n  emits: [\"skip\", \"update\", \"status\"],\r\n  data() {\r\n    return {\r\n      ready: false,\r\n    };\r\n  },\r\n  methods: {\r\n    logout_if_org() {\r\n      // sign out\r\n      if (this.store?.user?.email?.includes(this.store.ORG_DOMAIN)) {\r\n        this.store.logout();\r\n      }\r\n    },\r\n    check_and_emit() {\r\n      // if already linked, exit\r\n      if (\r\n        this.store?.linked_account_doc?.linked_to &&\r\n        this.$route?.params?.code &&\r\n        this.store.linked_account_doc.linked_to == this.$route.params.code\r\n      ) {\r\n        new WarningToast(\"These two accounts are already linked!\", 2000);\r\n        this.$emit(\"skip\");\r\n      } else {\r\n        // otherwise check status\r\n        this.ready =\r\n          this.store.user?.email && !this.store.user.email.includes(this.store.ORG_DOMAIN);\r\n        this.$emit(\"status\", !!this.ready);\r\n      }\r\n    },\r\n    sign_into_personal() {\r\n      this.store.personal_account = true;\r\n      this.store\r\n        .login_personal()\r\n        .then(() => {\r\n          this.logout_if_org();\r\n          this.check_and_emit();\r\n        })\r\n        .catch(() => {\r\n          this.check_and_emit();\r\n        });\r\n    },\r\n  },\r\n  computed: {\r\n    store() {\r\n      return useMainStore();\r\n    },\r\n  },\r\n  mounted() {\r\n    this.logout_if_org();\r\n    this.check_and_emit();\r\n  },\r\n  watch: {\r\n    store: {\r\n      handler() {\r\n        this.logout_if_org();\r\n        this.check_and_emit();\r\n      },\r\n      deep: true,\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.login_button {\r\n  text-align: center;\r\n}\r\n</style>\r\n","import { render } from \"./SignIntoPersonalAccount.vue?vue&type=template&id=bc2b4226&scoped=true\"\nimport script from \"./SignIntoPersonalAccount.vue?vue&type=script&lang=js\"\nexport * from \"./SignIntoPersonalAccount.vue?vue&type=script&lang=js\"\n\nimport \"./SignIntoPersonalAccount.vue?vue&type=style&index=0&id=bc2b4226&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sande\\\\Documents\\\\GitHub\\\\mvtime.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-bc2b4226\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"account_linking\">\r\n    <img v-if=\"loading\" alt=\"Loading...\" class=\"loading_placeholder loading_icon\" />\r\n    <div v-else-if=\"data\" class=\"account_details\">\r\n      <div class=\"overlay_contents_text\">\r\n        Please confirm that the details below match the account you're trying to link to.\r\n      </div>\r\n      <div class=\"spaced_contents\">\r\n        <div class=\"styled_obj\">\r\n          <span class=\"styled_line__label\">Name:</span>\r\n          <span class=\"styled_line__separator\"></span>\r\n          <span class=\"styled_line__value\">{{ data.name || \"Couldn't Load\" }}</span>\r\n        </div>\r\n        <div class=\"styled_obj\">\r\n          <span class=\"styled_line__label\">Email:</span>\r\n          <span class=\"styled_line__separator\"></span>\r\n          <span class=\"styled_line__value\">{{ data.email || \"Couldn't Load\" }}</span>\r\n        </div>\r\n        <div class=\"styled_obj\">\r\n          <span class=\"styled_line__label\">Grade:</span>\r\n          <span class=\"styled_line__separator\"></span>\r\n          <span class=\"styled_line__value\">{{\r\n            gradeText(data.join_form && data.join_form.grade) || \"Couldn't Load\"\r\n          }}</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"overlay_contents_text\">\r\n        Once you've checked them, just press <span class=\"button_pointer_text\">Link</span> to finish\r\n        connecting your accounts!\r\n      </div>\r\n    </div>\r\n    <div v-else class=\"overlay_contents_text\">\r\n      Something went wrong fetching the account details, please try again later.\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useMainStore } from \"@/store\";\r\nimport { ErrorToast } from \"@svonk/util\";\r\nexport default {\r\n  name: \"LinkAccount\",\r\n  emits: [\"update\", \"status\"],\r\n  props: {\r\n    load: {\r\n      type: Object,\r\n      default: () => ({}),\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      loading: true,\r\n      code: null,\r\n      data: null,\r\n    };\r\n  },\r\n  computed: {\r\n    store() {\r\n      return useMainStore();\r\n    },\r\n  },\r\n  methods: {\r\n    gradeText(numeric) {\r\n      switch (numeric) {\r\n        case \"9\":\r\n          return \"Freshman\";\r\n        case \"10\":\r\n          return \"Sophomore\";\r\n        case \"11\":\r\n          return \"Junior\";\r\n        case \"12\":\r\n          return \"Senior\";\r\n        default:\r\n          return \"Teacher\";\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    // get code prop from route\r\n    this.code = this.$route.params.code;\r\n    this.store\r\n      .doc_from_uid(this.code)\r\n      .then((result) => {\r\n        this.loading = false;\r\n        this.data = result;\r\n      })\r\n      .catch((err) => {\r\n        this.loading = false;\r\n        new ErrorToast(\"Failed to link account\", err, 3000);\r\n      });\r\n  },\r\n  watch: {\r\n    loading() {\r\n      this.$emit(\"status\", !this.loading);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\ndiv.account_linking,\r\n.account_details {\r\n  display: flex;\r\n  flex-flow: column nowrap;\r\n}\r\n\r\n.loading_placeholder {\r\n  min-width: 100%;\r\n  max-height: 131px;\r\n}\r\n</style>\r\n","import { render } from \"./LinkAccount.vue?vue&type=template&id=1c042e43&scoped=true\"\nimport script from \"./LinkAccount.vue?vue&type=script&lang=js\"\nexport * from \"./LinkAccount.vue?vue&type=script&lang=js\"\n\nimport \"./LinkAccount.vue?vue&type=style&index=0&id=1c042e43&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sande\\\\Documents\\\\GitHub\\\\mvtime.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1c042e43\"]])\n\nexport default __exports__","import { render } from \"./LinkModal.vue?vue&type=template&id=62ba84b2\"\nimport script from \"./LinkModal.vue?vue&type=script&lang=js\"\nexport * from \"./LinkModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\sande\\\\Documents\\\\GitHub\\\\mvtime.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_Modal","ref","title","$options","page","content","html","is_notification","submit_text","progress","current","$data","page_index","total","$props","pages","length","show_progress","can_continue","continue_action","next_page","load","load_data","skippable","onOpen","switch_to","onUpdate","_cache","$event","curr_data","onStatus","curr_done","onSkip","_ctx","$emit","confirm_unfinished","name","emits","components","Modal","ModalVue","props","type","Array","required","Boolean","default","data","responses","page_start","Date","now","computed","this","set_done","mounted","window","addEventListener","arrow","beforeUnmount","removeEventListener","methods","done","event","key","Object","prototype","hasOwnProperty","call","Math","max","_status","log","time","start","duration","onbeforeunload","watch","__exports__","render","_component_ModalFromPages","onFinish","finish","class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_toDisplayString","store","ORG_DOMAIN","substring","_hoisted_3","onClick","args","sign_into_personal","disabled","ready","_hoisted_4","_hoisted_5","logout_if_org","user","email","includes","logout","check_and_emit","linked_account_doc","linked_to","$route","params","code","WarningToast","personal_account","login_personal","then","catch","useMainStore","handler","deep","alt","loading","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","gradeText","join_form","grade","_hoisted_18","_hoisted_19","numeric","doc_from_uid","result","err","ErrorToast","ModalFromPages","SignIntoPersonalAccount","LinkAccount","shallowRef","String","link_account_uid"],"sourceRoot":""}