"use strict";(self["webpackChunkmvtime"]=self["webpackChunkmvtime"]||[]).push([[305],{7305:function(t,e,s){s.r(e),s.d(e,{default:function(){return S}});var a=s(3396),i=s(7139),l=s(9242);const n=t=>((0,a.dD)("data-v-512ad8aa"),t=t(),(0,a.Cn)(),t),d={class:"create_task"},o={class:"modal_header"},r={class:"header_style modal_header_title"},k={class:"overlay_contents",ref:"contents"},h={key:0},_={class:"overlay_contents_text"},c={class:"inputs_row"},p=["placeholder","disabled"],u=n((()=>(0,a._)("div",{class:"flex-break"},null,-1))),y=["placeholder"],w=n((()=>(0,a._)("div",{class:"flex-break"},null,-1))),m={class:"styled_input styled_links_box"},g={class:"styled_links_display"},f={key:0,class:"placeholder"},v={key:1,class:"styled_line_links"},b=["href"],x=n((()=>(0,a._)("hr",{class:"styled_links_separator"},null,-1))),$={class:"styled_links_add"},C=["disabled"],O={key:1,alt:"Loading Icon",class:"loading_icon"},E={class:"bottom_actions"},D=n((()=>(0,a._)("div",{class:"flex_spacer"},null,-1))),z=["disabled"],U=["disabled"];function V(t,e,s,n,V,L){return(0,a.wg)(),(0,a.iD)("div",d,[(0,a._)("header",o,[(0,a._)("h2",r,"Edit "+(0,i.zw)(V.task.type||"task")+" details",1)]),(0,a._)("div",k,[V.ready?((0,a.wg)(),(0,a.iD)("div",h,[(0,a._)("div",_," Change the details of your "+(0,i.zw)(V.task.type||"task")+" below ",1),(0,a._)("div",c,[L.is_note?(0,a.kq)("",!0):(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:0,"onUpdate:modelValue":e[0]||(e[0]=t=>V.task.name=t),class:"styled_input",type:"text",placeholder:L.type_full+" Name",disabled:L.is_note},null,8,p)),[[l.nr,V.task.name]]),(0,a.wy)((0,a._)("input",{type:"date",class:"styled_input input_task__date","onUpdate:modelValue":e[1]||(e[1]=t=>V.task.date=t),style:(0,i.j5)({maxWidth:L.is_note?"100%":null})},null,4),[[l.nr,V.task.date]]),u,(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":e[2]||(e[2]=t=>V.task.description=t),class:"styled_input styled_textarea task_description",type:"text",placeholder:L.type_full+(L.is_note?" Contents":" Description (Optional)")},"\r\n          ",8,y),[[l.nr,V.task.description]]),w,(0,a._)("div",m,[(0,a._)("div",g,[V.task.links&&V.task.links.length?((0,a.wg)(),(0,a.iD)("div",v,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(V.task.links,(t=>((0,a.wg)(),(0,a.iD)("a",{class:"styled_line_links__link",target:"_blank",href:t.path,key:t.path},(0,i.zw)(t.text),9,b)))),128))])):((0,a.wg)(),(0,a.iD)("span",f,(0,i.zw)(L.type_full)+" Links (Optional)",1))]),x,(0,a._)("div",$,[(0,a.wy)((0,a._)("input",{class:"styled_links_add__path",type:"url","onUpdate:modelValue":e[3]||(e[3]=t=>V.newlink.path=t),placeholder:"Link URL (http://example.com)"},null,512),[[l.nr,V.newlink.path]]),(0,a.wy)((0,a._)("input",{class:"styled_links_add__text",type:"text","onUpdate:modelValue":e[4]||(e[4]=t=>V.newlink.text=t),placeholder:"Link Text (what students see)"},null,512),[[l.nr,V.newlink.text]]),(0,a._)("button",{class:"styled_links_add__action",onClick:e[5]||(e[5]=(...t)=>L.add_newlink&&L.add_newlink(...t)),disabled:L.newlink_ready}," Add ",8,C)])])])])):((0,a.wg)(),(0,a.iD)("img",O))],512),(0,a._)("div",E,[(0,a._)("button",{class:"close_action",onClick:e[6]||(e[6]=e=>t.$emit("close"))},"Cancel"),D,(0,a._)("button",{class:"delete_action primary_styled",onClick:e[7]||(e[7]=(...t)=>L.delete_task&&L.delete_task(...t)),disabled:!V.ready||V.loading}," Delete ",8,z),(0,a._)("button",{class:(0,i.C_)(["continue_action",{loading_bg:V.loading}]),onClick:e[8]||(e[8]=(...t)=>L.update_task&&L.update_task(...t)),disabled:!L.changed||!V.task.name&&!L.is_note||!V.task.date||L.is_note&&!V.task.description}," Save "+(0,i.zw)(V.task.type||"task"),11,U)])])}s(7658);var L=s(8980),N=s(2745),T=s(1708),j=s(9529),K=s.n(j),P={name:"EditTaskView",emits:["close"],mixins:[K()],data(){return{task:{},original:{},newlink:{text:"",path:""},ready:!1,loading:!0,types:{note:"Note",task:"Assignment",test:"Test",project:"Project",quiz:"Quiz",exam:"Exam"}}},mounted(){this.$smoothReflow({el:this.$refs.contents,hideOverflow:!0,childTransitions:!0}),this.$smoothReflow({el:this.$refs.title,hideOverflow:!0}),this.store.is_teacher||(new T.OO("You must be a teacher to edit tasks",2e3),this.$emit("close")),this.get_task()},computed:{type_full(){return this.types[this.task.type]||this.task.type||"Task"},newlink_ready(){return!this.newlink.path||!this.newlink.text||!this.newlink.path.startsWith("http")},class_name(){if(!this.classes)return null;let t=this.classes.find((t=>t.id===this.class_id));return t?t.name:null},store(){return(0,L.h)()},is_note(){return"note"===this.task.type},class(){return this.store.classes.find((t=>t.id===this.task.class_id))},changed(){return JSON.stringify(this.task)!==JSON.stringify(this.original)}},methods:{add_newlink(){this.task.links||(this.task.links=[]),this.newlink.path=this.newlink.path.startsWith("http")?this.newlink.path:"https://"+this.newlink.path,this.task.links.push(this.newlink),this.newlink={text:"",path:""}},async update_task(){this.loading=!0,this.store.update_task(this.task.ref,this.task).then((()=>{this.$emit("close")})).catch((t=>{this.loading=!1,(0,N.E)(`ðŸ“ƒ Couldn't create ${this.task.type||"task"}:`,t),new T.PK("Couldn't create task",t,2e3)}))},async delete_task(){let t=this.task.name?` "${this.task.name}"`:"";this.store.delete_task(this.task.ref).then((()=>{new T.bF(`Removed ${this.task.type}${t}`,3e3),this.$emit("close")})).catch((e=>{new T.PK(`Error removing ${this.task.type}${t}`,3e3),(0,N.E)("âš  Error removing task",e)}))},async get_task(){const t=this.$route.params.ref.split("~").join("/");t?t.split("/").length<3&&(new T.OO("Invalid task specified",1500),this.$emit("close")):(new T.OO("No task specified",1500),this.$emit("close")),this.store.task_from_ref(t).then((t=>{t?((0,N.E)("ðŸ“ƒ Got task data from ref"),console.log(t),this.task=t,this.original={...t},this.ready=!0,this.loading=!1):(new T.OO("Couldn't find that task",2e3),(0,N.E)("âš  Couldn't find task"),this.$emit("close"))})).catch((t=>{new T.PK("Error getting task",1500),(0,N.E)("âš  Error getting task",t),this.$emit("close")}))}}},R=s(89);const I=(0,R.Z)(P,[["render",V],["__scopeId","data-v-512ad8aa"]]);var S=I}}]);
//# sourceMappingURL=305.a6f759f1.js.map